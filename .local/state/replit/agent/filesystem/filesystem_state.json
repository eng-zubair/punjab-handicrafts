{"file_contents":{"client/src/components/examples/DistrictCard.tsx":{"content":"import DistrictCard from '../DistrictCard';\nimport multanImage from '@assets/generated_images/Multan_blue_pottery_workshop_21555b73.png';\n\nexport default function DistrictCardExample() {\n  return (\n    <div className=\"max-w-sm\">\n      <DistrictCard\n        district=\"Multan\"\n        giBrand=\"Multani Crafts\"\n        image={multanImage}\n        craftCount={8}\n      />\n    </div>\n  );\n}\n","size_bytes":386},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/DistrictCard.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { ArrowRight } from \"lucide-react\";\n\ninterface DistrictCardProps {\n  district: string;\n  giBrand: string;\n  image: string;\n  craftCount: number;\n}\n\nexport default function DistrictCard({ district, giBrand, image, craftCount }: DistrictCardProps) {\n  const handleExplore = () => {\n    console.log(`Explore ${district} crafts`);\n  };\n\n  return (\n    <Card \n      className=\"overflow-hidden hover-elevate active-elevate-2 transition-all\"\n      data-testid={`card-district-${district.toLowerCase().replace(/\\s+/g, '-')}`}\n    >\n      <div className=\"relative aspect-[4/3] overflow-hidden\">\n        <img\n          src={image}\n          alt={district}\n          className=\"w-full h-full object-cover\"\n        />\n        <div className=\"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent\" />\n        <div className=\"absolute bottom-0 left-0 right-0 p-4 text-white\">\n          <h3 className=\"text-2xl font-bold mb-1\" data-testid={`text-district-${district.toLowerCase()}`}>\n            {district}\n          </h3>\n          <p className=\"text-sm text-white/90 mb-2\" data-testid={`text-gi-brand-${district.toLowerCase()}`}>\n            {giBrand}\n          </p>\n        </div>\n      </div>\n      <CardContent className=\"p-4\">\n        <p className=\"text-sm text-muted-foreground mb-4\" data-testid={`text-craft-count-${district.toLowerCase()}`}>\n          {craftCount} unique crafts\n        </p>\n        <Button \n          variant=\"outline\" \n          className=\"w-full\"\n          onClick={handleExplore}\n          data-testid={`button-explore-${district.toLowerCase()}`}\n        >\n          Explore Crafts\n          <ArrowRight className=\"ml-2 w-4 h-4\" />\n        </Button>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":1841},"client/src/components/examples/GITag.tsx":{"content":"import GITag from '../GITag';\n\nexport default function GITagExample() {\n  return (\n    <div className=\"flex gap-2 flex-wrap\">\n      <GITag giBrand=\"Multani Crafts\" />\n      <GITag giBrand=\"Lahore Heritage Crafts\" />\n      <GITag giBrand=\"Cholistani Heritage\" />\n    </div>\n  );\n}\n","size_bytes":280},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":21846},"client/src/components/examples/Header.tsx":{"content":"import Header from '../Header';\n\nexport default function HeaderExample() {\n  return <Header />;\n}\n","size_bytes":98},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"Inter\", \"Poppins\", \"sans-serif\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":4064},"server/seed.ts":{"content":"import { storage } from \"./storage\";\n\nconst districts = [\n  {\n    district: \"Lahore\",\n    giBrand: \"Lahore Heritage Crafts\",\n    crafts: [\"Adda Work\", \"Handmade Jewelry\", \"Dough Work\", \"Raisin Art\"],\n  },\n  {\n    district: \"Gujranwala\",\n    giBrand: \"Punjab Metal & Leather Works\",\n    crafts: [\"Textile\", \"Ceramics\", \"Rugs\", \"Sports Goods\", \"Leather\", \"Hand Embroidery\"],\n  },\n  {\n    district: \"Rawalpindi\",\n    giBrand: \"Pothohari Crafts\",\n    crafts: [\"Phulkari\"],\n  },\n  {\n    district: \"Sahiwal\",\n    giBrand: \"Sufi Craft Collection\",\n    crafts: [\"Tarkashi\", \"Bedsheets\"],\n  },\n  {\n    district: \"Faisalabad\",\n    giBrand: \"Faisalabadi Weaves\",\n    crafts: [\"Textile\", \"Tarkashi\", \"Khaddar\", \"Bedsheets\", \"Wood Crafts\"],\n  },\n  {\n    district: \"D.G. Khan\",\n    giBrand: \"Saraiki Tribal Arts\",\n    crafts: [\"Hand Embroidery\", \"Machine Embroidery\"],\n  },\n  {\n    district: \"Bahawalpur\",\n    giBrand: \"Cholistani Heritage\",\n    crafts: [\"Mukesh\", \"Chunri\", \"Ralli\", \"Handmade Jewelry\", \"Gotta Work\"],\n  },\n  {\n    district: \"Sargodha\",\n    giBrand: \"Salt & Stone Crafts\",\n    crafts: [\"Truck Art\", \"Tarkashi\", \"Hand Embroidery\"],\n  },\n  {\n    district: \"Multan\",\n    giBrand: \"Multani Crafts\",\n    crafts: [\"Block Printing\", \"Ajrak\", \"Camel Skin Lamps\", \"Blue Pottery\", \"Khussa\"],\n  },\n];\n\nasync function seed() {\n  console.log(\"Starting database seed...\");\n\n  try {\n    // Seed categories/districts\n    for (const districtData of districts) {\n      const existing = await storage.getCategoryByDistrict(districtData.district);\n      if (!existing) {\n        await storage.createCategory(districtData);\n        console.log(`Created category for ${districtData.district}`);\n      }\n    }\n\n    // Create sample users (vendors)\n    const vendor1Id = \"vendor-1-lahore\";\n    const vendor2Id = \"vendor-2-multan\";\n    const vendor3Id = \"vendor-3-bahawalpur\";\n    \n    const existingVendor1 = await storage.getUser(vendor1Id);\n    if (!existingVendor1) {\n      await storage.upsertUser({\n        id: vendor1Id,\n        email: \"vendor1@sanatzar.pk\",\n        firstName: \"Ahmad\",\n        lastName: \"Hassan\",\n        role: \"vendor\",\n      });\n      console.log(\"Created vendor 1\");\n    }\n\n    const existingVendor2 = await storage.getUser(vendor2Id);\n    if (!existingVendor2) {\n      await storage.upsertUser({\n        id: vendor2Id,\n        email: \"vendor2@sanatzar.pk\",\n        firstName: \"Fatima\",\n        lastName: \"Ali\",\n        role: \"vendor\",\n      });\n      console.log(\"Created vendor 2\");\n    }\n\n    const existingVendor3 = await storage.getUser(vendor3Id);\n    if (!existingVendor3) {\n      await storage.upsertUser({\n        id: vendor3Id,\n        email: \"vendor3@sanatzar.pk\",\n        firstName: \"Zainab\",\n        lastName: \"Khan\",\n        role: \"vendor\",\n      });\n      console.log(\"Created vendor 3\");\n    }\n\n    // Create sample stores\n    let store1Id: string;\n    let store2Id: string;\n    let store3Id: string;\n\n    const existingStores = await storage.getStoresByVendor(vendor1Id);\n    if (existingStores.length === 0) {\n      const store1 = await storage.createStore({\n        vendorId: vendor1Id,\n        name: \"Lahore Heritage Emporium\",\n        description: \"Authentic handcrafted jewelry and embroidery from Lahore's master artisans\",\n        district: \"Lahore\",\n        giBrands: [\"Lahore Heritage Crafts\"],\n      });\n      store1Id = store1.id;\n      console.log(\"Created store 1\");\n    } else {\n      store1Id = existingStores[0].id;\n    }\n\n    const existingStores2 = await storage.getStoresByVendor(vendor2Id);\n    if (existingStores2.length === 0) {\n      const store2 = await storage.createStore({\n        vendorId: vendor2Id,\n        name: \"Multani Blue Pottery House\",\n        description: \"Traditional blue pottery and khussa footwear crafted with generations of expertise\",\n        district: \"Multan\",\n        giBrands: [\"Multani Crafts\"],\n      });\n      store2Id = store2.id;\n      console.log(\"Created store 2\");\n    } else {\n      store2Id = existingStores2[0].id;\n    }\n\n    const existingStores3 = await storage.getStoresByVendor(vendor3Id);\n    if (existingStores3.length === 0) {\n      const store3 = await storage.createStore({\n        vendorId: vendor3Id,\n        name: \"Cholistani Ralli Crafts\",\n        description: \"Beautiful Ralli quilts and traditional embroidery from Bahawalpur\",\n        district: \"Bahawalpur\",\n        giBrands: [\"Cholistani Heritage\"],\n      });\n      store3Id = store3.id;\n      console.log(\"Created store 3\");\n    } else {\n      store3Id = existingStores3[0].id;\n    }\n\n    // Create sample products with actual image paths\n    const products = [\n      {\n        storeId: store1Id,\n        title: \"Handcrafted Kundan Jewelry Set\",\n        description: \"Exquisite Kundan jewelry set featuring traditional Lahori craftsmanship with intricate detailing\",\n        price: \"8500\",\n        stock: 12,\n        images: [\"/attached_assets/generated_images/Lahore_jewelry_and_embroidery_39a642f1.png\"],\n        district: \"Lahore\",\n        giBrand: \"Lahore Heritage Crafts\",\n        status: \"approved\",\n      },\n      {\n        storeId: store1Id,\n        title: \"Traditional Gota Embroidered Dupatta\",\n        description: \"Elegant dupatta with authentic Lahore gota work and delicate embroidery\",\n        price: \"4200\",\n        stock: 25,\n        images: [\"/attached_assets/generated_images/Lahore_jewelry_and_embroidery_39a642f1.png\"],\n        district: \"Lahore\",\n        giBrand: \"Lahore Heritage Crafts\",\n        status: \"approved\",\n      },\n      {\n        storeId: store2Id,\n        title: \"Multani Blue Pottery Vase\",\n        description: \"Hand-painted blue pottery vase showcasing the iconic Multani blue glaze technique\",\n        price: \"3500\",\n        stock: 18,\n        images: [\"/attached_assets/generated_images/Multan_blue_pottery_workshop_21555b73.png\"],\n        district: \"Multan\",\n        giBrand: \"Multani Crafts\",\n        status: \"approved\",\n      },\n      {\n        storeId: store2Id,\n        title: \"Handmade Multani Khussa\",\n        description: \"Traditional leather khussa footwear with intricate embroidery and authentic Multani design\",\n        price: \"2800\",\n        stock: 30,\n        images: [\"/attached_assets/generated_images/Handmade_khussa_footwear_product_06baa0d0.png\"],\n        district: \"Multan\",\n        giBrand: \"Multani Crafts\",\n        status: \"approved\",\n      },\n      {\n        storeId: store2Id,\n        title: \"Blue Pottery Decorative Plate\",\n        description: \"Large decorative plate with traditional Multani blue pottery patterns\",\n        price: \"4500\",\n        stock: 15,\n        images: [\"/attached_assets/generated_images/Multan_blue_pottery_workshop_21555b73.png\"],\n        district: \"Multan\",\n        giBrand: \"Multani Crafts\",\n        status: \"approved\",\n      },\n      {\n        storeId: store3Id,\n        title: \"Authentic Ralli Quilt - Queen Size\",\n        description: \"Beautiful handcrafted Ralli quilt featuring traditional Bahawalpur patterns and vibrant colors\",\n        price: \"12000\",\n        stock: 8,\n        images: [\"/attached_assets/generated_images/Bahawalpur_Ralli_quilts_display_07a38e65.png\"],\n        district: \"Bahawalpur\",\n        giBrand: \"Cholistani Heritage\",\n        status: \"approved\",\n      },\n      {\n        storeId: store3Id,\n        title: \"Handmade Mukesh Embroidered Shawl\",\n        description: \"Luxurious shawl with traditional Mukesh embroidery from Bahawalpur artisans\",\n        price: \"6500\",\n        stock: 14,\n        images: [\"/attached_assets/generated_images/Bahawalpur_Ralli_quilts_display_07a38e65.png\"],\n        district: \"Bahawalpur\",\n        giBrand: \"Cholistani Heritage\",\n        status: \"approved\",\n      },\n      {\n        storeId: store3Id,\n        title: \"Traditional Gotta Work Clutch\",\n        description: \"Elegant clutch bag featuring authentic Bahawalpur Gotta work with mirror embellishments\",\n        price: \"1800\",\n        stock: 22,\n        images: [\"/attached_assets/generated_images/Bahawalpur_Ralli_quilts_display_07a38e65.png\"],\n        district: \"Bahawalpur\",\n        giBrand: \"Cholistani Heritage\",\n        status: \"approved\",\n      },\n    ];\n\n    // Clear existing products to ensure fresh seed data\n    const allProducts = await storage.getAllProducts({});\n    for (const product of allProducts.products) {\n      await storage.deleteProduct(product.id);\n    }\n    console.log(`Cleared ${allProducts.products.length} existing products`);\n\n    // Create new products\n    for (const product of products) {\n      await storage.createProduct(product);\n      console.log(`Created product: ${product.title}`);\n    }\n\n    console.log(\"Seed completed successfully!\");\n  } catch (error) {\n    console.error(\"Error seeding database:\", error);\n    throw error;\n  }\n}\n\n// Export the seed function for use in API endpoint\nexport { seed };\n\n// Run seed if this file is executed directly\nif (import.meta.url === `file://${process.argv[1]}`) {\n  seed().catch((error) => {\n    console.error(\"Seed failed:\", error);\n    process.exit(1);\n  });\n}\n","size_bytes":9010},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\nimport { initializeDefaultAdmin } from \"./init\";\n\nconst app = express();\n\ndeclare module 'http' {\n  interface IncomingMessage {\n    rawBody: unknown\n  }\n}\napp.use(express.json({\n  verify: (req, _res, buf) => {\n    req.rawBody = buf;\n  }\n}));\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // Initialize default admin account\n  await initializeDefaultAdmin();\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":2332},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"server/routes.ts":{"content":"import type { Express, RequestHandler } from \"express\";\nimport express from \"express\";\nimport { createServer, type Server } from \"http\";\nimport passport from \"passport\";\nimport { storage } from \"./storage\";\nimport { setupAuth, isAuthenticated, hashPassword } from \"./auth\";\nimport multer from \"multer\";\nimport path from \"path\";\nimport fs from \"fs/promises\";\nimport {\n  insertStoreSchema,\n  insertProductSchema,\n  insertOrderSchema,\n  insertOrderItemSchema,\n  insertMessageSchema,\n  insertPayoutSchema,\n  registerSchema,\n  loginSchema,\n  type User,\n} from \"@shared/schema\";\n\n// Helper function to remove sensitive fields from user objects\nfunction sanitizeUser(user: User) {\n  const { passwordHash, verificationToken, passwordResetToken, passwordResetExpires, ...safeUser } = user;\n  return safeUser;\n}\n\n// Helper function to serialize product prices to strings for API responses\nfunction serializeProduct<T extends { price: number | string }>(product: T): T & { price: string } {\n  return {\n    ...product,\n    price: String(product.price),\n  };\n}\n\nconst isVendor: RequestHandler = async (req: any, res, next) => {\n  try {\n    const userId = req.userId;\n    if (!userId) {\n      return res.status(401).json({ message: \"Unauthorized\" });\n    }\n    const user = await storage.getUser(userId);\n    if (!user || (user.role !== \"vendor\" && user.role !== \"admin\")) {\n      return res.status(403).json({ message: \"Vendor access required\" });\n    }\n    req.userRole = user.role;\n    next();\n  } catch (error) {\n    console.error(\"Error in isVendor middleware:\", error);\n    res.status(500).json({ message: \"Internal server error\" });\n  }\n};\n\nconst isAdmin: RequestHandler = async (req: any, res, next) => {\n  try {\n    const userId = req.userId;\n    if (!userId) {\n      return res.status(401).json({ message: \"Unauthorized\" });\n    }\n    const user = await storage.getUser(userId);\n    if (!user || user.role !== \"admin\") {\n      return res.status(403).json({ message: \"Admin access required\" });\n    }\n    req.userRole = user.role;\n    next();\n  } catch (error) {\n    console.error(\"Error in isAdmin middleware:\", error);\n    res.status(500).json({ message: \"Internal server error\" });\n  }\n};\n\n// Configure multer for secure file uploads\nconst uploadStorage = multer.diskStorage({\n  destination: async (req: any, file, cb) => {\n    try {\n      // Get store ID from request body or query\n      const storeId = req.body.storeId || req.query.storeId;\n      if (!storeId) {\n        return cb(new Error(\"Store ID is required\"), \"\");\n      }\n      \n      // Create directory if it doesn't exist\n      const uploadDir = path.join(process.cwd(), \"uploads\", \"product-images\", storeId);\n      await fs.mkdir(uploadDir, { recursive: true });\n      cb(null, uploadDir);\n    } catch (error) {\n      cb(error as Error, \"\");\n    }\n  },\n  filename: (req, file, cb) => {\n    // Sanitize filename: timestamp + random string + safe extension\n    const timestamp = Date.now();\n    const randomStr = Math.random().toString(36).substring(2, 8);\n    const ext = path.extname(file.originalname).toLowerCase();\n    const sanitizedName = `${timestamp}-${randomStr}${ext}`;\n    cb(null, sanitizedName);\n  },\n});\n\n// File filter for security\nconst fileFilter = (req: any, file: Express.Multer.File, cb: multer.FileFilterCallback) => {\n  // Only allow specific image MIME types\n  const allowedMimes = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp'];\n  const allowedExts = ['.jpg', '.jpeg', '.png', '.webp'];\n  \n  const ext = path.extname(file.originalname).toLowerCase();\n  \n  if (allowedMimes.includes(file.mimetype) && allowedExts.includes(ext)) {\n    cb(null, true);\n  } else {\n    cb(new Error('Only JPEG, PNG, and WebP images are allowed'));\n  }\n};\n\nconst upload = multer({\n  storage: uploadStorage,\n  fileFilter: fileFilter,\n  limits: {\n    fileSize: 5 * 1024 * 1024, // 5MB limit per file\n    files: 5, // Max 5 files per upload\n  },\n});\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Serve uploaded files statically\n  app.use('/uploads', express.static(path.join(process.cwd(), 'uploads')));\n\n  // Setup Authentication\n  await setupAuth(app);\n\n  // File Upload Routes\n  // Note: storeId must be passed as query parameter because multer parses multipart before req.body is available\n  app.post('/api/upload/product-images', isAuthenticated, isVendor, async (req: any, res) => {\n    try {\n      // Get storeId from query string (required before multer parsing)\n      const storeId = req.query.storeId;\n      \n      if (!storeId) {\n        return res.status(400).json({ message: \"Store ID is required in query string\" });\n      }\n\n      // Verify store ownership before allowing upload\n      const store = await storage.getStore(storeId);\n      if (!store) {\n        return res.status(404).json({ message: \"Store not found\" });\n      }\n\n      if (store.vendorId !== req.userId) {\n        return res.status(403).json({ message: \"You do not have permission to upload images for this store\" });\n      }\n\n      // Use multer middleware to handle the upload\n      upload.array('images', 5)(req, res, (err) => {\n        if (err instanceof multer.MulterError) {\n          if (err.code === 'LIMIT_FILE_SIZE') {\n            return res.status(400).json({ message: 'File size cannot exceed 5MB' });\n          }\n          if (err.code === 'LIMIT_FILE_COUNT') {\n            return res.status(400).json({ message: 'Cannot upload more than 5 files' });\n          }\n          return res.status(400).json({ message: err.message });\n        } else if (err) {\n          return res.status(400).json({ message: err.message });\n        }\n\n        const files = req.files as Express.Multer.File[];\n        if (!files || files.length === 0) {\n          return res.status(400).json({ message: 'No files uploaded' });\n        }\n\n        // Return public URLs for uploaded files\n        // TODO: Consider adding server-side file-type verification and image optimization for production\n        const imagePaths = files.map(file => {\n          const relativePath = path.relative(process.cwd(), file.path);\n          return `/${relativePath.replace(/\\\\/g, '/')}`;\n        });\n\n        res.json({ images: imagePaths });\n      });\n    } catch (error) {\n      console.error(\"Error uploading product images:\", error);\n      res.status(500).json({ message: \"Failed to upload images\" });\n    }\n  });\n\n  // Authentication routes\n  app.post('/api/auth/register', async (req, res) => {\n    try {\n      const validatedData = registerSchema.parse(req.body);\n      \n      // Check if email already exists\n      const existingUser = await storage.getUserByEmail(validatedData.email);\n      if (existingUser) {\n        return res.status(400).json({ message: \"Email already registered\" });\n      }\n\n      // Hash password\n      const passwordHash = await hashPassword(validatedData.password);\n\n      // Create user\n      const user = await storage.createUser({\n        email: validatedData.email,\n        passwordHash,\n        firstName: validatedData.firstName,\n        lastName: validatedData.lastName,\n      });\n\n      // Log user in automatically\n      req.login({ userId: user.id }, (err) => {\n        if (err) {\n          console.error(\"Error logging in after registration:\", err);\n          return res.status(500).json({ message: \"Registration successful, but login failed\" });\n        }\n        \n        // Return user without sensitive fields\n        res.status(201).json(sanitizeUser(user));\n      });\n    } catch (error: any) {\n      console.error(\"Error registering user:\", error);\n      if (error.name === 'ZodError') {\n        return res.status(400).json({ message: \"Invalid registration data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to register user\" });\n    }\n  });\n\n  app.post('/api/auth/login', async (req, res, next) => {\n    try {\n      // Validate request body first\n      const validatedData = loginSchema.parse(req.body);\n      \n      // Replace request body with validated data to prevent injection\n      req.body = validatedData;\n      \n      passport.authenticate('local', (err: any, user: any, info: any) => {\n        if (err) {\n          console.error(\"Error during login:\", err);\n          return res.status(500).json({ message: \"Login failed\" });\n        }\n        \n        if (!user) {\n          return res.status(401).json({ message: info?.message || \"Invalid credentials\" });\n        }\n\n        req.login(user, async (loginErr) => {\n          if (loginErr) {\n            console.error(\"Error establishing session:\", loginErr);\n            return res.status(500).json({ message: \"Login failed\" });\n          }\n\n          // Fetch full user data\n          const fullUser = await storage.getUser(user.userId);\n          if (!fullUser) {\n            return res.status(404).json({ message: \"User not found\" });\n          }\n\n          // Return user without sensitive fields\n          res.json(sanitizeUser(fullUser));\n        });\n      })(req, res, next);\n    } catch (error: any) {\n      console.error(\"Error in login route:\", error);\n      if (error.name === 'ZodError') {\n        return res.status(400).json({ message: \"Invalid login data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Login failed\" });\n    }\n  });\n\n  app.post('/api/auth/logout', (req, res) => {\n    req.logout((err) => {\n      if (err) {\n        console.error(\"Error during logout:\", err);\n        return res.status(500).json({ message: \"Logout failed\" });\n      }\n      res.json({ message: \"Logged out successfully\" });\n    });\n  });\n\n  app.get('/api/auth/user', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.userId;\n      const user = await storage.getUser(userId);\n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n      \n      // Return user without sensitive fields\n      res.json(sanitizeUser(user));\n    } catch (error) {\n      console.error(\"Error fetching user:\", error);\n      res.status(500).json({ message: \"Failed to fetch user\" });\n    }\n  });\n\n  app.post('/api/auth/register-vendor', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.userId;\n      const user = await storage.getUser(userId);\n      \n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n\n      if (user.role === \"vendor\") {\n        return res.status(400).json({ message: \"User is already a vendor\" });\n      }\n\n      const { name, description, district, giBrands } = req.body;\n\n      if (!name || !district || !giBrands || !Array.isArray(giBrands) || giBrands.length === 0) {\n        return res.status(400).json({ message: \"Store name, district, and at least one GI brand are required\" });\n      }\n\n      await storage.updateUserRole(userId, \"vendor\");\n      \n      const validatedStoreData = insertStoreSchema.parse({\n        vendorId: userId,\n        name,\n        description: description || \"\",\n        district,\n        giBrands,\n        status: \"pending\",\n      });\n\n      const store = await storage.createStore(validatedStoreData);\n      const updatedUser = await storage.getUser(userId);\n\n      // Return user without sensitive fields\n      res.status(201).json({ user: sanitizeUser(updatedUser!), store });\n    } catch (error: any) {\n      console.error(\"Error registering vendor:\", error);\n      if (error.name === 'ZodError') {\n        return res.status(400).json({ message: \"Invalid store data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to register as vendor\" });\n    }\n  });\n\n  // Product browsing routes\n  app.get('/api/products', async (req: any, res) => {\n    try {\n      const { district, giBrand, minPrice, maxPrice, search, status, page, pageSize } = req.query;\n      \n      const filters: any = {};\n      \n      // Status filtering with strict role-based access control\n      const userId = req.userId;\n      let userRole: string | null = null;\n      \n      if (userId) {\n        const user = await storage.getUser(userId);\n        userRole = user?.role || null;\n      }\n      \n      // Whitelist of valid status values\n      const validStatuses = ['pending', 'approved', 'rejected', 'all'];\n      \n      // Only admins can request non-approved products or 'all' products\n      // Vendors should use /api/vendor/products to see their own products with any status\n      // Regular users and unauthenticated users can only see approved products\n      if (userRole === 'admin' && status && validStatuses.includes(status as string)) {\n        // Admins can filter by specific status or request 'all'\n        if (status !== 'all') {\n          filters.status = status as string;\n        }\n        // If status is 'all', don't add status filter (show everything)\n      } else {\n        // Everyone else (buyers, vendors via this endpoint, unauthenticated) only sees approved\n        filters.status = 'approved';\n      }\n      \n      if (district) filters.district = district as string;\n      if (giBrand) filters.giBrand = giBrand as string;\n      if (minPrice) filters.minPrice = Number(minPrice);\n      if (maxPrice) filters.maxPrice = Number(maxPrice);\n      if (search) filters.search = search as string;\n      if (page) filters.page = Number(page);\n      if (pageSize) filters.pageSize = Number(pageSize);\n\n      const { products, total } = await storage.getAllProducts(filters);\n      \n      // Serialize product prices to strings for API response\n      const serializedProducts = products.map(serializeProduct);\n      \n      if (filters.page && filters.pageSize) {\n        const totalPages = Math.ceil(total / filters.pageSize);\n        res.json({\n          products: serializedProducts,\n          pagination: {\n            page: filters.page,\n            pageSize: filters.pageSize,\n            total,\n            totalPages\n          }\n        });\n      } else {\n        res.json({ products: serializedProducts, pagination: { total } });\n      }\n    } catch (error) {\n      console.error(\"Error fetching products:\", error);\n      res.status(500).json({ message: \"Failed to fetch products\" });\n    }\n  });\n\n  app.get('/api/products/:id', async (req, res) => {\n    try {\n      const product = await storage.getProduct(req.params.id);\n      if (!product) {\n        return res.status(404).json({ message: \"Product not found\" });\n      }\n      res.json(serializeProduct(product));\n    } catch (error) {\n      console.error(\"Error fetching product:\", error);\n      res.status(500).json({ message: \"Failed to fetch product\" });\n    }\n  });\n\n  // Store routes\n  app.get('/api/stores', async (req, res) => {\n    try {\n      const { status } = req.query;\n      const stores = await storage.getAllStores(status as string);\n      res.json(stores);\n    } catch (error) {\n      console.error(\"Error fetching stores:\", error);\n      res.status(500).json({ message: \"Failed to fetch stores\" });\n    }\n  });\n\n  app.get('/api/stores/:id', async (req, res) => {\n    try {\n      const store = await storage.getStore(req.params.id);\n      if (!store) {\n        return res.status(404).json({ message: \"Store not found\" });\n      }\n      res.json(store);\n    } catch (error) {\n      console.error(\"Error fetching store:\", error);\n      res.status(500).json({ message: \"Failed to fetch store\" });\n    }\n  });\n\n  // Category routes\n  app.get('/api/categories', async (req, res) => {\n    try {\n      const categories = await storage.getAllCategories();\n      res.json(categories);\n    } catch (error) {\n      console.error(\"Error fetching categories:\", error);\n      res.status(500).json({ message: \"Failed to fetch categories\" });\n    }\n  });\n\n  // Vendor Store Management Routes\n  app.post('/api/stores', isAuthenticated, isVendor, async (req: any, res) => {\n    try {\n      const validatedData = insertStoreSchema.parse({\n        ...req.body,\n        vendorId: req.userId,\n      });\n      const store = await storage.createStore(validatedData);\n      res.status(201).json(store);\n    } catch (error: any) {\n      console.error(\"Error creating store:\", error);\n      if (error.name === 'ZodError') {\n        return res.status(400).json({ message: \"Invalid store data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create store\" });\n    }\n  });\n\n  app.put('/api/stores/:id', isAuthenticated, isVendor, async (req: any, res) => {\n    try {\n      const storeId = req.params.id;\n      const existingStore = await storage.getStore(storeId);\n      \n      if (!existingStore) {\n        return res.status(404).json({ message: \"Store not found\" });\n      }\n      \n      if (existingStore.vendorId !== req.userId && req.userRole !== \"admin\") {\n        return res.status(403).json({ message: \"Not authorized to update this store\" });\n      }\n\n      const { vendorId, ...sanitizedUpdates } = insertStoreSchema.partial().parse(req.body);\n      const updatedStore = await storage.updateStore(storeId, sanitizedUpdates);\n      res.json(updatedStore);\n    } catch (error: any) {\n      console.error(\"Error updating store:\", error);\n      if (error.name === 'ZodError') {\n        return res.status(400).json({ message: \"Invalid store data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to update store\" });\n    }\n  });\n\n  app.get('/api/vendor/stores', isAuthenticated, isVendor, async (req: any, res) => {\n    try {\n      const stores = await storage.getStoresByVendor(req.userId);\n      res.json(stores);\n    } catch (error) {\n      console.error(\"Error fetching vendor stores:\", error);\n      res.status(500).json({ message: \"Failed to fetch stores\" });\n    }\n  });\n\n  // Vendor Product Management Routes\n  app.post('/api/products', isAuthenticated, isVendor, async (req: any, res) => {\n    try {\n      const { storeId, ...productData } = req.body;\n      const store = await storage.getStore(storeId);\n      \n      if (!store) {\n        return res.status(404).json({ message: \"Store not found\" });\n      }\n      \n      if (store.vendorId !== req.userId && req.userRole !== \"admin\") {\n        return res.status(403).json({ message: \"Not authorized to add products to this store\" });\n      }\n\n      const validatedData = insertProductSchema.parse({ storeId, ...productData });\n      const product = await storage.createProduct(validatedData);\n      res.status(201).json(serializeProduct(product));\n    } catch (error: any) {\n      console.error(\"Error creating product:\", error);\n      if (error.name === 'ZodError') {\n        return res.status(400).json({ message: \"Invalid product data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create product\" });\n    }\n  });\n\n  app.put('/api/products/:id', isAuthenticated, isVendor, async (req: any, res) => {\n    try {\n      const productId = req.params.id;\n      const existingProduct = await storage.getProduct(productId);\n      \n      if (!existingProduct) {\n        return res.status(404).json({ message: \"Product not found\" });\n      }\n\n      const store = await storage.getStore(existingProduct.storeId);\n      if (!store || (store.vendorId !== req.userId && req.userRole !== \"admin\")) {\n        return res.status(403).json({ message: \"Not authorized to update this product\" });\n      }\n\n      const { storeId, ...sanitizedUpdates } = insertProductSchema.partial().parse(req.body);\n      const updatedProduct = await storage.updateProduct(productId, sanitizedUpdates);\n      if (!updatedProduct) {\n        return res.status(404).json({ message: \"Product not found after update\" });\n      }\n      res.json(serializeProduct(updatedProduct));\n    } catch (error: any) {\n      console.error(\"Error updating product:\", error);\n      if (error.name === 'ZodError') {\n        return res.status(400).json({ message: \"Invalid product data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to update product\" });\n    }\n  });\n\n  app.delete('/api/products/:id', isAuthenticated, isVendor, async (req: any, res) => {\n    try {\n      const productId = req.params.id;\n      const existingProduct = await storage.getProduct(productId);\n      \n      if (!existingProduct) {\n        return res.status(404).json({ message: \"Product not found\" });\n      }\n\n      const store = await storage.getStore(existingProduct.storeId);\n      if (!store || (store.vendorId !== req.userId && req.userRole !== \"admin\")) {\n        return res.status(403).json({ message: \"Not authorized to delete this product\" });\n      }\n\n      await storage.deleteProduct(productId);\n      res.status(204).send();\n    } catch (error) {\n      console.error(\"Error deleting product:\", error);\n      res.status(500).json({ message: \"Failed to delete product\" });\n    }\n  });\n\n  app.get('/api/vendor/products', isAuthenticated, isVendor, async (req: any, res) => {\n    try {\n      const stores = await storage.getStoresByVendor(req.userId);\n      const allProducts = await Promise.all(\n        stores.map(store => storage.getProductsByStore(store.id))\n      );\n      const products = allProducts.flat();\n      res.json(products.map(serializeProduct));\n    } catch (error) {\n      console.error(\"Error fetching vendor products:\", error);\n      res.status(500).json({ message: \"Failed to fetch products\" });\n    }\n  });\n\n  // Order Management Routes\n  app.post('/api/orders', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { items, ...orderData } = req.body;\n      \n      if (!items || !Array.isArray(items) || items.length === 0) {\n        return res.status(400).json({ message: \"Order must contain at least one item\" });\n      }\n\n      const validatedOrder = insertOrderSchema.parse({\n        ...orderData,\n        buyerId: userId,\n      });\n\n      const order = await storage.createOrder(validatedOrder);\n\n      const orderItemsPromises = items.map((item: any) => {\n        const validatedItem = insertOrderItemSchema.parse({\n          ...item,\n          orderId: order.id,\n        });\n        return storage.createOrderItem(validatedItem);\n      });\n\n      await Promise.all(orderItemsPromises);\n      res.status(201).json(order);\n    } catch (error: any) {\n      console.error(\"Error creating order:\", error);\n      if (error.name === 'ZodError') {\n        return res.status(400).json({ message: \"Invalid order data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create order\" });\n    }\n  });\n\n  app.get('/api/orders/:id', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const order = await storage.getOrder(req.params.id);\n      \n      if (!order) {\n        return res.status(404).json({ message: \"Order not found\" });\n      }\n\n      const user = await storage.getUser(userId);\n      if (order.buyerId !== userId && user?.role !== \"admin\") {\n        const orderItems = await storage.getOrderItems(order.id);\n        const vendorStores = await storage.getStoresByVendor(userId);\n        const vendorStoreIds = vendorStores.map(s => s.id);\n        const hasVendorItem = orderItems.some(item => vendorStoreIds.includes(item.storeId));\n        \n        if (!hasVendorItem) {\n          return res.status(403).json({ message: \"Not authorized to view this order\" });\n        }\n      }\n\n      const items = await storage.getOrderItems(order.id);\n      res.json({ ...order, items });\n    } catch (error) {\n      console.error(\"Error fetching order:\", error);\n      res.status(500).json({ message: \"Failed to fetch order\" });\n    }\n  });\n\n  app.get('/api/buyer/orders', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const orders = await storage.getOrdersByBuyer(userId);\n      res.json(orders);\n    } catch (error) {\n      console.error(\"Error fetching buyer orders:\", error);\n      res.status(500).json({ message: \"Failed to fetch orders\" });\n    }\n  });\n\n  app.put('/api/orders/:id/status', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { status } = req.body;\n      \n      if (!status) {\n        return res.status(400).json({ message: \"Status is required\" });\n      }\n\n      const order = await storage.getOrder(req.params.id);\n      if (!order) {\n        return res.status(404).json({ message: \"Order not found\" });\n      }\n\n      const user = await storage.getUser(userId);\n      if (user?.role !== \"admin\") {\n        const orderItems = await storage.getOrderItems(order.id);\n        const vendorStores = await storage.getStoresByVendor(userId);\n        const vendorStoreIds = vendorStores.map(s => s.id);\n        const hasVendorItem = orderItems.some(item => vendorStoreIds.includes(item.storeId));\n        \n        if (!hasVendorItem) {\n          return res.status(403).json({ message: \"Not authorized to update this order\" });\n        }\n      }\n\n      const updatedOrder = await storage.updateOrderStatus(req.params.id, status);\n      res.json(updatedOrder);\n    } catch (error) {\n      console.error(\"Error updating order status:\", error);\n      res.status(500).json({ message: \"Failed to update order status\" });\n    }\n  });\n\n  // Vendor Dashboard Routes\n  app.get('/api/vendor/orders', isAuthenticated, isVendor, async (req: any, res) => {\n    try {\n      const stores = await storage.getStoresByVendor(req.userId);\n      const allOrders = await Promise.all(\n        stores.map(store => storage.getOrdersByStore(store.id))\n      );\n      const uniqueOrders = Array.from(\n        new Map(allOrders.flat().map(order => [order.id, order])).values()\n      );\n\n      // Batch fetch all order items with products in a single query\n      const orderIds = uniqueOrders.map(o => o.id).filter(Boolean);\n      const itemsByOrderId = await storage.getOrderItemsWithProductsForOrders(orderIds);\n\n      // Attach items to their respective orders and serialize decimal fields\n      const ordersWithItems = uniqueOrders.map(order => ({\n        ...order,\n        total: String(order.total), // Serialize order total as string to match frontend contract\n        items: (itemsByOrderId[order.id] || []).map(item => ({\n          ...item,\n          product: item.product ? serializeProduct(item.product) : null,\n        })),\n      }));\n\n      res.json(ordersWithItems);\n    } catch (error) {\n      console.error(\"Error fetching vendor orders:\", error);\n      res.status(500).json({ message: \"Failed to fetch orders\" });\n    }\n  });\n\n  app.get('/api/vendor/analytics', isAuthenticated, isVendor, async (req: any, res) => {\n    try {\n      const stores = await storage.getStoresByVendor(req.userId);\n      const storeIds = stores.map(s => s.id);\n      \n      const allTransactions = await Promise.all(\n        storeIds.map(id => storage.getTransactionsByStore(id))\n      );\n      const transactions = allTransactions.flat();\n\n      const totalRevenue = transactions.reduce((sum, t) => sum + Number(t.amount), 0);\n      const totalEarnings = transactions.reduce((sum, t) => sum + Number(t.vendorEarnings), 0);\n      const totalOrders = new Set(transactions.map(t => t.orderId)).size;\n\n      const products = await Promise.all(\n        storeIds.map(id => storage.getProductsByStore(id))\n      );\n      const totalProducts = products.flat().length;\n\n      res.json({\n        totalRevenue: totalRevenue.toFixed(2), // Serialize as string with 2 decimal places\n        totalEarnings: totalEarnings.toFixed(2), // Serialize as string with 2 decimal places\n        totalOrders,\n        totalProducts,\n        totalStores: stores.length,\n      });\n    } catch (error) {\n      console.error(\"Error fetching vendor analytics:\", error);\n      res.status(500).json({ message: \"Failed to fetch analytics\" });\n    }\n  });\n\n  app.get('/api/vendor/earnings', isAuthenticated, isVendor, async (req: any, res) => {\n    try {\n      const stores = await storage.getStoresByVendor(req.userId);\n      const storeIds = stores.map(s => s.id);\n      \n      const allTransactions = await Promise.all(\n        storeIds.map(id => storage.getTransactionsByStore(id))\n      );\n      const transactions = allTransactions.flat();\n\n      res.json(transactions);\n    } catch (error) {\n      console.error(\"Error fetching vendor earnings:\", error);\n      res.status(500).json({ message: \"Failed to fetch earnings\" });\n    }\n  });\n\n  // Admin Routes\n  app.get('/api/admin/stores', isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const { status } = req.query;\n      const stores = await storage.getAllStores(status as string);\n      res.json(stores);\n    } catch (error) {\n      console.error(\"Error fetching stores:\", error);\n      res.status(500).json({ message: \"Failed to fetch stores\" });\n    }\n  });\n\n  app.put('/api/admin/stores/:id/status', isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const { status } = req.body;\n      if (!status) {\n        return res.status(400).json({ message: \"Status is required\" });\n      }\n\n      const updatedStore = await storage.updateStoreStatus(req.params.id, status);\n      if (!updatedStore) {\n        return res.status(404).json({ message: \"Store not found\" });\n      }\n      res.json(updatedStore);\n    } catch (error) {\n      console.error(\"Error updating store status:\", error);\n      res.status(500).json({ message: \"Failed to update store status\" });\n    }\n  });\n\n  app.get('/api/admin/products', isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const { status } = req.query;\n      const productsResult = await storage.getAllProducts(status ? { status: status as string } : {});\n      // Serialize product prices to strings for API response\n      const serializedResult = {\n        ...productsResult,\n        products: productsResult.products.map(serializeProduct)\n      };\n      res.json(serializedResult);\n    } catch (error) {\n      console.error(\"Error fetching products:\", error);\n      res.status(500).json({ message: \"Failed to fetch products\" });\n    }\n  });\n\n  app.put('/api/admin/products/:id/status', isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const { status } = req.body;\n      if (!status) {\n        return res.status(400).json({ message: \"Status is required\" });\n      }\n\n      const updatedProduct = await storage.updateProductStatus(req.params.id, status);\n      if (!updatedProduct) {\n        return res.status(404).json({ message: \"Product not found\" });\n      }\n      res.json(updatedProduct);\n    } catch (error) {\n      console.error(\"Error updating product status:\", error);\n      res.status(500).json({ message: \"Failed to update product status\" });\n    }\n  });\n\n  app.get('/api/admin/orders', isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const orders = await storage.getAllOrders();\n      res.json(orders);\n    } catch (error) {\n      console.error(\"Error fetching orders:\", error);\n      res.status(500).json({ message: \"Failed to fetch orders\" });\n    }\n  });\n\n  app.get('/api/admin/analytics', isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const [stores, productsResult, orders, users] = await Promise.all([\n        storage.getAllStores(),\n        storage.getAllProducts({}),\n        storage.getAllOrders(),\n        storage.getAllUsers(),\n      ]);\n\n      const totalRevenue = orders.reduce((sum: number, order: any) => sum + Number(order.total), 0);\n      \n      const storesByDistrict: { [key: string]: number } = {};\n      stores.forEach((store: any) => {\n        if (store.district) {\n          storesByDistrict[store.district] = (storesByDistrict[store.district] || 0) + 1;\n        }\n      });\n\n      const giBrandCounts: { [key: string]: number } = {};\n      productsResult.products.forEach((product: any) => {\n        if (product.giBrand) {\n          giBrandCounts[product.giBrand] = (giBrandCounts[product.giBrand] || 0) + 1;\n        }\n      });\n      const topGIBrands = Object.entries(giBrandCounts)\n        .map(([brand, count]) => ({ brand, count }))\n        .sort((a, b) => b.count - a.count);\n\n      res.json({\n        totalUsers: users.length,\n        totalStores: stores.length,\n        totalProducts: productsResult.total,\n        totalOrders: orders.length,\n        totalRevenue,\n        pendingStores: stores.filter((s: any) => s.status === 'pending').length,\n        pendingProducts: productsResult.products.filter((p: any) => p.status === 'pending').length,\n        storesByDistrict,\n        topGIBrands,\n      });\n    } catch (error) {\n      console.error(\"Error fetching admin analytics:\", error);\n      res.status(500).json({ message: \"Failed to fetch analytics\" });\n    }\n  });\n\n  app.get('/api/users', isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const users = await storage.getAllUsers();\n      const sanitizedUsers = users.map(sanitizeUser);\n      res.json(sanitizedUsers);\n    } catch (error) {\n      console.error(\"Error fetching users:\", error);\n      res.status(500).json({ message: \"Failed to fetch users\" });\n    }\n  });\n\n  app.put('/api/admin/users/:id/role', isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const { role } = req.body;\n      if (!role || !['buyer', 'vendor', 'admin'].includes(role)) {\n        return res.status(400).json({ message: \"Invalid role\" });\n      }\n\n      const updatedUser = await storage.updateUserRole(req.params.id, role);\n      if (!updatedUser) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n      res.json(sanitizeUser(updatedUser));\n    } catch (error) {\n      console.error(\"Error updating user role:\", error);\n      res.status(500).json({ message: \"Failed to update user role\" });\n    }\n  });\n\n  // Messaging Routes\n  app.post('/api/messages', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const validatedData = insertMessageSchema.parse({\n        ...req.body,\n        senderId: userId,\n      });\n      const message = await storage.createMessage(validatedData);\n      res.status(201).json(message);\n    } catch (error: any) {\n      console.error(\"Error creating message:\", error);\n      if (error.name === 'ZodError') {\n        return res.status(400).json({ message: \"Invalid message data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create message\" });\n    }\n  });\n\n  app.get('/api/messages/conversation/:userId', isAuthenticated, async (req: any, res) => {\n    try {\n      const currentUserId = req.user.claims.sub;\n      const otherUserId = req.params.userId;\n      const messages = await storage.getMessagesBetweenUsers(currentUserId, otherUserId);\n      res.json(messages);\n    } catch (error) {\n      console.error(\"Error fetching conversation:\", error);\n      res.status(500).json({ message: \"Failed to fetch conversation\" });\n    }\n  });\n\n  app.get('/api/messages', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const messages = await storage.getMessagesForUser(userId);\n      res.json(messages);\n    } catch (error) {\n      console.error(\"Error fetching messages:\", error);\n      res.status(500).json({ message: \"Failed to fetch messages\" });\n    }\n  });\n\n  // Payout Routes\n  app.post('/api/payouts', isAuthenticated, isVendor, async (req: any, res) => {\n    try {\n      const validatedData = insertPayoutSchema.parse({\n        ...req.body,\n        vendorId: req.userId,\n      });\n      const payout = await storage.createPayout(validatedData);\n      res.status(201).json(payout);\n    } catch (error: any) {\n      console.error(\"Error creating payout:\", error);\n      if (error.name === 'ZodError') {\n        return res.status(400).json({ message: \"Invalid payout data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create payout\" });\n    }\n  });\n\n  app.get('/api/vendor/payouts', isAuthenticated, isVendor, async (req: any, res) => {\n    try {\n      const payouts = await storage.getPayoutsByVendor(req.userId);\n      res.json(payouts);\n    } catch (error) {\n      console.error(\"Error fetching payouts:\", error);\n      res.status(500).json({ message: \"Failed to fetch payouts\" });\n    }\n  });\n\n  // Secure seed endpoint for production database initialization\n  app.post('/api/admin/seed', async (req, res) => {\n    try {\n      // Verify secret token\n      const authHeader = req.headers.authorization;\n      const token = authHeader?.startsWith('Bearer ') ? authHeader.substring(7) : null;\n      \n      if (!token || token !== process.env.SEED_SECRET) {\n        return res.status(401).json({ message: \"Unauthorized - Invalid seed token\" });\n      }\n\n      // Import and run seed function\n      const { seed } = await import('./seed.js');\n      await seed();\n      \n      res.json({ \n        success: true, \n        message: \"Database seeded successfully\" \n      });\n    } catch (error: any) {\n      console.error(\"Error seeding database:\", error);\n      res.status(500).json({ \n        success: false,\n        message: \"Failed to seed database\",\n        error: error.message \n      });\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}\n","size_bytes":37050},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n\n  /* Automatic computation of border around primary / danger buttons */\n  --opaque-button-border-intensity: -8; /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n\n  --background: 0 0% 98%;\n\n  --foreground: 0 0% 12%;\n\n  --border: 0 0% 88%;\n\n  --card: 0 0% 96%;\n\n  --card-foreground: 0 0% 12%;\n\n  --card-border: 0 0% 90%;\n\n  --sidebar: 0 0% 94%;\n\n  --sidebar-foreground: 0 0% 12%;\n\n  --sidebar-border: 0 0% 86%;\n\n  --sidebar-primary: 28 85% 48%;\n\n  --sidebar-primary-foreground: 28 85% 98%;\n\n  --sidebar-accent: 28 12% 88%;\n\n  --sidebar-accent-foreground: 28 12% 25%;\n\n  --sidebar-ring: 28 85% 48%;\n\n  --popover: 0 0% 92%;\n\n  --popover-foreground: 0 0% 12%;\n\n  --popover-border: 0 0% 84%;\n\n  --primary: 28 85% 48%;\n\n  --primary-foreground: 28 85% 98%;\n\n  --secondary: 0 0% 86%;\n\n  --secondary-foreground: 0 0% 12%;\n\n  --muted: 28 8% 90%;\n\n  --muted-foreground: 28 8% 35%;\n\n  --accent: 28 15% 88%;\n\n  --accent-foreground: 28 15% 20%;\n\n  --destructive: 0 72% 42%;\n\n  --destructive-foreground: 0 72% 98%;\n\n  --input: 0 0% 75%;\n  --ring: 28 85% 48%;\n  --chart-1: 200 75% 38%;\n  --chart-2: 165 65% 35%;\n  --chart-3: 28 85% 45%;\n  --chart-4: 280 60% 42%;\n  --chart-5: 340 70% 45%;\n\n  --font-sans: Inter, Poppins, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: Menlo, monospace;\n  --radius: .5rem; /* 8px */\n  --shadow-2xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 2px 4px -1px hsl(0 0% 0% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 4px 6px -1px hsl(0 0% 0% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 8px 10px -1px hsl(0 0% 0% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n  /* Automatically computed borders - intensity can be controlled by the user by the --opaque-button-border-intensity setting */\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n\n  --opaque-button-border-intensity: 9;  /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n\n  --background: 0 0% 8%;\n\n  --foreground: 0 0% 95%;\n\n  --border: 0 0% 18%;\n\n  --card: 0 0% 10%;\n\n  --card-foreground: 0 0% 95%;\n\n  --card-border: 0 0% 16%;\n\n  --sidebar: 0 0% 12%;\n\n  --sidebar-foreground: 0 0% 95%;\n\n  --sidebar-border: 0 0% 20%;\n\n  --sidebar-primary: 28 85% 48%;\n\n  --sidebar-primary-foreground: 28 85% 98%;\n\n  --sidebar-accent: 28 12% 18%;\n\n  --sidebar-accent-foreground: 28 12% 90%;\n\n  --sidebar-ring: 28 85% 48%;\n\n  --popover: 0 0% 14%;\n\n  --popover-foreground: 0 0% 95%;\n\n  --popover-border: 0 0% 22%;\n\n  --primary: 28 85% 48%;\n\n  --primary-foreground: 28 85% 98%;\n\n  --secondary: 0 0% 20%;\n\n  --secondary-foreground: 0 0% 95%;\n\n  --muted: 28 8% 16%;\n\n  --muted-foreground: 28 8% 75%;\n\n  --accent: 28 15% 18%;\n\n  --accent-foreground: 28 15% 88%;\n\n  --destructive: 0 72% 42%;\n\n  --destructive-foreground: 0 72% 98%;\n\n  --input: 0 0% 32%;\n  --ring: 28 85% 48%;\n  --chart-1: 200 80% 65%;\n  --chart-2: 165 70% 60%;\n  --chart-3: 28 90% 68%;\n  --chart-4: 280 65% 70%;\n  --chart-5: 340 75% 65%;\n\n  --shadow-2xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 2px 4px -1px hsl(0 0% 0% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 4px 6px -1px hsl(0 0% 0% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 8px 10px -1px hsl(0 0% 0% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n}","size_bytes":11049},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/components/examples/VendorCard.tsx":{"content":"import VendorCard from '../VendorCard';\nimport vendorAvatar from '@assets/generated_images/Artisan_vendor_profile_portrait_cf010960.png';\n\nexport default function VendorCardExample() {\n  return (\n    <div className=\"max-w-md\">\n      <VendorCard\n        id=\"1\"\n        name=\"Ahmad Pottery Works\"\n        district=\"Multan\"\n        giBrands={[\"Multani Crafts\"]}\n        rating={4.8}\n        totalProducts={42}\n        avatar={vendorAvatar}\n      />\n    </div>\n  );\n}\n","size_bytes":464},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/Footer.tsx":{"content":"import { Separator } from \"@/components/ui/separator\";\n\nexport default function Footer() {\n  return (\n    <footer className=\"bg-card border-t mt-16\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-8\">\n          <div>\n            <h3 className=\"text-lg font-bold text-primary mb-4\" data-testid=\"text-footer-logo\">\n              Sanatzar\n            </h3>\n            <p className=\"text-sm text-muted-foreground\">\n              Connecting Punjab's traditional artisans with the world through authentic GI-branded handicrafts.\n            </p>\n          </div>\n          \n          <div>\n            <h4 className=\"font-semibold mb-4\">Shop by District</h4>\n            <ul className=\"space-y-2 text-sm text-muted-foreground\">\n              <li><a href=\"#\" className=\"hover:text-foreground transition-colors\">Lahore</a></li>\n              <li><a href=\"#\" className=\"hover:text-foreground transition-colors\">Multan</a></li>\n              <li><a href=\"#\" className=\"hover:text-foreground transition-colors\">Bahawalpur</a></li>\n              <li><a href=\"#\" className=\"hover:text-foreground transition-colors\">Faisalabad</a></li>\n            </ul>\n          </div>\n          \n          <div>\n            <h4 className=\"font-semibold mb-4\">For Vendors</h4>\n            <ul className=\"space-y-2 text-sm text-muted-foreground\">\n              <li><a href=\"#\" className=\"hover:text-foreground transition-colors\">Create Store</a></li>\n              <li><a href=\"#\" className=\"hover:text-foreground transition-colors\">Pricing</a></li>\n              <li><a href=\"#\" className=\"hover:text-foreground transition-colors\">Seller Guide</a></li>\n              <li><a href=\"#\" className=\"hover:text-foreground transition-colors\">GI Verification</a></li>\n            </ul>\n          </div>\n          \n          <div>\n            <h4 className=\"font-semibold mb-4\">Support</h4>\n            <ul className=\"space-y-2 text-sm text-muted-foreground\">\n              <li><a href=\"#\" className=\"hover:text-foreground transition-colors\">Help Center</a></li>\n              <li><a href=\"#\" className=\"hover:text-foreground transition-colors\">Shipping Info</a></li>\n              <li><a href=\"#\" className=\"hover:text-foreground transition-colors\">Returns</a></li>\n              <li><a href=\"#\" className=\"hover:text-foreground transition-colors\">Contact Us</a></li>\n            </ul>\n          </div>\n        </div>\n        \n        <Separator className=\"my-8\" />\n        \n        <div className=\"flex flex-col md:flex-row justify-between items-center gap-4 text-sm text-muted-foreground\">\n          <p> 2025 Sanatzar. All rights reserved.</p>\n          <div className=\"flex gap-6\">\n            <a href=\"#\" className=\"hover:text-foreground transition-colors\">Privacy Policy</a>\n            <a href=\"#\" className=\"hover:text-foreground transition-colors\">Terms of Service</a>\n          </div>\n        </div>\n      </div>\n    </footer>\n  );\n}\n","size_bytes":2991},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/examples/ProductCard.tsx":{"content":"import ProductCard from '../ProductCard';\nimport khussaImage from '@assets/generated_images/Handmade_khussa_footwear_product_06baa0d0.png';\n\nexport default function ProductCardExample() {\n  return (\n    <div className=\"max-w-sm\">\n      <ProductCard\n        id=\"1\"\n        title=\"Handcrafted Multani Blue Pottery Vase\"\n        price={3500}\n        image={khussaImage}\n        district=\"Multan\"\n        giBrand=\"Multani Crafts\"\n        vendorName=\"Ahmad Pottery Works\"\n      />\n    </div>\n  );\n}\n","size_bytes":494},"server/storage.ts":{"content":"import {\n  users,\n  stores,\n  products,\n  orders,\n  orderItems,\n  categories,\n  messages,\n  subscriptions,\n  transactions,\n  payouts,\n  type User,\n  type UpsertUser,\n  type InsertStore,\n  type Store,\n  type InsertProduct,\n  type Product,\n  type InsertOrder,\n  type Order,\n  type InsertOrderItem,\n  type OrderItem,\n  type InsertCategory,\n  type Category,\n  type InsertMessage,\n  type Message,\n  type InsertSubscription,\n  type Subscription,\n  type InsertTransaction,\n  type Transaction,\n  type InsertPayout,\n  type Payout,\n} from \"@shared/schema\";\nimport { db } from \"./db\";\nimport { eq, and, or, like, gte, lte, desc, asc, count, inArray } from \"drizzle-orm\";\n\n// Utility function to normalize image paths to start with /\nfunction normalizeImagePath(path: string): string {\n  if (!path) return path;\n  return path.startsWith('/') ? path : `/${path}`;\n}\n\n// Utility function to normalize product image arrays\nfunction normalizeProductImages(product: Product): Product {\n  return {\n    ...product,\n    images: product.images ? product.images.map(normalizeImagePath) : []\n  };\n}\n\nexport interface IStorage {\n  // User operations\n  getUser(id: string): Promise<User | undefined>;\n  getUserByEmail(email: string): Promise<User | undefined>;\n  getAllUsers(): Promise<User[]>;\n  createUser(userData: { email: string; passwordHash: string; firstName: string; lastName: string }): Promise<User>;\n  upsertUser(user: UpsertUser): Promise<User>;\n  updateUserRole(id: string, role: string): Promise<User | undefined>;\n  updatePassword(userId: string, passwordHash: string): Promise<User | undefined>;\n  updateVerificationToken(userId: string, token: string | null): Promise<User | undefined>;\n  updatePasswordResetToken(userId: string, token: string | null, expires: Date | null): Promise<User | undefined>;\n\n  // Store operations\n  createStore(store: InsertStore): Promise<Store>;\n  getStore(id: string): Promise<Store | undefined>;\n  getStoresByVendor(vendorId: string): Promise<Store[]>;\n  getAllStores(status?: string): Promise<Store[]>;\n  updateStore(id: string, updates: Partial<InsertStore>): Promise<Store | undefined>;\n  updateStoreStatus(id: string, status: string): Promise<Store | undefined>;\n\n  // Product operations\n  createProduct(product: InsertProduct): Promise<Product>;\n  getProduct(id: string): Promise<Product | undefined>;\n  getProductsByStore(storeId: string): Promise<Product[]>;\n  getAllProducts(filters?: {\n    district?: string;\n    giBrand?: string;\n    minPrice?: number;\n    maxPrice?: number;\n    search?: string;\n    status?: string;\n    page?: number;\n    pageSize?: number;\n  }): Promise<{ products: Product[], total: number }>;\n  updateProduct(id: string, updates: Partial<InsertProduct>): Promise<Product | undefined>;\n  updateProductStatus(id: string, status: string): Promise<Product | undefined>;\n  deleteProduct(id: string): Promise<void>;\n\n  // Order operations\n  createOrder(order: InsertOrder): Promise<Order>;\n  getOrder(id: string): Promise<Order | undefined>;\n  getOrdersByBuyer(buyerId: string): Promise<Order[]>;\n  getOrdersByStore(storeId: string): Promise<Order[]>;\n  getAllOrders(): Promise<Order[]>;\n  updateOrderStatus(id: string, status: string): Promise<Order | undefined>;\n\n  // Order Item operations\n  createOrderItem(item: InsertOrderItem): Promise<OrderItem>;\n  getOrderItems(orderId: string): Promise<OrderItem[]>;\n  getOrderItemsWithProductsForOrders(orderIds: string[]): Promise<Record<string, Array<OrderItem & { product: Product | null }>>>;\n\n  // Category operations\n  createCategory(category: InsertCategory): Promise<Category>;\n  getAllCategories(): Promise<Category[]>;\n  getCategoryByDistrict(district: string): Promise<Category | undefined>;\n\n  // Message operations\n  createMessage(message: InsertMessage): Promise<Message>;\n  getMessagesBetweenUsers(userId1: string, userId2: string): Promise<Message[]>;\n  getMessagesForUser(userId: string): Promise<Message[]>;\n  markMessageAsRead(id: string): Promise<Message | undefined>;\n\n  // Subscription operations\n  createSubscription(subscription: InsertSubscription): Promise<Subscription>;\n  getSubscriptionByVendor(vendorId: string): Promise<Subscription | undefined>;\n  updateSubscription(id: string, updates: Partial<InsertSubscription>): Promise<Subscription | undefined>;\n\n  // Transaction operations\n  createTransaction(transaction: InsertTransaction): Promise<Transaction>;\n  getTransactionsByStore(storeId: string): Promise<Transaction[]>;\n  getTransactionsByOrder(orderId: string): Promise<Transaction[]>;\n\n  // Payout operations\n  createPayout(payout: InsertPayout): Promise<Payout>;\n  getPayoutsByVendor(vendorId: string): Promise<Payout[]>;\n  updatePayoutStatus(id: string, status: string, processedAt?: Date): Promise<Payout | undefined>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  // User operations\n  async getUser(id: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.id, id));\n    return user;\n  }\n\n  async getUserByEmail(email: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.email, email));\n    return user;\n  }\n\n  async getAllUsers(): Promise<User[]> {\n    return await db.select().from(users);\n  }\n\n  async createUser(userData: { email: string; passwordHash: string; firstName: string; lastName: string }): Promise<User> {\n    const [user] = await db\n      .insert(users)\n      .values({\n        email: userData.email,\n        passwordHash: userData.passwordHash,\n        firstName: userData.firstName,\n        lastName: userData.lastName,\n        role: \"buyer\",\n      })\n      .returning();\n    return user;\n  }\n\n  async upsertUser(userData: UpsertUser): Promise<User> {\n    const [user] = await db\n      .insert(users)\n      .values(userData)\n      .onConflictDoUpdate({\n        target: users.id,\n        set: {\n          ...userData,\n          updatedAt: new Date(),\n        },\n      })\n      .returning();\n    return user;\n  }\n\n  async updateUserRole(id: string, role: string): Promise<User | undefined> {\n    const [user] = await db\n      .update(users)\n      .set({ role, updatedAt: new Date() })\n      .where(eq(users.id, id))\n      .returning();\n    return user;\n  }\n\n  async updatePassword(userId: string, passwordHash: string): Promise<User | undefined> {\n    const [user] = await db\n      .update(users)\n      .set({ passwordHash, updatedAt: new Date() })\n      .where(eq(users.id, userId))\n      .returning();\n    return user;\n  }\n\n  async updateVerificationToken(userId: string, token: string | null): Promise<User | undefined> {\n    const [user] = await db\n      .update(users)\n      .set({ verificationToken: token, updatedAt: new Date() })\n      .where(eq(users.id, userId))\n      .returning();\n    return user;\n  }\n\n  async updatePasswordResetToken(userId: string, token: string | null, expires: Date | null): Promise<User | undefined> {\n    const [user] = await db\n      .update(users)\n      .set({ \n        passwordResetToken: token, \n        passwordResetExpires: expires,\n        updatedAt: new Date() \n      })\n      .where(eq(users.id, userId))\n      .returning();\n    return user;\n  }\n\n  // Store operations\n  async createStore(store: InsertStore): Promise<Store> {\n    const [newStore] = await db.insert(stores).values(store).returning();\n    return newStore;\n  }\n\n  async getStore(id: string): Promise<Store | undefined> {\n    const [store] = await db.select().from(stores).where(eq(stores.id, id));\n    return store;\n  }\n\n  async getStoresByVendor(vendorId: string): Promise<Store[]> {\n    return await db.select().from(stores).where(eq(stores.vendorId, vendorId));\n  }\n\n  async getAllStores(status?: string): Promise<Store[]> {\n    if (status) {\n      return await db.select().from(stores).where(eq(stores.status, status));\n    }\n    return await db.select().from(stores);\n  }\n\n  async updateStore(id: string, updates: Partial<InsertStore>): Promise<Store | undefined> {\n    const [store] = await db\n      .update(stores)\n      .set(updates)\n      .where(eq(stores.id, id))\n      .returning();\n    return store;\n  }\n\n  async updateStoreStatus(id: string, status: string): Promise<Store | undefined> {\n    const [store] = await db\n      .update(stores)\n      .set({ status })\n      .where(eq(stores.id, id))\n      .returning();\n    return store;\n  }\n\n  // Product operations\n  async createProduct(product: InsertProduct): Promise<Product> {\n    const [newProduct] = await db.insert(products).values(product).returning();\n    return normalizeProductImages(newProduct);\n  }\n\n  async getProduct(id: string): Promise<Product | undefined> {\n    const [product] = await db.select().from(products).where(eq(products.id, id));\n    return product ? normalizeProductImages(product) : undefined;\n  }\n\n  async getProductsByStore(storeId: string): Promise<Product[]> {\n    const result = await db.select().from(products).where(eq(products.storeId, storeId));\n    return result.map(normalizeProductImages);\n  }\n\n  async getAllProducts(filters?: {\n    district?: string;\n    giBrand?: string;\n    minPrice?: number;\n    maxPrice?: number;\n    search?: string;\n    status?: string;\n    page?: number;\n    pageSize?: number;\n  }): Promise<{ products: Product[], total: number }> {\n    const conditions = [];\n    if (filters?.district) {\n      conditions.push(eq(products.district, filters.district));\n    }\n    if (filters?.giBrand) {\n      conditions.push(eq(products.giBrand, filters.giBrand));\n    }\n    if (filters?.minPrice !== undefined) {\n      conditions.push(gte(products.price, filters.minPrice.toString()));\n    }\n    if (filters?.maxPrice !== undefined) {\n      conditions.push(lte(products.price, filters.maxPrice.toString()));\n    }\n    if (filters?.search) {\n      conditions.push(like(products.title, `%${filters.search}%`));\n    }\n    if (filters?.status) {\n      conditions.push(eq(products.status, filters.status));\n    }\n\n    const whereClause = conditions.length > 0 ? and(...conditions) : undefined;\n\n    const [{ value: total }] = await db\n      .select({ value: count() })\n      .from(products)\n      .where(whereClause);\n\n    const baseQuery = whereClause \n      ? db.select().from(products).where(whereClause)\n      : db.select().from(products);\n\n    if (filters?.page !== undefined && filters?.pageSize !== undefined) {\n      const offset = (filters.page - 1) * filters.pageSize;\n      const productList = await baseQuery.limit(filters.pageSize).offset(offset);\n      return { products: productList.map(normalizeProductImages), total };\n    }\n\n    const productList = await baseQuery;\n    \n    return { products: productList.map(normalizeProductImages), total };\n  }\n\n  async updateProduct(id: string, updates: Partial<InsertProduct>): Promise<Product | undefined> {\n    const [product] = await db\n      .update(products)\n      .set(updates)\n      .where(eq(products.id, id))\n      .returning();\n    return product ? normalizeProductImages(product) : undefined;\n  }\n\n  async updateProductStatus(id: string, status: string): Promise<Product | undefined> {\n    const [product] = await db\n      .update(products)\n      .set({ status })\n      .where(eq(products.id, id))\n      .returning();\n    return product ? normalizeProductImages(product) : undefined;\n  }\n\n  async deleteProduct(id: string): Promise<void> {\n    await db.delete(products).where(eq(products.id, id));\n  }\n\n  // Order operations\n  async createOrder(order: InsertOrder): Promise<Order> {\n    const [newOrder] = await db.insert(orders).values(order).returning();\n    return newOrder;\n  }\n\n  async getOrder(id: string): Promise<Order | undefined> {\n    const [order] = await db.select().from(orders).where(eq(orders.id, id));\n    return order;\n  }\n\n  async getOrdersByBuyer(buyerId: string): Promise<Order[]> {\n    return await db\n      .select()\n      .from(orders)\n      .where(eq(orders.buyerId, buyerId))\n      .orderBy(desc(orders.createdAt));\n  }\n\n  async getOrdersByStore(storeId: string): Promise<Order[]> {\n    const items = await db\n      .select()\n      .from(orderItems)\n      .where(eq(orderItems.storeId, storeId));\n    \n    const orderIdsSet = new Set<string>();\n    items.forEach(item => orderIdsSet.add(item.orderId));\n    const orderIds = Array.from(orderIdsSet);\n    if (orderIds.length === 0) return [];\n    \n    return await db\n      .select()\n      .from(orders)\n      .where(or(...orderIds.map(id => eq(orders.id, id))))\n      .orderBy(desc(orders.createdAt));\n  }\n\n  async getAllOrders(): Promise<Order[]> {\n    return await db.select().from(orders).orderBy(desc(orders.createdAt));\n  }\n\n  async updateOrderStatus(id: string, status: string): Promise<Order | undefined> {\n    const [order] = await db\n      .update(orders)\n      .set({ status })\n      .where(eq(orders.id, id))\n      .returning();\n    return order;\n  }\n\n  // Order Item operations\n  async createOrderItem(item: InsertOrderItem): Promise<OrderItem> {\n    const [newItem] = await db.insert(orderItems).values(item).returning();\n    return newItem;\n  }\n\n  async getOrderItems(orderId: string): Promise<OrderItem[]> {\n    return await db.select().from(orderItems).where(eq(orderItems.orderId, orderId));\n  }\n\n  async getOrderItemsWithProductsForOrders(orderIds: string[]): Promise<Record<string, Array<OrderItem & { product: Product | null }>>> {\n    if (orderIds.length === 0) {\n      return {};\n    }\n\n    // Single query to fetch all order items with their products using LEFT JOIN\n    const itemsWithProducts = await db\n      .select({\n        orderItem: orderItems,\n        product: products,\n      })\n      .from(orderItems)\n      .leftJoin(products, eq(orderItems.productId, products.id))\n      .where(inArray(orderItems.orderId, orderIds));\n\n    // Group items by orderId\n    const grouped: Record<string, Array<OrderItem & { product: Product | null }>> = {};\n    \n    for (const row of itemsWithProducts) {\n      const orderId = row.orderItem.orderId;\n      if (!grouped[orderId]) {\n        grouped[orderId] = [];\n      }\n      // Normalize product images first, keep price numeric (routes handle serialization)\n      const normalizedProduct = row.product ? normalizeProductImages(row.product) : null;\n      \n      grouped[orderId].push({\n        ...row.orderItem,\n        price: String(row.orderItem.price), // Serialize price as string to match API contract\n        product: normalizedProduct,\n      });\n    }\n\n    return grouped;\n  }\n\n  // Category operations\n  async createCategory(category: InsertCategory): Promise<Category> {\n    const [newCategory] = await db.insert(categories).values(category).returning();\n    return newCategory;\n  }\n\n  async getAllCategories(): Promise<Category[]> {\n    return await db.select().from(categories);\n  }\n\n  async getCategoryByDistrict(district: string): Promise<Category | undefined> {\n    const [category] = await db\n      .select()\n      .from(categories)\n      .where(eq(categories.district, district));\n    return category;\n  }\n\n  // Message operations\n  async createMessage(message: InsertMessage): Promise<Message> {\n    const [newMessage] = await db.insert(messages).values(message).returning();\n    return newMessage;\n  }\n\n  async getMessagesBetweenUsers(userId1: string, userId2: string): Promise<Message[]> {\n    return await db\n      .select()\n      .from(messages)\n      .where(\n        or(\n          and(eq(messages.senderId, userId1), eq(messages.receiverId, userId2)),\n          and(eq(messages.senderId, userId2), eq(messages.receiverId, userId1))\n        )\n      )\n      .orderBy(asc(messages.createdAt));\n  }\n\n  async getMessagesForUser(userId: string): Promise<Message[]> {\n    return await db\n      .select()\n      .from(messages)\n      .where(or(eq(messages.senderId, userId), eq(messages.receiverId, userId)))\n      .orderBy(desc(messages.createdAt));\n  }\n\n  async markMessageAsRead(id: string): Promise<Message | undefined> {\n    const [message] = await db\n      .update(messages)\n      .set({ read: true })\n      .where(eq(messages.id, id))\n      .returning();\n    return message;\n  }\n\n  // Subscription operations\n  async createSubscription(subscription: InsertSubscription): Promise<Subscription> {\n    const [newSubscription] = await db.insert(subscriptions).values(subscription).returning();\n    return newSubscription;\n  }\n\n  async getSubscriptionByVendor(vendorId: string): Promise<Subscription | undefined> {\n    const [subscription] = await db\n      .select()\n      .from(subscriptions)\n      .where(eq(subscriptions.vendorId, vendorId))\n      .orderBy(desc(subscriptions.createdAt))\n      .limit(1);\n    return subscription;\n  }\n\n  async updateSubscription(id: string, updates: Partial<InsertSubscription>): Promise<Subscription | undefined> {\n    const [subscription] = await db\n      .update(subscriptions)\n      .set(updates)\n      .where(eq(subscriptions.id, id))\n      .returning();\n    return subscription;\n  }\n\n  // Transaction operations\n  async createTransaction(transaction: InsertTransaction): Promise<Transaction> {\n    const [newTransaction] = await db.insert(transactions).values(transaction).returning();\n    return newTransaction;\n  }\n\n  async getTransactionsByStore(storeId: string): Promise<Transaction[]> {\n    return await db\n      .select()\n      .from(transactions)\n      .where(eq(transactions.storeId, storeId))\n      .orderBy(desc(transactions.createdAt));\n  }\n\n  async getTransactionsByOrder(orderId: string): Promise<Transaction[]> {\n    return await db\n      .select()\n      .from(transactions)\n      .where(eq(transactions.orderId, orderId));\n  }\n\n  // Payout operations\n  async createPayout(payout: InsertPayout): Promise<Payout> {\n    const [newPayout] = await db.insert(payouts).values(payout).returning();\n    return newPayout;\n  }\n\n  async getPayoutsByVendor(vendorId: string): Promise<Payout[]> {\n    return await db\n      .select()\n      .from(payouts)\n      .where(eq(payouts.vendorId, vendorId))\n      .orderBy(desc(payouts.requestedAt));\n  }\n\n  async updatePayoutStatus(id: string, status: string, processedAt?: Date): Promise<Payout | undefined> {\n    const [payout] = await db\n      .update(payouts)\n      .set({ status, processedAt })\n      .where(eq(payouts.id, id))\n      .returning();\n    return payout;\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","size_bytes":18215},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":2359},"replit.md":{"content":"# Punjab Handicrafts Marketplace - Sanatzar\n\n## Overview\n\nSanatzar is a district-wise handicrafts marketplace that connects Punjab's traditional artisans with customers through an authentic e-commerce platform. The application enables vendors to create stores featuring Geographical Indication (GI) branded crafts from specific districts across Punjab, Pakistan. The platform emphasizes cultural authenticity, trust through GI certification, and accessibility for artisans with varying levels of digital literacy.\n\nThe application serves three primary user roles:\n- **Buyers**: Browse and purchase authentic handicrafts filtered by district and GI brand\n- **Vendors**: Manage stores, products, orders, and receive payouts for their crafts\n- **Admins**: Approve stores, moderate products, and oversee platform operations\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n\n**Technology Stack**:\n- React 18 with TypeScript for type-safe component development\n- Vite as the build tool and development server\n- Wouter for lightweight client-side routing\n- TanStack Query (React Query) for server state management and caching\n\n**UI Framework**:\n- shadcn/ui component library built on Radix UI primitives\n- Tailwind CSS for utility-first styling with custom design tokens\n- Custom theme system supporting light/dark modes through CSS variables\n- Design inspired by Etsy's artisan marketplace aesthetics with cultural Pakistani craft motifs\n\n**Component Organization**:\n- Reusable UI components in `client/src/components/ui/`\n- Feature-specific components (DistrictCard, ProductCard, VendorCard, etc.) in `client/src/components/`\n- Example components demonstrating usage patterns in `client/src/components/examples/`\n- Page components in `client/src/pages/`\n\n**State Management Approach**:\n- Server state managed via TanStack Query with custom query client configuration\n- Authentication state handled through useAuth hook\n- Form state managed with React Hook Form and Zod validation\n- Local UI state using React hooks\n\n### Backend Architecture\n\n**Technology Stack**:\n- Node.js with Express.js for the REST API server\n- TypeScript for type safety across the entire backend\n- Session-based authentication using express-session with PostgreSQL session store\n\n**API Design Pattern**:\n- RESTful API endpoints under `/api/*` namespace\n- Route handlers in `server/routes.ts` with middleware-based authentication and authorization\n- Role-based access control with middleware guards (isVendor, isAdmin)\n- Request/response logging middleware for API monitoring\n\n**Authentication System**:\n- Standard username/password authentication using passport-local strategy\n- Password hashing with bcrypt (salt rounds: 12)\n- Session management with express-session and PostgreSQL session store\n- Secure cookies (httpOnly, secure in production, sameSite: lax)\n- Role-based authorization (buyer, vendor, admin) stored in user records\n- Authentication middleware (`isAuthenticated`, `isVendor`, `isAdmin`) for protected routes\n- All auth responses sanitize sensitive fields (passwordHash, verification/reset tokens)\n\n**Data Access Layer**:\n- Storage abstraction pattern in `server/storage.ts` defining IStorage interface\n- Database operations centralized through storage service\n- Type-safe data operations using shared schema definitions\n\n### Data Storage\n\n**Database Solution**:\n- PostgreSQL database via Neon serverless driver (@neondatabase/serverless)\n- Drizzle ORM for type-safe database queries and schema management\n- WebSocket connection support for serverless PostgreSQL access\n\n**Schema Design** (in `shared/schema.ts`):\n- **users**: Authentication and role management (buyer/vendor/admin)\n- **sessions**: Express session storage for Replit Auth\n- **stores**: Vendor store information with district and GI brand associations\n- **products**: Product catalog with pricing, stock, images, and GI certification\n- **categories**: Craft category taxonomy\n- **orders**: Order records with status tracking\n- **orderItems**: Line items for each order\n- **messages**: Communication system between users\n- **subscriptions**: Vendor subscription management\n- **transactions**: Financial transaction records\n- **payouts**: Vendor payout tracking\n\n**Data Validation**:\n- Zod schemas generated from Drizzle schema using drizzle-zod\n- Runtime validation on API endpoints using Zod insert schemas\n- Type safety enforced across client and server through shared schema exports\n\n### District and GI Brand System\n\n**Core Concept**:\nThe application is built around Punjab's district-based craft ecosystem, where each district has associated GI brands and specific traditional crafts. This geographic authenticity system is fundamental to the platform's value proposition.\n\n**Implementation**:\n- District and GI brand data seeded from `server/seed.ts`\n- Products and stores must be associated with valid district/GI brand combinations\n- Filtering and browsing primarily organized by district and GI brand\n- Badge and tag components (DistrictBadge, GITag) provide visual GI certification indicators\n\n### File Upload and Asset Management\n\n**Static Assets**:\n- Generated product images stored in `attached_assets/generated_images/`\n- Images referenced via Vite's asset import system with `@assets` alias\n- Product images array stored as text[] in database, supporting multiple images per product\n\n### Build and Deployment\n\n**Development Mode**:\n- Vite dev server with HMR (Hot Module Replacement)\n- Express API server with nodemon-like reloading via tsx\n- Concurrent client and server development\n\n**Production Build**:\n- Client built to `dist/public` via Vite\n- Server bundled to `dist/index.js` via esbuild with ESM format\n- Static file serving from built client assets\n- Environment variable configuration for database connection\n\n**Module System**:\n- ESM modules throughout (type: \"module\" in package.json)\n- Path aliases: @/ for client, @shared for shared code, @assets for static assets\n- Shared schema types between client and server for consistency\n\n## External Dependencies\n\n### Third-Party Services\n\n**Authentication**:\n- Replit Auth (OpenID Connect provider)\n  - Issuer URL: configurable via ISSUER_URL environment variable\n  - Client ID derived from REPL_ID\n  - User profile information (email, name, profile image) synced to local users table\n\n**Database**:\n- Neon Serverless PostgreSQL\n  - Connection string via DATABASE_URL environment variable\n  - WebSocket protocol for serverless compatibility\n  - Session storage for authentication state\n\n### Key NPM Packages\n\n**UI Components**:\n- @radix-ui/* primitives (29+ component packages) for accessible, unstyled UI primitives\n- class-variance-authority for type-safe component variant management\n- cmdk for command palette functionality\n- lucide-react for icon system\n- date-fns for date formatting\n\n**Data Management**:\n- drizzle-orm and drizzle-kit for database ORM and migrations\n- drizzle-zod for schema-to-validation bridge\n- zod for runtime type validation\n- @tanstack/react-query for server state management\n\n**Authentication & Sessions**:\n- openid-client for OIDC protocol implementation\n- passport and openid-client/passport for authentication strategy\n- express-session for session management\n- connect-pg-simple for PostgreSQL session store\n\n**Development Tools**:\n- @replit/vite-plugin-runtime-error-modal for error overlay\n- @replit/vite-plugin-cartographer for code navigation\n- @replit/vite-plugin-dev-banner for development environment indication\n\n### Environment Variables\n\nRequired configuration:\n- `DATABASE_URL`: PostgreSQL connection string (Neon serverless)\n- `SESSION_SECRET`: Secure random string for session encryption\n- `ISSUER_URL`: OIDC issuer URL (defaults to https://replit.com/oidc)\n- `REPL_ID`: Replit environment identifier used as OIDC client ID\n- `NODE_ENV`: Environment mode (development/production)","size_bytes":7932},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/examples/Footer.tsx":{"content":"import Footer from '../Footer';\n\nexport default function FooterExample() {\n  return <Footer />;\n}\n","size_bytes":98},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5741},"client/src/components/examples/Hero.tsx":{"content":"import Hero from '../Hero';\n\nexport default function HeroExample() {\n  return <Hero />;\n}\n","size_bytes":90},"client/src/components/Hero.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { ArrowRight } from \"lucide-react\";\nimport { useLocation } from \"wouter\";\nimport heroBanner from '@assets/generated_images/Hero_banner_Punjab_handicrafts_e3fb83c0.png';\n\nexport default function Hero() {\n  const [, setLocation] = useLocation();\n\n  const handleExplore = () => {\n    setLocation('/products');\n  };\n\n  const handleBecomeVendor = () => {\n    setLocation('/vendor/register');\n  };\n\n  return (\n    <div className=\"relative h-96 lg:h-[32rem] overflow-hidden\">\n      <div \n        className=\"absolute inset-0 bg-cover bg-center\"\n        style={{ backgroundImage: `url(${heroBanner})` }}\n      />\n      <div className=\"absolute inset-0 bg-gradient-to-r from-black/70 via-black/50 to-black/30\" />\n      \n      <div className=\"relative h-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center\">\n        <div className=\"max-w-2xl space-y-6\">\n          <h1 className=\"text-4xl md:text-5xl lg:text-6xl font-bold text-white\" data-testid=\"text-hero-title\">\n            Discover Punjab's\n            <br />\n            Authentic Handicrafts\n          </h1>\n          <p className=\"text-lg md:text-xl text-white/90\" data-testid=\"text-hero-subtitle\">\n            Shop district-wise GI branded crafts directly from local artisans.\n            Support traditional craftsmanship and cultural heritage.\n          </p>\n          <div className=\"flex gap-4 flex-wrap\">\n            <Button \n              size=\"lg\" \n              className=\"bg-primary hover:bg-primary text-primary-foreground backdrop-blur-sm\"\n              onClick={handleExplore}\n              data-testid=\"button-explore-crafts\"\n            >\n              Explore GI Crafts\n              <ArrowRight className=\"ml-2 w-5 h-5\" />\n            </Button>\n            <Button \n              size=\"lg\" \n              variant=\"outline\" \n              className=\"backdrop-blur-sm bg-white/10 border-white/30 text-white hover:bg-white/20\"\n              onClick={handleBecomeVendor}\n              data-testid=\"button-become-vendor\"\n            >\n              Become a Vendor\n            </Button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":2174},"client/src/components/examples/DistrictBadge.tsx":{"content":"import DistrictBadge from '../DistrictBadge';\n\nexport default function DistrictBadgeExample() {\n  return (\n    <div className=\"flex gap-2 flex-wrap\">\n      <DistrictBadge district=\"Multan\" />\n      <DistrictBadge district=\"Lahore\" />\n      <DistrictBadge district=\"Bahawalpur\" />\n    </div>\n  );\n}\n","size_bytes":298},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50\" />\n    <SliderPrimitive.Thumb className=\"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1290},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":755},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/VendorCard.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Store, Star } from \"lucide-react\";\nimport DistrictBadge from \"./DistrictBadge\";\n\ninterface VendorCardProps {\n  id: string;\n  name: string;\n  district: string;\n  giBrands: string[];\n  rating: number;\n  totalProducts: number;\n  avatar?: string;\n}\n\nexport default function VendorCard({\n  id,\n  name,\n  district,\n  giBrands,\n  rating,\n  totalProducts,\n  avatar,\n}: VendorCardProps) {\n  const handleVisitStore = () => {\n    console.log(`Visit store: ${name}`);\n  };\n\n  const initials = name\n    .split(' ')\n    .map(word => word[0])\n    .join('')\n    .toUpperCase()\n    .slice(0, 2);\n\n  return (\n    <Card className=\"hover-elevate active-elevate-2\" data-testid={`card-vendor-${id}`}>\n      <CardContent className=\"p-6\">\n        <div className=\"flex items-start gap-4\">\n          <Avatar className=\"w-16 h-16\">\n            <AvatarImage src={avatar} alt={name} />\n            <AvatarFallback>{initials}</AvatarFallback>\n          </Avatar>\n          <div className=\"flex-1 min-w-0\">\n            <h3 className=\"font-semibold text-lg mb-1\" data-testid={`text-vendor-name-${id}`}>\n              {name}\n            </h3>\n            <DistrictBadge district={district} className=\"mb-2\" />\n            <div className=\"flex items-center gap-4 text-sm text-muted-foreground mb-3\">\n              <div className=\"flex items-center gap-1\">\n                <Star className=\"w-4 h-4 fill-primary text-primary\" />\n                <span data-testid={`text-rating-${id}`}>{rating.toFixed(1)}</span>\n              </div>\n              <div className=\"flex items-center gap-1\">\n                <Store className=\"w-4 h-4\" />\n                <span data-testid={`text-products-${id}`}>{totalProducts} products</span>\n              </div>\n            </div>\n            <div className=\"flex flex-wrap gap-1 mb-4\">\n              {giBrands.slice(0, 2).map((gi) => (\n                <Badge key={gi} variant=\"secondary\" className=\"text-xs\">\n                  {gi}\n                </Badge>\n              ))}\n              {giBrands.length > 2 && (\n                <Badge variant=\"secondary\" className=\"text-xs\">\n                  +{giBrands.length - 2}\n                </Badge>\n              )}\n            </div>\n            <Button \n              className=\"w-full\"\n              onClick={handleVisitStore}\n              data-testid={`button-visit-store-${id}`}\n            >\n              Visit Store\n            </Button>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":2705},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/components/ProductCard.tsx":{"content":"import { Card, CardContent, CardFooter, CardHeader } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport DistrictBadge from \"./DistrictBadge\";\nimport GITag from \"./GITag\";\nimport { ShoppingCart } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { addToCart } from \"@/lib/cart\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { formatPrice } from \"@/lib/utils/price\";\nimport { normalizeImagePath } from \"@/lib/utils/image\";\n\ninterface ProductCardProps {\n  id: string;\n  title: string;\n  price: number | string;\n  image: string;\n  district: string;\n  giBrand: string;\n  vendorName: string;\n  storeId?: string;\n  stock?: number;\n}\n\nexport default function ProductCard({\n  id,\n  title,\n  price,\n  image,\n  district,\n  giBrand,\n  vendorName,\n  storeId = '',\n  stock = 10,\n}: ProductCardProps) {\n  const [isHovered, setIsHovered] = useState(false);\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n\n  const handleCardClick = () => {\n    setLocation(`/products/${id}`);\n  };\n\n  const handleAddToCart = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    \n    const priceStr = typeof price === 'number' ? price.toString() : price;\n    \n    addToCart({\n      productId: id,\n      title,\n      price: priceStr,\n      image: normalizeImagePath(image),\n      district,\n      giBrand,\n      storeId,\n      storeName: vendorName,\n      stock,\n    }, 1);\n\n    toast({\n      title: \"Added to cart\",\n      description: `${title} added to your cart.`,\n    });\n  };\n\n  return (\n    <Card\n      className=\"overflow-hidden transition-all hover-elevate active-elevate-2 cursor-pointer\"\n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n      onClick={handleCardClick}\n      data-testid={`card-product-${id}`}\n    >\n      <CardHeader className=\"p-0\">\n        <div className=\"relative aspect-[4/3] overflow-hidden bg-muted\">\n          <img\n            src={normalizeImagePath(image)}\n            alt={title}\n            className=\"w-full h-full object-cover transition-transform duration-300\"\n            style={{ transform: isHovered ? 'scale(1.05)' : 'scale(1)' }}\n          />\n          <div className=\"absolute top-2 right-2 flex flex-col gap-2\">\n            <DistrictBadge district={district} />\n          </div>\n        </div>\n      </CardHeader>\n      <CardContent className=\"p-4 space-y-2\">\n        <GITag giBrand={giBrand} />\n        <h3 className=\"font-semibold text-lg line-clamp-2\" data-testid={`text-product-title-${id}`}>\n          {title}\n        </h3>\n        <p className=\"text-sm text-muted-foreground\" data-testid={`text-vendor-${id}`}>\n          by {vendorName}\n        </p>\n        <p className=\"text-2xl font-bold text-primary\" data-testid={`text-price-${id}`}>\n          {formatPrice(price)}\n        </p>\n      </CardContent>\n      <CardFooter className=\"p-4 pt-0\">\n        <Button \n          className=\"w-full\" \n          onClick={handleAddToCart}\n          data-testid={`button-add-to-cart-${id}`}\n        >\n          <ShoppingCart className=\"w-4 h-4 mr-2\" />\n          Add to Cart\n        </Button>\n      </CardFooter>\n    </Card>\n  );\n}\n","size_bytes":3201},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":844},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1592},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","size_bytes":1904},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/Header.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Search, ShoppingCart, User, Menu, Moon, Sun, Store, LayoutDashboard, LogOut, ShieldCheck } from \"lucide-react\";\nimport { useState, useEffect } from \"react\";\nimport { Link, useLocation } from \"wouter\";\nimport { getCartCount } from \"@/lib/cart\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { useTheme } from \"@/components/ThemeProvider\";\nimport { AuthDialog } from \"@/components/AuthDialog\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nconst giBrands = [\n  \"All GI Brands\",\n  \"Lahore Heritage Crafts\",\n  \"Multani Crafts\",\n  \"Cholistani Heritage\",\n  \"Faisalabadi Weaves\",\n  \"Punjab Metal & Leather Works\",\n  \"Pothohari Crafts\",\n  \"Sufi Craft Collection\",\n  \"Salt & Stone Crafts\",\n  \"Saraiki Tribal Arts\"\n];\n\nexport default function Header() {\n  const { user, isAuthenticated, isVendor, logout, isLoggingOut } = useAuth();\n  const isAdmin = user?.role === \"admin\";\n  const { theme, toggleTheme } = useTheme();\n  const { toast } = useToast();\n  const [cartCount, setCartCount] = useState(0);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedGIBrand, setSelectedGIBrand] = useState(\"all\");\n  const [, setLocation] = useLocation();\n  const [authDialogOpen, setAuthDialogOpen] = useState(false);\n  const [authDialogTab, setAuthDialogTab] = useState<\"login\" | \"register\">(\"login\");\n\n  useEffect(() => {\n    setCartCount(getCartCount());\n    \n    const handleCartUpdate = () => {\n      setCartCount(getCartCount());\n    };\n\n    window.addEventListener('cart-updated', handleCartUpdate);\n    return () => window.removeEventListener('cart-updated', handleCartUpdate);\n  }, []);\n\n  const handleSearch = () => {\n    if (searchQuery.trim()) {\n      setLocation(`/products?search=${encodeURIComponent(searchQuery)}`);\n    } else {\n      setLocation('/products');\n    }\n  };\n\n  const handleGIBrandChange = (giBrand: string) => {\n    setSelectedGIBrand(giBrand);\n    if (giBrand === \"all\") {\n      setLocation('/products');\n    } else {\n      setLocation(`/products?giBrand=${encodeURIComponent(giBrand)}`);\n    }\n  };\n\n  const handleLogout = () => {\n    logout(undefined, {\n      onSuccess: () => {\n        toast({\n          title: \"Logged out\",\n          description: \"You have been logged out successfully.\",\n        });\n      },\n      onError: (error: any) => {\n        toast({\n          variant: \"destructive\",\n          title: \"Logout failed\",\n          description: error?.message || \"Failed to logout\",\n        });\n      },\n    });\n  };\n\n  const handleLoginClick = () => {\n    setAuthDialogTab(\"login\");\n    setAuthDialogOpen(true);\n  };\n\n  const handleRegisterClick = () => {\n    setAuthDialogTab(\"register\");\n    setAuthDialogOpen(true);\n  };\n\n\n  return (\n    <header className=\"sticky top-0 z-50 bg-background border-b\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex items-center justify-between h-16 gap-4\">\n          <div className=\"flex items-center gap-4 sm:gap-6\">\n            <Button variant=\"ghost\" size=\"icon\" className=\"md:hidden\" data-testid=\"button-menu\" aria-label=\"Open navigation menu\">\n              <Menu className=\"w-5 h-5\" />\n            </Button>\n            <Link href=\"/\">\n              <h1 className=\"text-xl sm:text-2xl font-bold text-primary cursor-pointer hover-elevate rounded-md px-2 py-1\" data-testid=\"text-logo\">\n                Sanatzar\n              </h1>\n            </Link>\n          </div>\n\n          <div className=\"hidden md:flex items-center gap-3 flex-1 max-w-2xl\">\n            <Select value={selectedGIBrand} onValueChange={handleGIBrandChange}>\n              <SelectTrigger className=\"w-56\" data-testid=\"select-gi-brand\">\n                <SelectValue placeholder=\"All GI Brands\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">All GI Brands</SelectItem>\n                {giBrands.slice(1).map((brand) => (\n                  <SelectItem key={brand} value={brand}>\n                    {brand}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n\n            <div className=\"flex-1 flex items-center relative\">\n              <Input\n                type=\"search\"\n                placeholder=\"Search handicrafts...\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                onKeyDown={(e) => e.key === 'Enter' && handleSearch()}\n                className=\"flex-1 pr-10\"\n                data-testid=\"input-search\"\n              />\n              <Button\n                size=\"icon\"\n                variant=\"ghost\"\n                className=\"absolute right-0 top-1/2 -translate-y-1/2 mt-[35px]\"\n                onClick={handleSearch}\n                data-testid=\"button-search\"\n                aria-label=\"Search products\"\n              >\n                <Search className=\"w-4 h-4\" />\n              </Button>\n            </div>\n          </div>\n\n          <div className=\"flex items-center gap-1 sm:gap-2\">\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              onClick={toggleTheme}\n              data-testid=\"button-theme-toggle\"\n              aria-label=\"Toggle theme\"\n            >\n              {theme === \"dark\" ? <Sun className=\"w-5 h-5\" /> : <Moon className=\"w-5 h-5\" />}\n            </Button>\n            <Link href=\"/cart\">\n              <Button variant=\"ghost\" size=\"icon\" className=\"relative\" data-testid=\"button-cart\" aria-label=\"Shopping cart\">\n                <ShoppingCart className=\"w-5 h-5\" />\n                {cartCount > 0 && (\n                  <Badge\n                    variant=\"destructive\"\n                    className=\"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs\"\n                    data-testid=\"badge-cart-count\"\n                  >\n                    {cartCount}\n                  </Badge>\n                )}\n              </Button>\n            </Link>\n            \n            {isAuthenticated ? (\n              <DropdownMenu>\n                <DropdownMenuTrigger asChild>\n                  <Button variant=\"ghost\" size=\"icon\" data-testid=\"button-user-menu\" aria-label=\"User menu\" className=\"rounded-full\">\n                    <Avatar className=\"h-8 w-8\">\n                      <AvatarImage src={user?.profileImageUrl || undefined} alt={user?.firstName || \"User\"} />\n                      <AvatarFallback>\n                        {user?.firstName?.[0]}{user?.lastName?.[0]}\n                      </AvatarFallback>\n                    </Avatar>\n                  </Button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent align=\"end\" className=\"w-56\">\n                  <DropdownMenuLabel>\n                    <div className=\"flex flex-col space-y-1\">\n                      <p className=\"text-sm font-medium\" data-testid=\"text-user-name\">\n                        {user?.firstName} {user?.lastName}\n                      </p>\n                      <p className=\"text-xs text-muted-foreground\" data-testid=\"text-user-email\">\n                        {user?.email}\n                      </p>\n                    </div>\n                  </DropdownMenuLabel>\n                  <DropdownMenuSeparator />\n                  {isAdmin && (\n                    <>\n                      <DropdownMenuItem asChild>\n                        <Link href=\"/admin/dashboard\">\n                          <ShieldCheck className=\"w-4 h-4 mr-2\" />\n                          <span data-testid=\"link-admin-dashboard\">Admin Dashboard</span>\n                        </Link>\n                      </DropdownMenuItem>\n                      <DropdownMenuSeparator />\n                    </>\n                  )}\n                  {isVendor && (\n                    <>\n                      <DropdownMenuItem asChild>\n                        <Link href=\"/vendor/dashboard\">\n                          <LayoutDashboard className=\"w-4 h-4 mr-2\" />\n                          <span data-testid=\"link-vendor-dashboard\">Vendor Dashboard</span>\n                        </Link>\n                      </DropdownMenuItem>\n                      <DropdownMenuSeparator />\n                    </>\n                  )}\n                  <DropdownMenuItem onClick={handleLogout} disabled={isLoggingOut} data-testid=\"button-logout\">\n                    <LogOut className=\"w-4 h-4 mr-2\" />\n                    <span>{isLoggingOut ? \"Logging out...\" : \"Logout\"}</span>\n                  </DropdownMenuItem>\n                </DropdownMenuContent>\n              </DropdownMenu>\n            ) : (\n              <Button variant=\"default\" size=\"sm\" onClick={handleLoginClick} data-testid=\"button-login\">\n                Login\n              </Button>\n            )}\n          </div>\n        </div>\n\n        <div className=\"md:hidden pb-3 space-y-2\">\n          <div className=\"flex items-center relative\">\n            <Input\n              type=\"search\"\n              placeholder=\"Search handicrafts...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              onKeyDown={(e) => e.key === 'Enter' && handleSearch()}\n              className=\"flex-1 pr-10\"\n              data-testid=\"input-search-mobile\"\n            />\n            <Button\n              size=\"icon\"\n              variant=\"ghost\"\n              className=\"absolute right-0 top-1/2 -translate-y-1/2 mt-[35px]\"\n              onClick={handleSearch}\n              data-testid=\"button-search-mobile\"\n              aria-label=\"Search\"\n            >\n              <Search className=\"w-4 h-4\" />\n            </Button>\n          </div>\n          <Select value={selectedGIBrand} onValueChange={handleGIBrandChange}>\n            <SelectTrigger className=\"w-full\" data-testid=\"select-gi-brand-mobile\">\n              <SelectValue placeholder=\"All GI Brands\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"all\">All GI Brands</SelectItem>\n              {giBrands.slice(1).map((brand) => (\n                <SelectItem key={brand} value={brand}>\n                  {brand}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n      </div>\n\n      <AuthDialog\n        open={authDialogOpen}\n        onOpenChange={setAuthDialogOpen}\n        defaultTab={authDialogTab}\n      />\n    </header>\n  );\n}\n","size_bytes":10860},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { ThemeProvider } from \"@/components/ThemeProvider\";\nimport Home from \"@/pages/Home\";\nimport Products from \"@/pages/Products\";\nimport ProductDetail from \"@/pages/ProductDetail\";\nimport Cart from \"@/pages/Cart\";\nimport VendorRegister from \"@/pages/VendorRegister\";\nimport VendorOverview from \"@/pages/vendor/Overview\";\nimport VendorProducts from \"@/pages/vendor/Products\";\nimport VendorOrders from \"@/pages/vendor/Orders\";\nimport VendorStore from \"@/pages/vendor/Store\";\nimport AdminOverview from \"@/pages/admin/Overview\";\nimport AdminModeration from \"@/pages/admin/Moderation\";\nimport AdminUsers from \"@/pages/admin/Users\";\nimport AdminOrders from \"@/pages/admin/Orders\";\nimport AdminAnalytics from \"@/pages/admin/Analytics\";\nimport NotFound from \"@/pages/not-found\";\n\nfunction Router() {\n  return (\n    <Switch>\n      <Route path=\"/\" component={Home} />\n      <Route path=\"/products\" component={Products} />\n      <Route path=\"/products/:id\" component={ProductDetail} />\n      <Route path=\"/cart\" component={Cart} />\n      <Route path=\"/vendor/register\" component={VendorRegister} />\n      <Route path=\"/vendor/dashboard\" component={VendorOverview} />\n      <Route path=\"/vendor/products\" component={VendorProducts} />\n      <Route path=\"/vendor/orders\" component={VendorOrders} />\n      <Route path=\"/vendor/store\" component={VendorStore} />\n      <Route path=\"/admin/dashboard\" component={AdminOverview} />\n      <Route path=\"/admin/moderation\" component={AdminModeration} />\n      <Route path=\"/admin/users\" component={AdminUsers} />\n      <Route path=\"/admin/orders\" component={AdminOrders} />\n      <Route path=\"/admin/analytics\" component={AdminAnalytics} />\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <ThemeProvider>\n        <TooltipProvider>\n          <Toaster />\n          <Router />\n        </TooltipProvider>\n      </ThemeProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":2263},"client/src/lib/authUtils.ts":{"content":"export function isUnauthorizedError(error: Error): boolean {\n  return /^401: .*Unauthorized/.test(error.message);\n}\n","size_bytes":116},"client/src/pages/Home.tsx":{"content":"import Header from \"@/components/Header\";\nimport Hero from \"@/components/Hero\";\nimport GIBrandCard from \"@/components/GIBrandCard\";\nimport ProductCard from \"@/components/ProductCard\";\nimport VendorCard from \"@/components/VendorCard\";\nimport Footer from \"@/components/Footer\";\nimport { Button } from \"@/components/ui/button\";\nimport { ArrowRight } from \"lucide-react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Link } from \"wouter\";\nimport type { Category, Product, Store } from \"@shared/schema\";\n\nimport multanImage from '@assets/generated_images/Multan_blue_pottery_workshop_21555b73.png';\nimport bahawalpurImage from '@assets/generated_images/Bahawalpur_Ralli_quilts_display_07a38e65.png';\nimport lahoreImage from '@assets/generated_images/Lahore_jewelry_and_embroidery_39a642f1.png';\nimport khussaImage from '@assets/generated_images/Handmade_khussa_footwear_product_06baa0d0.png';\nimport vendorAvatar from '@assets/generated_images/Artisan_vendor_profile_portrait_cf010960.png';\n\nconst districtImages: Record<string, string> = {\n  \"Multan\": multanImage,\n  \"Bahawalpur\": bahawalpurImage,\n  \"Lahore\": lahoreImage,\n};\n\nconst imagePathMap: Record<string, string> = {\n  \"/attached_assets/generated_images/Lahore_jewelry_and_embroidery_39a642f1.png\": lahoreImage,\n  \"/attached_assets/generated_images/Multan_blue_pottery_workshop_21555b73.png\": multanImage,\n  \"/attached_assets/generated_images/Bahawalpur_Ralli_quilts_display_07a38e65.png\": bahawalpurImage,\n  \"/attached_assets/generated_images/Handmade_khussa_footwear_product_06baa0d0.png\": khussaImage,\n};\n\nexport default function Home() {\n  const { data: categoriesData, isLoading: categoriesLoading } = useQuery<Category[]>({\n    queryKey: ['/api/categories'],\n  });\n\n  const { data: productsResponse, isLoading: productsLoading } = useQuery<{\n    products: Product[];\n    pagination: { total: number };\n  }>({\n    queryKey: ['/api/products?status=approved&pageSize=8'],\n  });\n\n  const { data: storesData, isLoading: storesLoading } = useQuery<Store[]>({\n    queryKey: ['/api/stores?status=approved'],\n  });\n\n  // Create unique GI brands from categories\n  const giBrands = categoriesData?.slice(0, 3).map(cat => ({\n    giBrand: cat.giBrand,\n    district: cat.district,\n    image: districtImages[cat.district] || multanImage,\n    craftCount: productsResponse?.products.filter(p => p.giBrand === cat.giBrand).length || 0,\n  })) || [];\n\n  const featuredProducts = productsResponse?.products.slice(0, 4).map(product => ({\n    id: product.id,\n    title: product.title,\n    price: Number(product.price),\n    image: imagePathMap[product.images[0]] || product.images[0] || multanImage,\n    district: product.district,\n    giBrand: product.giBrand,\n    vendorName: storesData?.find(s => s.id === product.storeId)?.name || \"Artisan Vendor\",\n    storeId: product.storeId,\n    stock: product.stock,\n  })) || [];\n\n  const topVendors = storesData?.slice(0, 2).map(store => ({\n    id: store.id,\n    name: store.name,\n    district: store.district,\n    giBrands: store.giBrands,\n    rating: 4.8,\n    totalProducts: productsResponse?.products.filter(p => p.storeId === store.id).length || 0,\n    avatar: vendorAvatar,\n  })) || [];\n\n  const isLoading = categoriesLoading || productsLoading || storesLoading;\n\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <Header />\n      <Hero />\n      \n      <main className=\"flex-1\">\n        <section className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16\">\n          <div className=\"flex items-center justify-between mb-8\">\n            <div>\n              <h2 className=\"text-3xl font-bold mb-2\" data-testid=\"text-gi-brands-heading\">\n                Shop by GI Brand\n              </h2>\n              <p className=\"text-muted-foreground\">\n                Explore authentic Geographical Indication certified handicrafts from Punjab's master artisans\n              </p>\n            </div>\n            <Link href=\"/products\">\n              <Button variant=\"ghost\" data-testid=\"button-view-all-gi-brands\">\n                View All\n                <ArrowRight className=\"ml-2 w-4 h-4\" />\n              </Button>\n            </Link>\n          </div>\n          \n          {isLoading ? (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {[1, 2, 3].map((i) => (\n                <div key={i} className=\"h-64 bg-muted/50 rounded-lg animate-pulse\" />\n              ))}\n            </div>\n          ) : (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {giBrands.map((brand) => (\n                <GIBrandCard key={brand.giBrand} {...brand} />\n              ))}\n            </div>\n          )}\n        </section>\n\n        <section className=\"bg-muted/30 py-16\">\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div className=\"flex items-center justify-between mb-8\">\n              <div>\n                <h2 className=\"text-3xl font-bold mb-2\" data-testid=\"text-featured-heading\">\n                  Featured Handicrafts\n                </h2>\n                <p className=\"text-muted-foreground\">\n                  Handpicked authentic crafts from master artisans\n                </p>\n              </div>\n              <Link href=\"/products\">\n                <Button variant=\"ghost\" data-testid=\"button-view-all-products\">\n                  View All\n                  <ArrowRight className=\"ml-2 w-4 h-4\" />\n                </Button>\n              </Link>\n            </div>\n            \n            {isLoading ? (\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\n                {[1, 2, 3, 4].map((i) => (\n                  <div key={i} className=\"h-80 bg-muted/50 rounded-lg animate-pulse\" />\n                ))}\n              </div>\n            ) : (\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\n                {featuredProducts.map((product) => (\n                  <ProductCard key={product.id} {...product} />\n                ))}\n              </div>\n            )}\n          </div>\n        </section>\n\n        <section className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16\">\n          <div className=\"flex items-center justify-between mb-8\">\n            <div>\n              <h2 className=\"text-3xl font-bold mb-2\" data-testid=\"text-vendors-heading\">\n                Top Artisan Vendors\n              </h2>\n              <p className=\"text-muted-foreground\">\n                Connect with skilled craftspeople preserving traditional arts\n              </p>\n            </div>\n            <Button variant=\"ghost\" data-testid=\"button-view-all-vendors\">\n              View All\n              <ArrowRight className=\"ml-2 w-4 h-4\" />\n            </Button>\n          </div>\n          \n          {isLoading ? (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              {[1, 2].map((i) => (\n                <div key={i} className=\"h-48 bg-muted/50 rounded-lg animate-pulse\" />\n              ))}\n            </div>\n          ) : (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              {topVendors.map((vendor) => (\n                <VendorCard key={vendor.id} {...vendor} />\n              ))}\n            </div>\n          )}\n        </section>\n\n        <section className=\"bg-primary text-primary-foreground py-16\">\n          <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center\">\n            <h2 className=\"text-3xl font-bold mb-4\" data-testid=\"text-cta-heading\">\n              Start Selling Your Crafts Today\n            </h2>\n            <p className=\"text-lg mb-8 text-primary-foreground/90\">\n              Join hundreds of artisans showcasing their authentic handicrafts to customers worldwide.\n              Create your store in minutes and start earning.\n            </p>\n            <div className=\"flex gap-4 justify-center flex-wrap\">\n              <Button \n                size=\"lg\" \n                variant=\"secondary\"\n                data-testid=\"button-get-started\"\n              >\n                Get Started\n                <ArrowRight className=\"ml-2 w-5 h-5\" />\n              </Button>\n              <Button \n                size=\"lg\" \n                variant=\"outline\" \n                className=\"border-primary-foreground/30 text-primary-foreground hover:bg-primary-foreground/10\"\n                data-testid=\"button-learn-more\"\n              >\n                Learn More\n              </Button>\n            </div>\n          </div>\n        </section>\n      </main>\n      \n      <Footer />\n    </div>\n  );\n}\n","size_bytes":8588},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":1080},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"design_guidelines.md":{"content":"# Punjab Handicrafts Marketplace - Design Guidelines\n\n## Design Approach\n\n**Reference-Based with Cultural Authenticity**: Drawing inspiration from Etsy's artisan marketplace aesthetics and Shopify's vendor-friendly interfaces, enhanced with traditional Pakistani craft motifs and patterns. The design celebrates Punjab's rich heritage while maintaining modern e-commerce functionality.\n\n## Core Design Principles\n\n1. **Cultural Celebration**: Incorporate subtle geometric patterns inspired by traditional crafts (Phulkari embroidery motifs, block print borders) as decorative elements\n2. **Authenticity First**: Showcase craftsmanship through high-quality product imagery with generous whitespace\n3. **Trust & Transparency**: Clear GI branding badges, vendor profiles, and district tags build credibility\n4. **Accessible Commerce**: Simple, intuitive interfaces for artisans with varying digital literacy\n\n## Typography\n\n**Font Families**:\n- Primary: Inter or Poppins (clean, multilingual support for Urdu/English)\n- Headings: 600-700 weight\n- Body: 400-500 weight\n- Accents: 500 weight for CTAs and labels\n\n**Hierarchy**:\n- Hero Headlines: 3xl-5xl (48-64px)\n- Section Titles: 2xl-3xl (36-48px)\n- Product Titles: lg-xl (18-24px)\n- Body Text: base (16px)\n- Captions/Meta: sm (14px)\n\n## Layout System\n\n**Spacing Units**: Tailwind units of 2, 4, 6, 8, 12, 16, 24 (p-4, m-8, gap-6, etc.)\n\n**Grid System**:\n- Product Cards: grid-cols-1 md:grid-cols-3 lg:grid-cols-4\n- Featured Districts: grid-cols-1 md:grid-cols-2 lg:grid-cols-3\n- Vendor Dashboard: Two-column layout (sidebar + main content)\n- Admin Panel: Three-column layout (nav, content, quick stats)\n\n**Container Widths**:\n- Full layouts: max-w-7xl\n- Content sections: max-w-6xl\n- Forms: max-w-2xl\n- Product details: max-w-4xl\n\n## Component Library\n\n### Navigation\n- **Main Header**: Sticky navigation with logo, district dropdown, GI brand filter, search bar, cart icon, user menu\n- **Breadcrumbs**: District > GI Brand > Category > Product\n- **Vendor Dashboard Sidebar**: Collapsible menu with icons for Products, Orders, Analytics, Messages, Settings\n\n### Product Components\n- **Product Cards**: Image (4:3 ratio), title, district badge, GI tag, price, vendor name, hover reveal (quick view)\n- **District Badges**: Rounded pills with subtle borders, district name + icon\n- **GI Brand Tags**: Distinctive styling (border-l-4 accent) to highlight authenticity\n\n### Forms & Inputs\n- **Input Fields**: Rounded borders (rounded-lg), focus states with ring, helper text below\n- **File Upload**: Drag-drop zone with preview thumbnails for multiple images\n- **Dropdowns**: Custom styled selects for district/GI selection with searchable options\n- **Variant Builder**: Dynamic add/remove rows for product variants (size, color)\n\n### Data Display\n- **Order Cards**: Timeline view showing status progression (Ordered  Processing  Shipped  Delivered)\n- **Analytics Charts**: Simple bar/line charts using Chart.js with clear labels\n- **Inventory Tables**: Sortable columns, stock level indicators (green/yellow/red dots)\n\n### Shopping Experience\n- **Cart Drawer**: Slide-in panel from right, product thumbnails, quantity controls, subtotal\n- **Checkout Steps**: Multi-step progress indicator, payment method cards (JazzCash, Easypaisa, COD, Card)\n- **Product Gallery**: Main image with thumbnail strip below, zoom on click\n\n### Vendor Portal\n- **Store Header**: Cover image area, store logo overlay, stats bar (rating, products, sales)\n- **Product Management**: List view with inline edit, bulk actions, status toggles\n- **Order Dashboard**: Kanban-style columns for different order statuses\n\n### Admin Panel\n- **Moderation Queue**: Card layout with approve/reject actions, product preview\n- **User Management**: Table with role badges, actions dropdown, search/filter\n- **Analytics Overview**: 4-column stat cards (total sales, active vendors, orders, revenue)\n\n### Messaging\n- **Inbox**: Two-panel layout (conversation list + message thread)\n- **Message Cards**: Sender avatar, timestamp, message preview, unread indicator\n\n## Images\n\n**Hero Section**: Full-width banner (h-96 lg:h-[32rem]) showcasing Punjab handicrafts collage - artisans at work, finished products, traditional tools. Overlaid with blurred-background button for \"Explore GI Crafts\" centered or bottom-aligned.\n\n**District Landing Pages**: Each district gets a hero image representing its signature craft (e.g., Multan blue pottery workshop, Bahawalpur Ralli quilts, Lahore jewelry making).\n\n**Product Images**: 4:3 or square ratio, white/neutral backgrounds preferred for consistency, minimum 800x800px, support for 5-8 images per product.\n\n**Vendor Profile**: Optional cover photo (16:9) with circular logo overlay, imagery should represent their craft specialty.\n\n**About/Story Pages**: Documentary-style images of artisans, craft processes, cultural heritage sites.\n\n## Special Considerations\n\n**Bilingual Support**: Design accommodates Urdu RTL text alongside English LTR, flexible text containers.\n\n**Cultural Patterns**: Use traditional motifs sparingly as:\n- Section dividers (thin decorative borders)\n- Background watermarks (very low opacity)\n- Badge/tag embellishments\n- Never overwhelming the product imagery\n\n**Mobile-First Vendor Tools**: Large touch targets (min 44px), simplified forms with progressive disclosure, single-column layouts on mobile.\n\n**Trust Indicators**: \n- Verified vendor badges\n- GI authenticity certificates (modal on click)\n- Secure payment badges in footer\n- Customer review stars\n\n**Accessibility**: WCAG AA compliance, sufficient contrast ratios, keyboard navigation, screen reader friendly labels, focus indicators on all interactive elements.\n\nThis design system balances traditional craftsmanship celebration with modern e-commerce efficiency, creating an authentic marketplace experience for Punjab's artisan community.","size_bytes":5883},"client/src/components/examples/FilterSidebar.tsx":{"content":"import FilterSidebar from '../FilterSidebar';\n\nexport default function FilterSidebarExample() {\n  return (\n    <div className=\"max-w-xs\">\n      <FilterSidebar />\n    </div>\n  );\n}\n","size_bytes":180},"client/src/pages/Products.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport type { Category, Product } from \"@shared/schema\";\nimport Header from \"@/components/Header\";\nimport Footer from \"@/components/Footer\";\nimport ProductCard from \"@/components/ProductCard\";\nimport { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectTrigger, SelectValue, SelectContent, SelectItem } from \"@/components/ui/select\";\nimport { Slider } from \"@/components/ui/slider\";\nimport { Alert, AlertTitle, AlertDescription } from \"@/components/ui/alert\";\nimport { SlidersHorizontal, X, Search, AlertCircle } from \"lucide-react\";\nimport bahawalpurImage from '@assets/generated_images/Bahawalpur_Ralli_quilts_display_07a38e65.png';\nimport lahoreImage from '@assets/generated_images/Lahore_jewelry_and_embroidery_39a642f1.png';\nimport khussaImage from '@assets/generated_images/Handmade_khussa_footwear_product_06baa0d0.png';\nimport multanImage from '@assets/generated_images/Multan_blue_pottery_workshop_21555b73.png';\n\nconst imagePathMap: Record<string, string> = {\n  \"/attached_assets/generated_images/Lahore_jewelry_and_embroidery_39a642f1.png\": lahoreImage,\n  \"/attached_assets/generated_images/Multan_blue_pottery_workshop_21555b73.png\": multanImage,\n  \"/attached_assets/generated_images/Bahawalpur_Ralli_quilts_display_07a38e65.png\": bahawalpurImage,\n  \"/attached_assets/generated_images/Handmade_khussa_footwear_product_06baa0d0.png\": khussaImage,\n};\n\nexport default function Products() {\n  const [search, setSearch] = useState(\"\");\n  const [district, setDistrict] = useState<string>(\"all\");\n  const [giBrand, setGiBrand] = useState<string>(\"all\");\n  const [priceRange, setPriceRange] = useState<[number, number]>([0, 10000]);\n  const [page, setPage] = useState(1);\n  const pageSize = 12;\n\n  const { data: categoriesData } = useQuery<Category[]>({\n    queryKey: ['/api/categories'],\n  });\n\n  const buildQueryString = () => {\n    const params = new URLSearchParams();\n    params.append('status', 'approved');\n    params.append('page', page.toString());\n    params.append('pageSize', pageSize.toString());\n    \n    if (search) params.append('search', search);\n    if (district !== 'all') params.append('district', district);\n    if (giBrand !== 'all') params.append('giBrand', giBrand);\n    if (priceRange[0] > 0) params.append('minPrice', priceRange[0].toString());\n    if (priceRange[1] < 10000) params.append('maxPrice', priceRange[1].toString());\n    \n    return `/api/products?${params.toString()}`;\n  };\n\n  const { data: productsData, isLoading, isError, error, refetch } = useQuery<{\n    products: Product[];\n    pagination: { page: number; pageSize: number; total: number; totalPages: number };\n  }>({\n    queryKey: [buildQueryString()],\n  });\n\n  const handleResetFilters = () => {\n    setSearch(\"\");\n    setDistrict(\"all\");\n    setGiBrand(\"all\");\n    setPriceRange([0, 10000]);\n    setPage(1);\n  };\n\n  const hasActiveFilters = search || district !== 'all' || giBrand !== 'all' || priceRange[0] > 0 || priceRange[1] < 10000;\n\n  const featuredProducts = productsData?.products.map(product => {\n    const normalizedImage = product.images[0] ? (product.images[0].startsWith('/') ? product.images[0] : `/${product.images[0]}`) : '';\n    return {\n      id: product.id,\n      title: product.title,\n      price: Number(product.price),\n      image: imagePathMap[normalizedImage] || normalizedImage || multanImage,\n      district: product.district,\n      giBrand: product.giBrand,\n      vendorName: \"Artisan Vendor\",\n      storeId: product.storeId,\n      stock: product.stock,\n    };\n  }) || [];\n\n  const giBrands = categoriesData?.map(cat => cat.giBrand) || [];\n\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <Header />\n      \n      <main className=\"flex-1 bg-muted/30\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n          <div className=\"mb-8\">\n            <h1 className=\"text-4xl font-bold mb-2\" data-testid=\"text-products-heading\">\n              Browse Handicrafts\n            </h1>\n            <p className=\"text-muted-foreground\">\n              Discover authentic products from Punjab's master artisans\n            </p>\n          </div>\n\n          <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\n            <aside className=\"lg:col-span-1\">\n              <Card>\n                <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-4\">\n                  <CardTitle className=\"text-lg flex items-center gap-2\">\n                    <SlidersHorizontal className=\"w-5 h-5\" />\n                    Filters\n                  </CardTitle>\n                  {hasActiveFilters && (\n                    <Button \n                      variant=\"ghost\" \n                      size=\"sm\" \n                      onClick={handleResetFilters}\n                      data-testid=\"button-reset-filters\"\n                    >\n                      <X className=\"w-4 h-4 mr-1\" />\n                      Reset\n                    </Button>\n                  )}\n                </CardHeader>\n                <CardContent className=\"space-y-6\">\n                  <div className=\"space-y-2\">\n                    <label className=\"text-sm font-medium\">Search</label>\n                    <div className=\"relative\">\n                      <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n                      <Input\n                        placeholder=\"Search products...\"\n                        value={search}\n                        onChange={(e) => {\n                          setSearch(e.target.value);\n                          setPage(1);\n                        }}\n                        className=\"pl-9\"\n                        data-testid=\"input-search\"\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <label className=\"text-sm font-medium\">District</label>\n                    <Select \n                      value={district} \n                      onValueChange={(value) => {\n                        setDistrict(value);\n                        setPage(1);\n                      }}\n                    >\n                      <SelectTrigger data-testid=\"select-district\">\n                        <SelectValue placeholder=\"All Districts\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"all\">All Districts</SelectItem>\n                        {categoriesData?.map((cat) => (\n                          <SelectItem key={cat.district} value={cat.district}>\n                            {cat.district}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <label className=\"text-sm font-medium\">GI Brand</label>\n                    <Select \n                      value={giBrand} \n                      onValueChange={(value) => {\n                        setGiBrand(value);\n                        setPage(1);\n                      }}\n                    >\n                      <SelectTrigger data-testid=\"select-gi-brand\">\n                        <SelectValue placeholder=\"All Brands\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"all\">All Brands</SelectItem>\n                        {giBrands.map((brand) => (\n                          <SelectItem key={brand} value={brand}>\n                            {brand}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n\n                  <div className=\"space-y-3\">\n                    <label className=\"text-sm font-medium\">\n                      Price Range: PKR {priceRange[0]} - {priceRange[1]}\n                    </label>\n                    <Slider\n                      min={0}\n                      max={10000}\n                      step={100}\n                      value={priceRange}\n                      onValueChange={(value) => {\n                        setPriceRange(value as [number, number]);\n                        setPage(1);\n                      }}\n                      data-testid=\"slider-price-range\"\n                    />\n                  </div>\n                </CardContent>\n              </Card>\n            </aside>\n\n            <div className=\"lg:col-span-3 space-y-6\">\n              <div className=\"flex items-center justify-between\">\n                <p className=\"text-sm text-muted-foreground\" data-testid=\"text-results-count\">\n                  {productsData?.pagination.total || 0} products found\n                </p>\n              </div>\n\n              {isError ? (\n                <Alert variant=\"destructive\" data-testid=\"alert-error\">\n                  <AlertCircle className=\"h-4 w-4\" />\n                  <AlertTitle>Error Loading Products</AlertTitle>\n                  <AlertDescription>\n                    {error instanceof Error ? error.message : \"Failed to load products. Please try again.\"}\n                  </AlertDescription>\n                  <Button \n                    variant=\"outline\" \n                    onClick={() => refetch()}\n                    className=\"mt-4\"\n                    data-testid=\"button-retry\"\n                  >\n                    Retry\n                  </Button>\n                </Alert>\n              ) : isLoading ? (\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\n                  {[1, 2, 3, 4, 5, 6].map((i) => (\n                    <div key={i} className=\"h-80 bg-muted/50 rounded-lg animate-pulse\" />\n                  ))}\n                </div>\n              ) : featuredProducts.length === 0 ? (\n                <Card>\n                  <CardContent className=\"py-12 text-center\">\n                    <p className=\"text-muted-foreground\" data-testid=\"text-no-results\">\n                      No products found matching your filters.\n                    </p>\n                    {hasActiveFilters && (\n                      <Button \n                        variant=\"outline\" \n                        onClick={handleResetFilters}\n                        className=\"mt-4\"\n                        data-testid=\"button-reset-filters-empty\"\n                      >\n                        Reset Filters\n                      </Button>\n                    )}\n                  </CardContent>\n                </Card>\n              ) : (\n                <>\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\n                    {featuredProducts.map((product) => (\n                      <ProductCard key={product.id} {...product} />\n                    ))}\n                  </div>\n\n                  {productsData && productsData.pagination.totalPages > 1 && (\n                    <div className=\"flex items-center justify-center gap-2\">\n                      <Button\n                        variant=\"outline\"\n                        onClick={() => setPage(p => Math.max(1, p - 1))}\n                        disabled={page === 1}\n                        data-testid=\"button-prev-page\"\n                      >\n                        Previous\n                      </Button>\n                      <span className=\"text-sm\" data-testid=\"text-page-info\">\n                        Page {page} of {productsData.pagination.totalPages}\n                      </span>\n                      <Button\n                        variant=\"outline\"\n                        onClick={() => setPage(p => Math.min(productsData.pagination.totalPages, p + 1))}\n                        disabled={page === productsData.pagination.totalPages}\n                        data-testid=\"button-next-page\"\n                      >\n                        Next\n                      </Button>\n                    </div>\n                  )}\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      </main>\n      \n      <Footer />\n    </div>\n  );\n}\n","size_bytes":12331},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/components/DistrictBadge.tsx":{"content":"import { Badge } from \"@/components/ui/badge\";\nimport { MapPin } from \"lucide-react\";\n\ninterface DistrictBadgeProps {\n  district: string;\n  className?: string;\n}\n\nexport default function DistrictBadge({ district, className }: DistrictBadgeProps) {\n  return (\n    <Badge variant=\"secondary\" className={className} data-testid={`badge-district-${district.toLowerCase().replace(/\\s+/g, '-')}`}>\n      <MapPin className=\"w-3 h-3 mr-1\" />\n      {district}\n    </Badge>\n  );\n}\n","size_bytes":470},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1383},"client/src/components/GITag.tsx":{"content":"import { Badge } from \"@/components/ui/badge\";\nimport { Award } from \"lucide-react\";\n\ninterface GITagProps {\n  giBrand: string;\n  className?: string;\n}\n\nexport default function GITag({ giBrand, className }: GITagProps) {\n  return (\n    <Badge \n      variant=\"outline\" \n      className={`border-l-4 border-l-primary ${className}`}\n      data-testid={`tag-gi-${giBrand.toLowerCase().replace(/\\s+/g, '-')}`}\n    >\n      <Award className=\"w-3 h-3 mr-1\" />\n      {giBrand}\n    </Badge>\n  );\n}\n","size_bytes":488},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar, integer, decimal, timestamp, boolean, index, jsonb } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// Session storage table for Replit Auth\nexport const sessions = pgTable(\n  \"sessions\",\n  {\n    sid: varchar(\"sid\").primaryKey(),\n    sess: jsonb(\"sess\").notNull(),\n    expire: timestamp(\"expire\").notNull(),\n  },\n  (table) => [index(\"IDX_session_expire\").on(table.expire)],\n);\n\n// User storage table with password authentication\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  email: varchar(\"email\").unique().notNull(),\n  passwordHash: varchar(\"password_hash\"),\n  firstName: varchar(\"first_name\"),\n  lastName: varchar(\"last_name\"),\n  profileImageUrl: varchar(\"profile_image_url\"),\n  emailVerified: boolean(\"email_verified\").notNull().default(false),\n  verificationToken: varchar(\"verification_token\"),\n  passwordResetToken: varchar(\"password_reset_token\"),\n  passwordResetExpires: timestamp(\"password_reset_expires\"),\n  role: text(\"role\").notNull().default(\"buyer\"),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n  updatedAt: timestamp(\"updated_at\").defaultNow().notNull(),\n});\n\nexport const stores = pgTable(\"stores\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  vendorId: varchar(\"vendor_id\").notNull().references(() => users.id),\n  name: text(\"name\").notNull(),\n  description: text(\"description\"),\n  logoUrl: text(\"logo_url\"),\n  district: text(\"district\").notNull(),\n  giBrands: text(\"gi_brands\").array().notNull(),\n  status: text(\"status\").notNull().default(\"pending\"),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const products = pgTable(\"products\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  storeId: varchar(\"store_id\").notNull().references(() => stores.id),\n  title: text(\"title\").notNull(),\n  description: text(\"description\"),\n  price: decimal(\"price\", { precision: 10, scale: 2 }).notNull(),\n  stock: integer(\"stock\").notNull().default(0),\n  images: text(\"images\").array().notNull(),\n  district: text(\"district\").notNull(),\n  giBrand: text(\"gi_brand\").notNull(),\n  variants: text(\"variants\"),\n  status: text(\"status\").notNull().default(\"pending\"),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const orders = pgTable(\"orders\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  buyerId: varchar(\"buyer_id\").notNull().references(() => users.id),\n  total: decimal(\"total\", { precision: 10, scale: 2 }).notNull(),\n  status: text(\"status\").notNull().default(\"pending\"),\n  paymentMethod: text(\"payment_method\"),\n  shippingAddress: text(\"shipping_address\"),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const orderItems = pgTable(\"order_items\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  orderId: varchar(\"order_id\").notNull().references(() => orders.id),\n  productId: varchar(\"product_id\").notNull().references(() => products.id),\n  storeId: varchar(\"store_id\").notNull().references(() => stores.id),\n  quantity: integer(\"quantity\").notNull(),\n  price: decimal(\"price\", { precision: 10, scale: 2 }).notNull(),\n});\n\nexport const categories = pgTable(\"categories\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  district: text(\"district\").notNull().unique(),\n  giBrand: text(\"gi_brand\").notNull(),\n  crafts: text(\"crafts\").array().notNull(),\n});\n\nexport const messages = pgTable(\"messages\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  senderId: varchar(\"sender_id\").notNull().references(() => users.id),\n  receiverId: varchar(\"receiver_id\").notNull().references(() => users.id),\n  orderId: varchar(\"order_id\").references(() => orders.id),\n  message: text(\"message\").notNull(),\n  read: boolean(\"read\").notNull().default(false),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const subscriptions = pgTable(\"subscriptions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  vendorId: varchar(\"vendor_id\").notNull().references(() => users.id),\n  tier: text(\"tier\").notNull().default(\"basic\"),\n  commissionRate: decimal(\"commission_rate\", { precision: 5, scale: 2 }).notNull().default(\"10.00\"),\n  status: text(\"status\").notNull().default(\"active\"),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const transactions = pgTable(\"transactions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  orderId: varchar(\"order_id\").notNull().references(() => orders.id),\n  storeId: varchar(\"store_id\").notNull().references(() => stores.id),\n  amount: decimal(\"amount\", { precision: 10, scale: 2 }).notNull(),\n  commission: decimal(\"commission\", { precision: 10, scale: 2 }).notNull(),\n  vendorEarnings: decimal(\"vendor_earnings\", { precision: 10, scale: 2 }).notNull(),\n  status: text(\"status\").notNull().default(\"pending\"),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const payouts = pgTable(\"payouts\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  vendorId: varchar(\"vendor_id\").notNull().references(() => users.id),\n  amount: decimal(\"amount\", { precision: 10, scale: 2 }).notNull(),\n  status: text(\"status\").notNull().default(\"pending\"),\n  requestedAt: timestamp(\"requested_at\").defaultNow().notNull(),\n  processedAt: timestamp(\"processed_at\"),\n});\n\nexport const upsertUserSchema = createInsertSchema(users).omit({\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertUserSchema = createInsertSchema(users).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertStoreSchema = createInsertSchema(stores).omit({\n  id: true,\n  createdAt: true,\n  status: true,\n});\n\nexport const insertProductSchema = createInsertSchema(products).omit({\n  id: true,\n  createdAt: true,\n  status: true,\n});\n\nexport const insertOrderSchema = createInsertSchema(orders).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertOrderItemSchema = createInsertSchema(orderItems).omit({\n  id: true,\n});\n\nexport const insertCategorySchema = createInsertSchema(categories).omit({\n  id: true,\n});\n\nexport const insertMessageSchema = createInsertSchema(messages).omit({\n  id: true,\n  createdAt: true,\n  read: true,\n});\n\nexport const insertSubscriptionSchema = createInsertSchema(subscriptions).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertTransactionSchema = createInsertSchema(transactions).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertPayoutSchema = createInsertSchema(payouts).omit({\n  id: true,\n  requestedAt: true,\n});\n\nexport type UpsertUser = z.infer<typeof upsertUserSchema>;\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type User = typeof users.$inferSelect;\n\nexport type InsertStore = z.infer<typeof insertStoreSchema>;\nexport type Store = typeof stores.$inferSelect;\n\nexport type InsertProduct = z.infer<typeof insertProductSchema>;\nexport type Product = typeof products.$inferSelect;\n\nexport type InsertOrder = z.infer<typeof insertOrderSchema>;\nexport type Order = typeof orders.$inferSelect;\n\nexport type InsertOrderItem = z.infer<typeof insertOrderItemSchema>;\nexport type OrderItem = typeof orderItems.$inferSelect;\n\nexport type InsertCategory = z.infer<typeof insertCategorySchema>;\nexport type Category = typeof categories.$inferSelect;\n\nexport type InsertMessage = z.infer<typeof insertMessageSchema>;\nexport type Message = typeof messages.$inferSelect;\n\nexport type InsertSubscription = z.infer<typeof insertSubscriptionSchema>;\nexport type Subscription = typeof subscriptions.$inferSelect;\n\nexport type InsertTransaction = z.infer<typeof insertTransactionSchema>;\nexport type Transaction = typeof transactions.$inferSelect;\n\nexport type InsertPayout = z.infer<typeof insertPayoutSchema>;\nexport type Payout = typeof payouts.$inferSelect;\n\n// Authentication schemas with password validation\nexport const registerSchema = z.object({\n  email: z.string().email(\"Invalid email address\"),\n  password: z.string()\n    .min(8, \"Password must be at least 8 characters\")\n    .regex(/[A-Z]/, \"Password must contain at least one uppercase letter\")\n    .regex(/[a-z]/, \"Password must contain at least one lowercase letter\")\n    .regex(/[0-9]/, \"Password must contain at least one number\"),\n  firstName: z.string().min(1, \"First name is required\"),\n  lastName: z.string().min(1, \"Last name is required\"),\n});\n\nexport const loginSchema = z.object({\n  email: z.string().email(\"Invalid email address\"),\n  password: z.string().min(1, \"Password is required\"),\n});\n\nexport type RegisterInput = z.infer<typeof registerSchema>;\nexport type LoginInput = z.infer<typeof loginSchema>;\n","size_bytes":8809},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1202},"server/db.ts":{"content":"import { Pool, neonConfig } from '@neondatabase/serverless';\nimport { drizzle } from 'drizzle-orm/neon-serverless';\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\nneonConfig.webSocketConstructor = ws;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle({ client: pool, schema });\n","size_bytes":483},"client/src/components/FilterSidebar.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Label } from \"@/components/ui/label\";\nimport { Slider } from \"@/components/ui/slider\";\nimport { Button } from \"@/components/ui/button\";\nimport { useState } from \"react\";\n\nconst districts = [\n  \"Lahore\",\n  \"Multan\",\n  \"Bahawalpur\",\n  \"Faisalabad\",\n  \"Gujranwala\",\n  \"Rawalpindi\",\n  \"Sahiwal\",\n  \"Sargodha\",\n  \"D.G. Khan\"\n];\n\nconst giBrands = [\n  \"Lahore Heritage Crafts\",\n  \"Multani Crafts\",\n  \"Cholistani Heritage\",\n  \"Faisalabadi Weaves\",\n  \"Punjab Metal & Leather Works\",\n  \"Pothohari Crafts\",\n  \"Sufi Craft Collection\",\n  \"Salt & Stone Crafts\",\n  \"Saraiki Tribal Arts\"\n];\n\nexport default function FilterSidebar() {\n  const [priceRange, setPriceRange] = useState([0, 50000]);\n  const [selectedDistricts, setSelectedDistricts] = useState<string[]>([]);\n  const [selectedGI, setSelectedGI] = useState<string[]>([]);\n\n  const handleDistrictChange = (district: string, checked: boolean) => {\n    if (checked) {\n      setSelectedDistricts([...selectedDistricts, district]);\n    } else {\n      setSelectedDistricts(selectedDistricts.filter(d => d !== district));\n    }\n    console.log('Districts selected:', checked ? [...selectedDistricts, district] : selectedDistricts.filter(d => d !== district));\n  };\n\n  const handleGIChange = (gi: string, checked: boolean) => {\n    if (checked) {\n      setSelectedGI([...selectedGI, gi]);\n    } else {\n      setSelectedGI(selectedGI.filter(g => g !== gi));\n    }\n    console.log('GI brands selected:', checked ? [...selectedGI, gi] : selectedGI.filter(g => g !== gi));\n  };\n\n  const handleClearFilters = () => {\n    setSelectedDistricts([]);\n    setSelectedGI([]);\n    setPriceRange([0, 50000]);\n    console.log('Filters cleared');\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <Card>\n        <CardHeader className=\"pb-3\">\n          <CardTitle className=\"text-base\">Price Range</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <Slider\n            value={priceRange}\n            onValueChange={setPriceRange}\n            max={50000}\n            step={500}\n            className=\"w-full\"\n            data-testid=\"slider-price-range\"\n          />\n          <div className=\"flex items-center justify-between text-sm\">\n            <span data-testid=\"text-price-min\">Rs. {priceRange[0].toLocaleString()}</span>\n            <span data-testid=\"text-price-max\">Rs. {priceRange[1].toLocaleString()}</span>\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader className=\"pb-3\">\n          <CardTitle className=\"text-base\">District</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-3\">\n          {districts.map((district) => (\n            <div key={district} className=\"flex items-center space-x-2\">\n              <Checkbox\n                id={`district-${district}`}\n                checked={selectedDistricts.includes(district)}\n                onCheckedChange={(checked) => handleDistrictChange(district, checked as boolean)}\n                data-testid={`checkbox-district-${district.toLowerCase().replace(/\\s+/g, '-')}`}\n              />\n              <Label\n                htmlFor={`district-${district}`}\n                className=\"text-sm font-normal cursor-pointer\"\n              >\n                {district}\n              </Label>\n            </div>\n          ))}\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader className=\"pb-3\">\n          <CardTitle className=\"text-base\">GI Brand</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-3\">\n          {giBrands.map((gi) => (\n            <div key={gi} className=\"flex items-center space-x-2\">\n              <Checkbox\n                id={`gi-${gi}`}\n                checked={selectedGI.includes(gi)}\n                onCheckedChange={(checked) => handleGIChange(gi, checked as boolean)}\n                data-testid={`checkbox-gi-${gi.toLowerCase().replace(/\\s+/g, '-')}`}\n              />\n              <Label\n                htmlFor={`gi-${gi}`}\n                className=\"text-sm font-normal cursor-pointer\"\n              >\n                {gi}\n              </Label>\n            </div>\n          ))}\n        </CardContent>\n      </Card>\n\n      <Button \n        variant=\"outline\" \n        className=\"w-full\"\n        onClick={handleClearFilters}\n        data-testid=\"button-clear-filters\"\n      >\n        Clear All Filters\n      </Button>\n    </div>\n  );\n}\n","size_bytes":4531},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1597},"client/src/pages/ProductDetail.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { useParams, Link, useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Alert, AlertDescription, AlertTitle } from \"@/components/ui/alert\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { AlertCircle, ShoppingCart, Store, MapPin, Award, Minus, Plus, ArrowLeft } from \"lucide-react\";\nimport { useState } from \"react\";\nimport type { Product } from \"@shared/schema\";\nimport { addToCart } from \"@/lib/cart\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { formatPrice, toSafeNumber } from \"@/lib/utils/price\";\nimport { normalizeImagePaths } from \"@/lib/utils/image\";\n\ntype Store = {\n  id: string;\n  vendorId: string;\n  name: string;\n  description: string | null;\n  district: string;\n  status: string;\n};\n\nexport default function ProductDetail() {\n  const { id } = useParams<{ id: string }>();\n  const [, setLocation] = useLocation();\n  const [quantity, setQuantity] = useState(1);\n  const [selectedImage, setSelectedImage] = useState(0);\n  const { toast } = useToast();\n\n  const { data: product, isLoading: productLoading, isError: productError, error: productErrorData } = useQuery<Product>({\n    queryKey: [`/api/products/${id}`],\n    enabled: !!id,\n  });\n\n  const { data: store, isLoading: storeLoading, isError: storeError } = useQuery<Store>({\n    queryKey: [`/api/stores/${product?.storeId}`],\n    enabled: !!product?.storeId,\n  });\n\n  const handleQuantityChange = (delta: number) => {\n    const newQuantity = quantity + delta;\n    if (newQuantity >= 1 && newQuantity <= (product?.stock || 0)) {\n      setQuantity(newQuantity);\n    }\n  };\n\n  const handleAddToCart = () => {\n    if (!product || !store) {\n      toast({\n        title: \"Cannot add to cart\",\n        description: \"Please wait for product information to load.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    \n    addToCart({\n      productId: product.id,\n      title: product.title,\n      price: product.price,\n      image: images[0] || '',\n      district: product.district,\n      giBrand: product.giBrand,\n      storeId: product.storeId,\n      storeName: store.name,\n      stock: product.stock,\n    }, quantity);\n\n    toast({\n      title: \"Added to cart\",\n      description: `${quantity}  ${product.title} added to your cart.`,\n    });\n  };\n\n  const handleBuyNow = () => {\n    if (!product || !store) {\n      toast({\n        title: \"Cannot proceed\",\n        description: \"Please wait for product information to load.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    \n    addToCart({\n      productId: product.id,\n      title: product.title,\n      price: product.price,\n      image: images[0] || '',\n      district: product.district,\n      giBrand: product.giBrand,\n      storeId: product.storeId,\n      storeName: store.name,\n      stock: product.stock,\n    }, quantity);\n\n    setLocation('/cart');\n  };\n\n  if (productError) {\n    return (\n      <div className=\"container mx-auto px-4 py-8\">\n        <Alert variant=\"destructive\" data-testid=\"alert-error\">\n          <AlertCircle className=\"h-4 w-4\" />\n          <AlertTitle>Error Loading Product</AlertTitle>\n          <AlertDescription>\n            {productErrorData instanceof Error ? productErrorData.message : \"Failed to load product details.\"}\n          </AlertDescription>\n          <Button \n            variant=\"outline\" \n            onClick={() => setLocation('/products')}\n            className=\"mt-4\"\n            data-testid=\"button-back-to-products\"\n          >\n            Back to Products\n          </Button>\n        </Alert>\n      </div>\n    );\n  }\n\n  if (productLoading) {\n    return (\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n          <div className=\"space-y-4\">\n            <div className=\"aspect-square bg-muted/50 rounded-lg animate-pulse\" />\n            <div className=\"grid grid-cols-4 gap-2\">\n              {[1, 2, 3, 4].map((i) => (\n                <div key={i} className=\"aspect-square bg-muted/50 rounded-md animate-pulse\" />\n              ))}\n            </div>\n          </div>\n          <div className=\"space-y-4\">\n            <div className=\"h-8 bg-muted/50 rounded animate-pulse w-3/4\" />\n            <div className=\"h-4 bg-muted/50 rounded animate-pulse w-1/2\" />\n            <div className=\"h-20 bg-muted/50 rounded animate-pulse\" />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!product) {\n    return (\n      <div className=\"container mx-auto px-4 py-8\">\n        <Card>\n          <CardContent className=\"py-12 text-center\">\n            <p className=\"text-muted-foreground\" data-testid=\"text-not-found\">\n              Product not found\n            </p>\n            <Button \n              variant=\"outline\" \n              onClick={() => setLocation('/products')}\n              className=\"mt-4\"\n              data-testid=\"button-back-to-products\"\n            >\n              Back to Products\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  const isOutOfStock = product.stock === 0;\n  const images = normalizeImagePaths(product.images);\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <Button\n        variant=\"ghost\"\n        onClick={() => setLocation('/products')}\n        className=\"mb-6\"\n        data-testid=\"button-back\"\n      >\n        <ArrowLeft className=\"w-4 h-4 mr-2\" />\n        Back to Products\n      </Button>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n        <div className=\"space-y-4\">\n          <div className=\"aspect-square bg-muted rounded-lg overflow-hidden\">\n            {images.length > 0 ? (\n              <img\n                src={images[selectedImage]}\n                alt={product.title}\n                className=\"w-full h-full object-cover\"\n                data-testid=\"img-product-main\"\n              />\n            ) : (\n              <div className=\"w-full h-full flex items-center justify-center bg-muted\">\n                <p className=\"text-muted-foreground\">No image available</p>\n              </div>\n            )}\n          </div>\n\n          {images.length > 1 && (\n            <div className=\"grid grid-cols-4 gap-2\">\n              {images.map((image, index) => (\n                <button\n                  key={index}\n                  onClick={() => setSelectedImage(index)}\n                  className={`aspect-square rounded-md overflow-hidden border-2 ${\n                    selectedImage === index ? 'border-primary' : 'border-transparent'\n                  }`}\n                  data-testid={`button-thumbnail-${index}`}\n                >\n                  <img\n                    src={image}\n                    alt={`${product.title} ${index + 1}`}\n                    className=\"w-full h-full object-cover\"\n                  />\n                </button>\n              ))}\n            </div>\n          )}\n        </div>\n\n        <div className=\"space-y-6\">\n          <div>\n            <h1 className=\"text-3xl font-bold mb-2\" data-testid=\"text-product-title\">\n              {product.title}\n            </h1>\n            <div className=\"flex items-center gap-2 flex-wrap\">\n              <Badge variant=\"secondary\" data-testid=\"badge-district\">\n                <MapPin className=\"w-3 h-3 mr-1\" />\n                {product.district}\n              </Badge>\n              <Badge variant=\"outline\" data-testid=\"badge-gi-brand\">\n                <Award className=\"w-3 h-3 mr-1\" />\n                {product.giBrand}\n              </Badge>\n              {isOutOfStock && (\n                <Badge variant=\"destructive\" data-testid=\"badge-out-of-stock\">\n                  Out of Stock\n                </Badge>\n              )}\n            </div>\n          </div>\n\n          <div>\n            <p className=\"text-3xl font-bold text-primary\" data-testid=\"text-price\">\n              {formatPrice(product.price)}\n            </p>\n            <p className=\"text-sm text-muted-foreground mt-1\" data-testid=\"text-stock\">\n              {isOutOfStock ? 'Currently unavailable' : `${product.stock} in stock`}\n            </p>\n          </div>\n\n          {product.description && (\n            <div>\n              <h3 className=\"font-semibold mb-2\">Description</h3>\n              <p className=\"text-muted-foreground\" data-testid=\"text-description\">\n                {product.description}\n              </p>\n            </div>\n          )}\n\n          {product.variants && (\n            <div>\n              <h3 className=\"font-semibold mb-2\">Variants</h3>\n              <p className=\"text-sm text-muted-foreground\" data-testid=\"text-variants\">\n                {product.variants}\n              </p>\n            </div>\n          )}\n\n          <Separator />\n\n          {!isOutOfStock && (\n            <div>\n              <h3 className=\"font-semibold mb-3\">Quantity</h3>\n              <div className=\"flex items-center gap-3\">\n                <Button\n                  variant=\"outline\"\n                  size=\"icon\"\n                  onClick={() => handleQuantityChange(-1)}\n                  disabled={quantity <= 1}\n                  data-testid=\"button-decrease-quantity\"\n                  aria-label=\"Decrease quantity\"\n                >\n                  <Minus className=\"w-4 h-4\" />\n                </Button>\n                <span className=\"text-lg font-semibold min-w-12 text-center\" data-testid=\"text-quantity\">\n                  {quantity}\n                </span>\n                <Button\n                  variant=\"outline\"\n                  size=\"icon\"\n                  onClick={() => handleQuantityChange(1)}\n                  disabled={quantity >= product.stock}\n                  data-testid=\"button-increase-quantity\"\n                  aria-label=\"Increase quantity\"\n                >\n                  <Plus className=\"w-4 h-4\" />\n                </Button>\n              </div>\n            </div>\n          )}\n\n          <div className=\"flex gap-3 flex-wrap\">\n            <Button\n              onClick={handleAddToCart}\n              variant=\"outline\"\n              className=\"flex-1 min-w-40\"\n              disabled={isOutOfStock || storeLoading || !store}\n              data-testid=\"button-add-to-cart\"\n            >\n              <ShoppingCart className=\"w-4 h-4 mr-2\" />\n              {storeLoading ? 'Loading...' : 'Add to Cart'}\n            </Button>\n            <Button\n              onClick={handleBuyNow}\n              className=\"flex-1 min-w-40\"\n              disabled={isOutOfStock || storeLoading || !store}\n              data-testid=\"button-buy-now\"\n            >\n              {storeLoading ? 'Loading...' : 'Buy Now'}\n            </Button>\n          </div>\n\n          <Separator />\n\n          {storeError ? (\n            <Alert variant=\"destructive\" data-testid=\"alert-store-error\">\n              <AlertCircle className=\"h-4 w-4\" />\n              <AlertTitle>Vendor Information Unavailable</AlertTitle>\n              <AlertDescription>\n                Unable to load vendor information. You can still view the product, but purchasing is temporarily unavailable.\n              </AlertDescription>\n            </Alert>\n          ) : storeLoading ? (\n            <Card>\n              <CardHeader>\n                <div className=\"h-6 bg-muted/50 rounded animate-pulse w-32\" />\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-2\">\n                  <div className=\"h-4 bg-muted/50 rounded animate-pulse\" />\n                  <div className=\"h-4 bg-muted/50 rounded animate-pulse w-3/4\" />\n                </div>\n              </CardContent>\n            </Card>\n          ) : store ? (\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Store className=\"w-5 h-5\" />\n                  Vendor Information\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-2\">\n                  <p className=\"font-semibold\" data-testid=\"text-store-name\">\n                    {store.name}\n                  </p>\n                  {store.description && (\n                    <p className=\"text-sm text-muted-foreground\" data-testid=\"text-store-description\">\n                      {store.description}\n                    </p>\n                  )}\n                  <p className=\"text-sm flex items-center gap-1\" data-testid=\"text-store-district\">\n                    <MapPin className=\"w-4 h-4\" />\n                    {store.district}\n                  </p>\n                  <Link href={`/stores/${store.id}`}>\n                    <Button variant=\"ghost\" className=\"px-0 h-auto\" data-testid=\"button-view-store\">\n                      View Store\n                    </Button>\n                  </Link>\n                </div>\n              </CardContent>\n            </Card>\n          ) : null}\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":13058},"client/src/pages/Cart.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardFooter, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { getCart, updateCartItemQuantity, removeFromCart, clearCart } from \"@/lib/cart\";\nimport { useLocation } from \"wouter\";\nimport { useState, useEffect, useMemo } from \"react\";\nimport { ShoppingBag, ArrowLeft, Plus, Minus, Trash2 } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { CartItem } from \"@/lib/cart\";\nimport { normalizeImagePath } from \"@/lib/utils/image\";\nimport { formatPrice } from \"@/lib/utils/price\";\n\nexport default function Cart() {\n  const [, setLocation] = useLocation();\n  const [cartItems, setCartItems] = useState<CartItem[]>([]);\n  const [showClearDialog, setShowClearDialog] = useState(false);\n  const { toast } = useToast();\n\n  useEffect(() => {\n    setCartItems(getCart());\n\n    const handleCartUpdate = () => {\n      setCartItems(getCart());\n    };\n\n    window.addEventListener('cart-updated', handleCartUpdate);\n    return () => window.removeEventListener('cart-updated', handleCartUpdate);\n  }, []);\n\n  const total = useMemo(() => {\n    return cartItems.reduce((sum, item) => {\n      return sum + (parseFloat(item.price) * item.quantity);\n    }, 0);\n  }, [cartItems]);\n\n  const handleIncreaseQuantity = (item: CartItem) => {\n    if (item.quantity >= item.stock) {\n      toast({\n        variant: \"destructive\",\n        title: \"Stock limit reached\",\n        description: `Only ${item.stock} units available for ${item.title}.`,\n      });\n      return;\n    }\n    updateCartItemQuantity(item.productId, item.quantity + 1);\n  };\n\n  const handleDecreaseQuantity = (item: CartItem) => {\n    if (item.quantity > 1) {\n      updateCartItemQuantity(item.productId, item.quantity - 1);\n    } else {\n      handleRemoveItem(item);\n    }\n  };\n\n  const handleRemoveItem = (item: CartItem) => {\n    removeFromCart(item.productId);\n    toast({\n      title: \"Item removed\",\n      description: `${item.title} has been removed from your cart.`,\n    });\n  };\n\n  const handleClearCart = () => {\n    setShowClearDialog(false);\n    clearCart();\n    toast({\n      title: \"Cart cleared\",\n      description: \"All items have been removed from your cart.\",\n    });\n  };\n\n  if (cartItems.length === 0) {\n    return (\n      <div className=\"container mx-auto px-4 py-8\">\n        <Button\n          variant=\"ghost\"\n          onClick={() => setLocation('/products')}\n          className=\"mb-6\"\n          data-testid=\"button-back-to-products\"\n        >\n          <ArrowLeft className=\"w-4 h-4 mr-2\" />\n          Continue Shopping\n        </Button>\n\n        <Card>\n          <CardContent className=\"py-12 text-center\">\n            <ShoppingBag className=\"w-16 h-16 mx-auto mb-4 text-muted-foreground\" />\n            <h2 className=\"text-2xl font-semibold mb-2\" data-testid=\"text-empty-cart\">\n              Your cart is empty\n            </h2>\n            <p className=\"text-muted-foreground mb-6\">\n              Add some beautiful handicrafts to your cart to get started!\n            </p>\n            <Button onClick={() => setLocation('/products')} data-testid=\"button-shop-now\">\n              Shop Now\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <Button\n        variant=\"ghost\"\n        onClick={() => setLocation('/products')}\n        className=\"mb-6\"\n        data-testid=\"button-back-to-products\"\n      >\n        <ArrowLeft className=\"w-4 h-4 mr-2\" />\n        Continue Shopping\n      </Button>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n        <div className=\"lg:col-span-2 space-y-4\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <h1 className=\"text-3xl font-bold\" data-testid=\"text-cart-heading\">\n              Shopping Cart ({cartItems.length} {cartItems.length === 1 ? 'item' : 'items'})\n            </h1>\n            <Button \n              variant=\"outline\" \n              size=\"sm\" \n              onClick={() => setShowClearDialog(true)}\n              data-testid=\"button-clear-cart\"\n            >\n              <Trash2 className=\"w-4 h-4 mr-2\" />\n              Clear Cart\n            </Button>\n          </div>\n\n          {cartItems.map((item) => (\n            <Card key={item.productId} data-testid={`cart-item-${item.productId}`}>\n              <CardContent className=\"p-4\">\n                <div className=\"flex gap-4\">\n                  <div className=\"w-24 h-24 rounded-md overflow-hidden bg-muted flex-shrink-0\">\n                    {item.image ? (\n                      <img\n                        src={normalizeImagePath(item.image)}\n                        alt={item.title}\n                        className=\"w-full h-full object-cover\"\n                        data-testid={`img-cart-item-${item.productId}`}\n                      />\n                    ) : (\n                      <div className=\"w-full h-full flex items-center justify-center\">\n                        <ShoppingBag className=\"w-8 h-8 text-muted-foreground\" />\n                      </div>\n                    )}\n                  </div>\n\n                  <div className=\"flex-1 space-y-2\">\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex-1\">\n                        <h3 className=\"font-semibold text-lg\" data-testid={`text-cart-item-title-${item.productId}`}>\n                          {item.title}\n                        </h3>\n                        <p className=\"text-sm text-muted-foreground\" data-testid={`text-cart-item-store-${item.productId}`}>\n                          by {item.storeName}\n                        </p>\n                      </div>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"icon\"\n                        onClick={() => handleRemoveItem(item)}\n                        data-testid={`button-remove-item-${item.productId}`}\n                      >\n                        <Trash2 className=\"w-4 h-4 text-destructive\" />\n                      </Button>\n                    </div>\n                    \n                    <div className=\"flex items-center gap-3\">\n                      <span className=\"text-sm text-muted-foreground\">Quantity:</span>\n                      <div className=\"flex items-center gap-2\">\n                        <Button\n                          variant=\"outline\"\n                          size=\"icon\"\n                          onClick={() => handleDecreaseQuantity(item)}\n                          data-testid={`button-decrease-qty-${item.productId}`}\n                          className=\"h-8 w-8\"\n                        >\n                          <Minus className=\"w-3 h-3\" />\n                        </Button>\n                        <span \n                          className=\"w-12 text-center font-semibold\" \n                          data-testid={`text-cart-item-quantity-${item.productId}`}\n                        >\n                          {item.quantity}\n                        </span>\n                        <Button\n                          variant=\"outline\"\n                          size=\"icon\"\n                          onClick={() => handleIncreaseQuantity(item)}\n                          data-testid={`button-increase-qty-${item.productId}`}\n                          className=\"h-8 w-8\"\n                          disabled={item.quantity >= item.stock}\n                        >\n                          <Plus className=\"w-3 h-3\" />\n                        </Button>\n                      </div>\n                      <span className=\"text-xs text-muted-foreground\">\n                        ({item.stock} in stock)\n                      </span>\n                    </div>\n                    \n                    <p className=\"text-lg font-bold text-primary\" data-testid={`text-cart-item-price-${item.productId}`}>\n                      PKR {(parseFloat(item.price) * item.quantity).toLocaleString()}\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n\n        <div className=\"lg:col-span-1\">\n          <Card className=\"sticky top-24\">\n            <CardHeader>\n              <CardTitle>Order Summary</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"flex justify-between\">\n                <span className=\"text-muted-foreground\">Subtotal</span>\n                <span className=\"font-semibold\" data-testid=\"text-subtotal\">\n                  PKR {total.toLocaleString()}\n                </span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-muted-foreground\">Shipping</span>\n                <span className=\"text-sm text-muted-foreground\">Calculated at checkout</span>\n              </div>\n              <div className=\"border-t pt-4\">\n                <div className=\"flex justify-between text-lg font-bold\">\n                  <span>Total</span>\n                  <span data-testid=\"text-total\">PKR {total.toLocaleString()}</span>\n                </div>\n              </div>\n            </CardContent>\n            <CardFooter>\n              <Button className=\"w-full\" size=\"lg\" data-testid=\"button-checkout\">\n                Proceed to Checkout\n              </Button>\n            </CardFooter>\n          </Card>\n        </div>\n      </div>\n\n      <AlertDialog open={showClearDialog} onOpenChange={setShowClearDialog}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Clear your cart?</AlertDialogTitle>\n            <AlertDialogDescription>\n              This will remove all {cartItems.length} {cartItems.length === 1 ? 'item' : 'items'} from your cart. This action cannot be undone.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel onClick={() => setShowClearDialog(false)} data-testid=\"button-cancel-clear\">\n              Cancel\n            </AlertDialogCancel>\n            <AlertDialogAction onClick={handleClearCart} data-testid=\"button-confirm-clear\">\n              Clear Cart\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  );\n}\n","size_bytes":10600},"client/src/lib/cart.ts":{"content":"export interface CartItem {\n  productId: string;\n  title: string;\n  price: string;\n  image: string;\n  district: string;\n  giBrand: string;\n  storeId: string;\n  storeName: string;\n  quantity: number;\n  stock: number;\n}\n\nconst CART_STORAGE_KEY = 'sanatzar_cart';\n\nexport function getCart(): CartItem[] {\n  if (typeof window === 'undefined') return [];\n  try {\n    const cart = localStorage.getItem(CART_STORAGE_KEY);\n    return cart ? JSON.parse(cart) : [];\n  } catch (error) {\n    console.error('Error reading cart:', error);\n    return [];\n  }\n}\n\nexport function saveCart(cart: CartItem[]): void {\n  if (typeof window === 'undefined') return;\n  try {\n    localStorage.setItem(CART_STORAGE_KEY, JSON.stringify(cart));\n    window.dispatchEvent(new CustomEvent('cart-updated', { detail: cart }));\n  } catch (error) {\n    console.error('Error saving cart:', error);\n  }\n}\n\nexport function addToCart(item: Omit<CartItem, 'quantity'>, quantity: number = 1): CartItem[] {\n  const cart = getCart();\n  const existingItemIndex = cart.findIndex(i => i.productId === item.productId);\n  \n  if (existingItemIndex >= 0) {\n    const existingItem = cart[existingItemIndex];\n    const newQuantity = Math.min(existingItem.quantity + quantity, item.stock);\n    cart[existingItemIndex] = { ...existingItem, quantity: newQuantity };\n  } else {\n    const newQuantity = Math.min(quantity, item.stock);\n    cart.push({ ...item, quantity: newQuantity });\n  }\n  \n  saveCart(cart);\n  return cart;\n}\n\nexport function removeFromCart(productId: string): CartItem[] {\n  const cart = getCart().filter(item => item.productId !== productId);\n  saveCart(cart);\n  return cart;\n}\n\nexport function updateCartItemQuantity(productId: string, quantity: number): CartItem[] {\n  const cart = getCart();\n  const itemIndex = cart.findIndex(i => i.productId === productId);\n  \n  if (itemIndex >= 0) {\n    if (quantity <= 0) {\n      cart.splice(itemIndex, 1);\n    } else {\n      const item = cart[itemIndex];\n      cart[itemIndex] = { ...item, quantity: Math.min(quantity, item.stock) };\n    }\n  }\n  \n  saveCart(cart);\n  return cart;\n}\n\nexport function clearCart(): void {\n  saveCart([]);\n}\n\nexport function getCartCount(): number {\n  return getCart().reduce((total, item) => total + item.quantity, 0);\n}\n\nexport function getCartTotal(): number {\n  return getCart().reduce((total, item) => {\n    return total + (parseFloat(item.price) * item.quantity);\n  }, 0);\n}\n","size_bytes":2416},"client/src/lib/utils/price.ts":{"content":"/**\n * Safely formats a price value as PKR currency\n * Handles both number and string inputs, guards against NaN\n * \n * @param price - Price as number or string\n * @param fallback - Value to return if price is invalid (default: 0)\n * @returns Formatted price string with PKR prefix and commas\n */\nexport function formatPrice(price: number | string | null | undefined, fallback: number = 0): string {\n  if (price === null || price === undefined || price === '') {\n    return `PKR ${fallback.toLocaleString()}`;\n  }\n  \n  const numPrice = typeof price === 'number' ? price : parseFloat(price);\n  \n  if (isNaN(numPrice)) {\n    return `PKR ${fallback.toLocaleString()}`;\n  }\n  \n  return `PKR ${numPrice.toLocaleString()}`;\n}\n\n/**\n * Safely converts price to number\n * Guards against NaN and returns fallback\n * \n * @param price - Price as number or string\n * @param fallback - Value to return if price is invalid (default: 0)\n * @returns Price as number\n */\nexport function toSafeNumber(price: number | string | null | undefined, fallback: number = 0): number {\n  if (price === null || price === undefined || price === '') {\n    return fallback;\n  }\n  \n  const numPrice = typeof price === 'number' ? price : parseFloat(price);\n  \n  return isNaN(numPrice) ? fallback : numPrice;\n}\n","size_bytes":1275},"client/src/components/GIBrandCard.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { ArrowRight, Award } from \"lucide-react\";\nimport { useLocation } from \"wouter\";\n\ninterface GIBrandCardProps {\n  giBrand: string;\n  district: string;\n  image: string;\n  craftCount: number;\n}\n\nexport default function GIBrandCard({ giBrand, district, image, craftCount }: GIBrandCardProps) {\n  const [, setLocation] = useLocation();\n\n  const handleExplore = () => {\n    setLocation(`/products?giBrand=${encodeURIComponent(giBrand)}`);\n  };\n\n  return (\n    <Card \n      className=\"overflow-hidden hover-elevate active-elevate-2 transition-all\"\n      data-testid={`card-gi-brand-${giBrand.toLowerCase().replace(/\\s+/g, '-')}`}\n    >\n      <div className=\"relative aspect-[4/3] overflow-hidden\">\n        <img\n          src={image}\n          alt={giBrand}\n          className=\"w-full h-full object-cover\"\n        />\n        <div className=\"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent\" />\n        <div className=\"absolute bottom-0 left-0 right-0 p-4 text-white\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <Award className=\"w-5 h-5 text-primary\" />\n            <h3 className=\"text-2xl font-bold\" data-testid={`text-gi-brand-${giBrand.toLowerCase().replace(/\\s+/g, '-')}`}>\n              {giBrand}\n            </h3>\n          </div>\n          <p className=\"text-sm text-white/90\" data-testid={`text-district-${giBrand.toLowerCase().replace(/\\s+/g, '-')}`}>\n            From {district}\n          </p>\n        </div>\n      </div>\n      <CardContent className=\"p-4\">\n        <p className=\"text-sm text-muted-foreground mb-4\" data-testid={`text-craft-count-${giBrand.toLowerCase().replace(/\\s+/g, '-')}`}>\n          {craftCount} authentic crafts\n        </p>\n        <Button \n          variant=\"outline\" \n          className=\"w-full\"\n          onClick={handleExplore}\n          data-testid={`button-explore-${giBrand.toLowerCase().replace(/\\s+/g, '-')}`}\n        >\n          Explore Crafts\n          <ArrowRight className=\"ml-2 w-4 h-4\" />\n        </Button>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":2158},"client/src/components/VendorSidebar.tsx":{"content":"import {\n  Sidebar,\n  SidebarContent,\n  SidebarGroup,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarMenu,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarHeader,\n  SidebarFooter,\n} from \"@/components/ui/sidebar\";\nimport { LayoutDashboard, Package, ShoppingCart, Store, Settings } from \"lucide-react\";\nimport { Link, useLocation } from \"wouter\";\n\nconst menuItems = [\n  {\n    title: \"Overview\",\n    url: \"/vendor/dashboard\",\n    icon: LayoutDashboard,\n  },\n  {\n    title: \"Products\",\n    url: \"/vendor/products\",\n    icon: Package,\n  },\n  {\n    title: \"Orders\",\n    url: \"/vendor/orders\",\n    icon: ShoppingCart,\n  },\n  {\n    title: \"Store Settings\",\n    url: \"/vendor/store\",\n    icon: Settings,\n  },\n];\n\nexport function VendorSidebar() {\n  const [location] = useLocation();\n\n  return (\n    <Sidebar>\n      <SidebarHeader className=\"border-b p-4\">\n        <SidebarMenu>\n          <SidebarMenuItem>\n            <SidebarMenuButton asChild size=\"lg\" data-testid=\"link-brand-logo\">\n              <Link href=\"/\">\n                <Store className=\"w-6 h-6 text-primary\" />\n                <span className=\"font-bold text-lg\">Sanatzar</span>\n              </Link>\n            </SidebarMenuButton>\n          </SidebarMenuItem>\n        </SidebarMenu>\n      </SidebarHeader>\n      <SidebarContent>\n        <SidebarGroup>\n          <SidebarGroupLabel>Vendor Dashboard</SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {menuItems.map((item) => (\n                <SidebarMenuItem key={item.title}>\n                  <SidebarMenuButton asChild isActive={location === item.url}>\n                    <Link href={item.url} data-testid={`link-vendor-${item.title.toLowerCase().replace(/\\s+/g, '-')}`}>\n                      <item.icon className=\"w-4 h-4\" />\n                      <span>{item.title}</span>\n                    </Link>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n      </SidebarContent>\n      <SidebarFooter className=\"border-t p-4\">\n        <SidebarMenu>\n          <SidebarMenuItem>\n            <SidebarMenuButton asChild data-testid=\"link-back-to-marketplace\">\n              <Link href=\"/\">\n                <Store className=\"w-4 h-4\" />\n                <span>Back to Marketplace</span>\n              </Link>\n            </SidebarMenuButton>\n          </SidebarMenuItem>\n        </SidebarMenu>\n      </SidebarFooter>\n    </Sidebar>\n  );\n}\n","size_bytes":2518},"PRODUCTION_SEED_INSTRUCTIONS.md":{"content":"# Production Database Seeding Instructions\n\nThis document explains how to populate your production database with initial data after publishing your Sanatzar application.\n\n## Overview\n\nThe application includes a secure `/api/admin/seed` endpoint that initializes your production database with:\n- **9 Districts/GI Brands**: Lahore Heritage Crafts, Punjab Metal & Leather Works, Pothohari Crafts, Sufi Craft Collection, Faisalabadi Weaves, Saraiki Tribal Arts, Cholistani Heritage, Salt & Stone Crafts, and Multani Crafts\n- **3 Sample Vendors**: Vendor accounts for Lahore, Multan, and Bahawalpur\n- **3 Sample Stores**: Approved stores with authentic GI brand associations\n- **8 Sample Products**: High-quality handicraft products with real images\n\n## Prerequisites\n\n1. Your application must be published on Replit\n2. You must have the `SEED_SECRET` environment variable set in production (same value you configured in development)\n\n## How to Seed Production Database\n\n### Step 1: Ensure SEED_SECRET is Set in Production\n\n1. Go to your published Replit project\n2. Navigate to Secrets (in the Tools panel)\n3. Verify that `SEED_SECRET` exists with the same value you used in development\n4. If not present, add it now\n\n### Step 2: Call the Seed Endpoint\n\nUse `curl` or any HTTP client to send a POST request to your production API:\n\n```bash\ncurl -X POST https://your-app-name.replit.app/api/admin/seed \\\n  -H \"Authorization: Bearer YOUR_SEED_SECRET_VALUE\"\n```\n\nReplace:\n- `your-app-name.replit.app` with your actual published domain\n- `YOUR_SEED_SECRET_VALUE` with your actual SEED_SECRET value\n\n### Step 3: Verify Success\n\n**Successful Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Database seeded successfully\"\n}\n```\n\n**Failed Response (Invalid Token):**\n```json\n{\n  \"message\": \"Unauthorized - Invalid seed token\"\n}\n```\n\n**Failed Response (Seed Error):**\n```json\n{\n  \"success\": false,\n  \"message\": \"Failed to seed database\",\n  \"error\": \"Error details here\"\n}\n```\n\n### Step 4: Verify Data in Your Application\n\n1. Visit your published application homepage\n2. You should see products displayed in the hero section\n3. Browse to the Products page to see all seeded products\n4. Check that districts and GI brands are available in filters\n\n## What Gets Seeded\n\n### Districts & GI Brands (Categories)\n- Lahore - Lahore Heritage Crafts\n- Gujranwala - Punjab Metal & Leather Works\n- Rawalpindi - Pothohari Crafts\n- Sahiwal - Sufi Craft Collection\n- Faisalabad - Faisalabadi Weaves\n- D.G. Khan - Saraiki Tribal Arts\n- Bahawalpur - Cholistani Heritage\n- Sargodha - Salt & Stone Crafts\n- Multan - Multani Crafts\n\n### Sample Vendors\n1. Ahmad Hassan (vendor1@sanatzar.pk) - Lahore\n2. Fatima Ali (vendor2@sanatzar.pk) - Multan\n3. Zainab Khan (vendor3@sanatzar.pk) - Bahawalpur\n\n### Sample Stores\n1. Lahore Heritage Emporium (Approved)\n2. Multan Artisan Collective (Approved)\n3. Bahawalpur Craft House (Approved)\n\n### Sample Products\n8 authentic handicraft products including:\n- Handcrafted Kundan Jewelry Set (Lahore)\n- Traditional Gota Embroidered Dupatta (Lahore)\n- Multani Blue Pottery Vase (Multan)\n- Handmade Multani Khussa (Multan)\n- Blue Pottery Decorative Plate (Multan)\n- Authentic Ralli Quilt (Bahawalpur)\n- Handmade Mukesh Embroidered Shawl (Bahawalpur)\n- Traditional Gotta Work Clutch (Bahawalpur)\n\n## Important Notes\n\n### Running Multiple Times\n- The seed script clears existing products before creating new ones\n- Categories, vendors, and stores are only created if they don't already exist\n- **Be careful**: Running the seed will delete all existing products\n\n### Security\n- Never share your `SEED_SECRET` publicly\n- Only run this endpoint once after initial deployment\n- Consider removing or disabling the endpoint after seeding if not needed\n\n### Production Database Safety\n- The seed script only modifies development database when run locally\n- When called via `/api/admin/seed`, it uses your production DATABASE_URL\n- Always backup your production data before running administrative scripts\n\n## Troubleshooting\n\n### \"Unauthorized - Invalid seed token\"\n- Verify your SEED_SECRET is correctly set in production environment\n- Ensure you're using `Bearer ` prefix in Authorization header\n- Check that you copied the complete secret value without extra spaces\n\n### \"Failed to seed database\"\n- Check the error message in the response for specific details\n- Verify your production database is accessible and healthy\n- Check application logs in Replit for more detailed error information\n\n### Products Not Showing\n- Confirm seed response was successful\n- Check that product images are accessible (they should be included in your deployment)\n- Verify the `/api/products` endpoint returns data\n- Check browser console for any JavaScript errors\n\n## Alternative: Manual Database Seeding\n\nIf you prefer to manually populate the database using SQL:\n\n1. Go to Replit's Database tool\n2. Select \"My Data\" tab\n3. Click \"SQL runner\"\n4. Run your INSERT statements manually\n\nHowever, using the `/api/admin/seed` endpoint is recommended as it ensures data consistency and includes all necessary relationships.\n","size_bytes":5096},"client/src/components/ThemeProvider.tsx":{"content":"import { createContext, useContext, useEffect, useState } from \"react\";\n\ntype Theme = \"light\" | \"dark\";\n\ninterface ThemeContextType {\n  theme: Theme;\n  toggleTheme: () => void;\n}\n\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined);\n\nexport function ThemeProvider({ children }: { children: React.ReactNode }) {\n  const [theme, setTheme] = useState<Theme>(() => {\n    const stored = localStorage.getItem(\"theme\");\n    return (stored === \"dark\" || stored === \"light\") ? stored : \"light\";\n  });\n\n  useEffect(() => {\n    localStorage.setItem(\"theme\", theme);\n    if (theme === \"dark\") {\n      document.documentElement.classList.add(\"dark\");\n    } else {\n      document.documentElement.classList.remove(\"dark\");\n    }\n  }, [theme]);\n\n  const toggleTheme = () => {\n    setTheme((prev) => (prev === \"light\" ? \"dark\" : \"light\"));\n  };\n\n  return (\n    <ThemeContext.Provider value={{ theme, toggleTheme }}>\n      {children}\n    </ThemeContext.Provider>\n  );\n}\n\nexport function useTheme() {\n  const context = useContext(ThemeContext);\n  if (!context) {\n    throw new Error(\"useTheme must be used within ThemeProvider\");\n  }\n  return context;\n}\n","size_bytes":1158},"client/src/pages/VendorRegister.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Store, Loader2 } from \"lucide-react\";\nimport { AuthDialog } from \"@/components/AuthDialog\";\n\nconst districts = [\n  { district: \"Lahore\", giBrand: \"Lahore Heritage Crafts\" },\n  { district: \"Gujranwala\", giBrand: \"Punjab Metal & Leather Works\" },\n  { district: \"Rawalpindi\", giBrand: \"Pothohari Crafts\" },\n  { district: \"Sahiwal\", giBrand: \"Sufi Craft Collection\" },\n  { district: \"Faisalabad\", giBrand: \"Faisalabadi Weaves\" },\n  { district: \"D.G. Khan\", giBrand: \"Saraiki Tribal Arts\" },\n  { district: \"Bahawalpur\", giBrand: \"Cholistani Heritage\" },\n  { district: \"Sargodha\", giBrand: \"Salt & Stone Crafts\" },\n  { district: \"Multan\", giBrand: \"Multani Crafts\" },\n];\n\nexport default function VendorRegister() {\n  const { user, isAuthenticated, isVendor } = useAuth();\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n\n  const [storeName, setStoreName] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [selectedDistrict, setSelectedDistrict] = useState(\"\");\n  const [selectedGIBrands, setSelectedGIBrands] = useState<string[]>([]);\n  const [authDialogOpen, setAuthDialogOpen] = useState(false);\n  const [authDialogTab, setAuthDialogTab] = useState<\"login\" | \"register\">(\"login\");\n\n  const registerMutation = useMutation({\n    mutationFn: async (data: { name: string; description: string; district: string; giBrands: string[] }) => {\n      const res = await apiRequest(\"POST\", \"/api/auth/register-vendor\", data);\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n      toast({\n        title: \"Registration Successful\",\n        description: \"Your vendor application has been submitted for review. You'll be notified once approved.\",\n      });\n      setLocation(\"/vendor/dashboard\");\n    },\n    onError: (error: any) => {\n      toast({\n        variant: \"destructive\",\n        title: \"Registration Failed\",\n        description: error.message || \"Failed to register as vendor. Please try again.\",\n      });\n    },\n  });\n\n  const handleGIBrandToggle = (giBrand: string) => {\n    setSelectedGIBrands((prev) =>\n      prev.includes(giBrand) ? prev.filter((b) => b !== giBrand) : [...prev, giBrand]\n    );\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!storeName.trim()) {\n      toast({\n        variant: \"destructive\",\n        title: \"Validation Error\",\n        description: \"Store name is required\",\n      });\n      return;\n    }\n\n    if (!selectedDistrict) {\n      toast({\n        variant: \"destructive\",\n        title: \"Validation Error\",\n        description: \"Please select your district\",\n      });\n      return;\n    }\n\n    if (selectedGIBrands.length === 0) {\n      toast({\n        variant: \"destructive\",\n        title: \"Validation Error\",\n        description: \"Please select at least one GI brand\",\n      });\n      return;\n    }\n\n    registerMutation.mutate({\n      name: storeName,\n      description,\n      district: selectedDistrict,\n      giBrands: selectedGIBrands,\n    });\n  };\n\n  if (!isAuthenticated) {\n    return (\n      <>\n        <div className=\"min-h-screen flex items-center justify-center p-4 bg-muted/30\">\n          <Card className=\"max-w-md w-full\">\n            <CardHeader className=\"space-y-2 text-center\">\n              <Store className=\"w-12 h-12 mx-auto text-primary\" />\n              <CardTitle>Become a Vendor</CardTitle>\n              <CardDescription>\n                You need to be logged in to register as a vendor\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <Button \n                onClick={() => {\n                  setAuthDialogTab(\"login\");\n                  setAuthDialogOpen(true);\n                }} \n                className=\"w-full\" \n                data-testid=\"button-login-vendor\"\n              >\n                Login to Continue\n              </Button>\n            </CardContent>\n          </Card>\n        </div>\n        <AuthDialog \n          open={authDialogOpen} \n          onOpenChange={setAuthDialogOpen}\n          defaultTab={authDialogTab}\n        />\n      </>\n    );\n  }\n\n  if (isVendor) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center p-4 bg-muted/30\">\n        <Card className=\"max-w-md w-full\">\n          <CardHeader className=\"space-y-2 text-center\">\n            <Store className=\"w-12 h-12 mx-auto text-primary\" />\n            <CardTitle>Already a Vendor</CardTitle>\n            <CardDescription>\n              You're already registered as a vendor\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <Button onClick={() => setLocation(\"/vendor/dashboard\")} className=\"w-full\" data-testid=\"button-goto-dashboard\">\n              Go to Dashboard\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  const availableGIBrands = selectedDistrict\n    ? districts.filter((d) => d.district === selectedDistrict).map((d) => d.giBrand)\n    : [];\n\n  return (\n    <div className=\"min-h-screen bg-muted/30 p-4 sm:p-6 lg:p-8\">\n      <div className=\"max-w-3xl mx-auto\">\n        <Card>\n          <CardHeader className=\"space-y-2\">\n            <div className=\"flex items-center gap-3\">\n              <Store className=\"w-8 h-8 text-primary\" />\n              <div>\n                <CardTitle className=\"text-2xl\">Register as Vendor</CardTitle>\n                <CardDescription>\n                  Create your store and start selling Punjab's authentic handicrafts\n                </CardDescription>\n              </div>\n            </div>\n          </CardHeader>\n          <CardContent>\n            <form onSubmit={handleSubmit} className=\"space-y-6\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"storeName\">Store Name *</Label>\n                <Input\n                  id=\"storeName\"\n                  placeholder=\"Enter your store name\"\n                  value={storeName}\n                  onChange={(e) => setStoreName(e.target.value)}\n                  data-testid=\"input-store-name\"\n                  required\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"description\">Store Description</Label>\n                <Textarea\n                  id=\"description\"\n                  placeholder=\"Tell customers about your crafts and heritage...\"\n                  value={description}\n                  onChange={(e) => setDescription(e.target.value)}\n                  rows={4}\n                  data-testid=\"textarea-description\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"district\">District *</Label>\n                <Select value={selectedDistrict} onValueChange={setSelectedDistrict}>\n                  <SelectTrigger id=\"district\" data-testid=\"select-district\">\n                    <SelectValue placeholder=\"Select your district\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {districts.map((d) => (\n                      <SelectItem key={d.district} value={d.district}>\n                        {d.district}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              {selectedDistrict && (\n                <div className=\"space-y-3\">\n                  <Label>GI Brands for {selectedDistrict} *</Label>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Select the Geographical Indication brands you'll be selling\n                  </p>\n                  <div className=\"space-y-2\">\n                    {availableGIBrands.map((giBrand) => (\n                      <div key={giBrand} className=\"flex items-center space-x-2\">\n                        <Checkbox\n                          id={`gi-${giBrand}`}\n                          checked={selectedGIBrands.includes(giBrand)}\n                          onCheckedChange={() => handleGIBrandToggle(giBrand)}\n                          data-testid={`checkbox-gi-${giBrand.toLowerCase().replace(/\\s+/g, '-')}`}\n                        />\n                        <Label\n                          htmlFor={`gi-${giBrand}`}\n                          className=\"font-normal cursor-pointer\"\n                        >\n                          {giBrand}\n                        </Label>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              <div className=\"bg-muted/50 p-4 rounded-md space-y-2\">\n                <h4 className=\"font-semibold text-sm\">Important Notes:</h4>\n                <ul className=\"text-sm text-muted-foreground space-y-1\">\n                  <li> Your store will be reviewed by our team before approval</li>\n                  <li> Only authentic GI-certified products can be listed</li>\n                  <li> You'll be notified via email about your approval status</li>\n                </ul>\n              </div>\n\n              <Button\n                type=\"submit\"\n                className=\"w-full\"\n                disabled={registerMutation.isPending}\n                data-testid=\"button-submit-vendor-registration\"\n              >\n                {registerMutation.isPending ? (\n                  <>\n                    <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                    Submitting Application...\n                  </>\n                ) : (\n                  \"Submit Vendor Application\"\n                )}\n              </Button>\n            </form>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","size_bytes":10447},"client/src/pages/vendor/Orders.tsx":{"content":"import { VendorDashboard } from \"./VendorDashboard\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { ShoppingCart, Package, User } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { formatPrice, toSafeNumber } from \"@/lib/utils/price\";\nimport { normalizeImagePath } from \"@/lib/utils/image\";\n\ntype OrderItem = {\n  id: string;\n  orderId: string;\n  productId: string;\n  storeId: string;\n  quantity: number;\n  price: string;\n  product: {\n    id: string;\n    title: string;\n    images: string[];\n    giBrand: string;\n  } | null;\n};\n\ntype Order = {\n  id: string;\n  buyerId: string;\n  total: string;\n  status: string;\n  paymentMethod: string | null;\n  shippingAddress: string | null;\n  createdAt: string;\n  items: OrderItem[];\n};\n\nexport default function VendorOrders() {\n  const [activeTab, setActiveTab] = useState(\"all\");\n\n  const { data: orders = [], isLoading } = useQuery<Order[]>({\n    queryKey: ['/api/vendor/orders'],\n  });\n\n  const filteredOrders = orders.filter(order => {\n    if (activeTab === \"all\") return true;\n    return order.status === activeTab;\n  });\n\n  const getStatusBadge = (status: string) => {\n    const statusConfig: Record<string, { variant: 'default' | 'secondary' | 'destructive' | 'outline', className?: string }> = {\n      pending: { variant: 'outline', className: 'border-yellow-500/50 text-yellow-700 dark:text-yellow-400' },\n      processing: { variant: 'outline', className: 'border-blue-500/50 text-blue-700 dark:text-blue-400' },\n      shipped: { variant: 'outline', className: 'border-purple-500/50 text-purple-700 dark:text-purple-400' },\n      delivered: { variant: 'outline', className: 'bg-green-500/10 text-green-700 dark:text-green-400 border-green-500/20' },\n      cancelled: { variant: 'destructive' },\n    };\n\n    const config = statusConfig[status] || { variant: 'secondary' };\n    \n    return (\n      <Badge variant={config.variant} className={config.className} data-testid={`badge-order-status-${status}`}>\n        {status.charAt(0).toUpperCase() + status.slice(1)}\n      </Badge>\n    );\n  };\n\n  return (\n    <VendorDashboard>\n      <div className=\"p-6 space-y-6\">\n        <div>\n          <h1 className=\"text-3xl font-bold\" data-testid=\"heading-orders\">Orders</h1>\n          <p className=\"text-muted-foreground\">View and manage your orders</p>\n        </div>\n\n        <Tabs value={activeTab} onValueChange={setActiveTab}>\n          <TabsList>\n            <TabsTrigger value=\"all\" data-testid=\"tab-all-orders\">\n              All ({orders.length})\n            </TabsTrigger>\n            <TabsTrigger value=\"pending\" data-testid=\"tab-pending-orders\">\n              Pending ({orders.filter(o => o.status === 'pending').length})\n            </TabsTrigger>\n            <TabsTrigger value=\"processing\" data-testid=\"tab-processing-orders\">\n              Processing ({orders.filter(o => o.status === 'processing').length})\n            </TabsTrigger>\n            <TabsTrigger value=\"shipped\" data-testid=\"tab-shipped-orders\">\n              Shipped ({orders.filter(o => o.status === 'shipped').length})\n            </TabsTrigger>\n            <TabsTrigger value=\"delivered\" data-testid=\"tab-delivered-orders\">\n              Delivered ({orders.filter(o => o.status === 'delivered').length})\n            </TabsTrigger>\n          </TabsList>\n\n          <TabsContent value={activeTab} className=\"mt-6\">\n            {isLoading ? (\n              <p className=\"text-muted-foreground\">Loading orders...</p>\n            ) : filteredOrders.length === 0 ? (\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <ShoppingCart className=\"w-5 h-5\" />\n                    No Orders\n                  </CardTitle>\n                  <CardDescription>\n                    {activeTab === \"all\"\n                      ? \"Orders will appear here when customers purchase your products\"\n                      : `No ${activeTab} orders found`}\n                  </CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <p className=\"text-sm text-muted-foreground\">\n                    {activeTab === \"all\"\n                      ? \"You'll be able to view order details and manage fulfillment from this page.\"\n                      : \"Check other tabs to view orders with different statuses.\"}\n                  </p>\n                </CardContent>\n              </Card>\n            ) : (\n              <div className=\"grid gap-4\">\n                {filteredOrders.map((order) => (\n                  <Card key={order.id}>\n                    <CardHeader>\n                      <div className=\"flex items-start justify-between gap-4\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-3 mb-2\">\n                            <CardTitle className=\"text-lg\" data-testid={`text-order-id-${order.id}`}>\n                              Order #{order.id.slice(0, 8)}\n                            </CardTitle>\n                            {getStatusBadge(order.status)}\n                          </div>\n                          <CardDescription>\n                            Placed on {new Date(order.createdAt).toLocaleDateString('en-US', {\n                              year: 'numeric',\n                              month: 'long',\n                              day: 'numeric',\n                              hour: '2-digit',\n                              minute: '2-digit',\n                            })}\n                          </CardDescription>\n                        </div>\n                        <div className=\"text-right\">\n                          <div className=\"text-sm text-muted-foreground mb-1\">Total</div>\n                          <div className=\"text-2xl font-bold\" data-testid={`text-order-total-${order.id}`}>\n                            {formatPrice(order.total)}\n                          </div>\n                        </div>\n                      </div>\n                    </CardHeader>\n                    <CardContent className=\"space-y-4\">\n                      {/* Order Items */}\n                      {order.items && order.items.length > 0 && (\n                        <div className=\"space-y-3\">\n                          <h4 className=\"font-medium text-sm\">Order Items:</h4>\n                          <div className=\"space-y-2\">\n                            {order.items.map((item) => (\n                              <div\n                                key={item.id}\n                                className=\"flex items-center gap-3 p-3 rounded-md bg-muted/50\"\n                                data-testid={`order-item-${item.id}`}\n                              >\n                                {item.product?.images?.[0] && (\n                                  <img\n                                    src={normalizeImagePath(item.product.images[0])}\n                                    alt={item.product.title}\n                                    className=\"w-12 h-12 object-cover rounded\"\n                                  />\n                                )}\n                                <div className=\"flex-1 min-w-0\">\n                                  <p className=\"font-medium truncate\" data-testid={`text-item-product-${item.id}`}>\n                                    {item.product?.title || 'Unknown Product'}\n                                  </p>\n                                  <p className=\"text-sm text-muted-foreground\">\n                                    Qty: {item.quantity}  PKR {parseFloat(item.price).toLocaleString()}\n                                  </p>\n                                  {item.product?.giBrand && (\n                                    <Badge variant=\"outline\" className=\"text-xs mt-1\">\n                                      {item.product.giBrand}\n                                    </Badge>\n                                  )}\n                                </div>\n                                <div className=\"text-right\">\n                                  <p className=\"font-semibold\" data-testid={`text-item-total-${item.id}`}>\n                                    {formatPrice(toSafeNumber(item.price) * item.quantity)}\n                                  </p>\n                                </div>\n                              </div>\n                            ))}\n                          </div>\n                        </div>\n                      )}\n\n                      {/* Order Metadata */}\n                      <div className=\"grid gap-3 text-sm border-t pt-4\">\n                        {order.buyerId && (\n                          <div className=\"flex items-center gap-2\">\n                            <User className=\"w-4 h-4 text-muted-foreground\" />\n                            <span className=\"text-muted-foreground\">Customer:</span>\n                            <span className=\"font-medium\" data-testid={`text-order-buyer-${order.id}`}>\n                              {order.buyerId.slice(0, 8)}...\n                            </span>\n                          </div>\n                        )}\n                        {order.paymentMethod && (\n                          <div className=\"flex items-center gap-2\">\n                            <Package className=\"w-4 h-4 text-muted-foreground\" />\n                            <span className=\"text-muted-foreground\">Payment:</span>\n                            <span className=\"font-medium capitalize\" data-testid={`text-order-payment-${order.id}`}>\n                              {order.paymentMethod}\n                            </span>\n                          </div>\n                        )}\n                        {order.shippingAddress && (\n                          <div className=\"flex items-start gap-2\">\n                            <Package className=\"w-4 h-4 text-muted-foreground mt-0.5\" />\n                            <div className=\"flex-1\">\n                              <span className=\"text-muted-foreground\">Shipping Address:</span>\n                              <p className=\"font-medium mt-1\" data-testid={`text-order-address-${order.id}`}>\n                                {order.shippingAddress}\n                              </p>\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            )}\n          </TabsContent>\n        </Tabs>\n      </div>\n    </VendorDashboard>\n  );\n}\n","size_bytes":10764},"client/src/pages/vendor/Products.tsx":{"content":"import { VendorDashboard } from \"./VendorDashboard\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Plus, Pencil, Trash2, Package as PackageIcon } from \"lucide-react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\nimport {\n  Form,\n  FormControl,\n  FormDescription,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { useState } from \"react\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { normalizeImagePath } from \"@/lib/utils/image\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\n\ntype Store = {\n  id: string;\n  name: string;\n  status: string;\n  district: string;\n  giBrands: string[];\n};\n\ntype Product = {\n  id: string;\n  title: string;\n  description: string | null;\n  price: string;\n  stock: number;\n  images: string[];\n  district: string;\n  giBrand: string;\n  status: string;\n  storeId: string;\n  createdAt: string;\n};\n\ntype Category = {\n  id: string;\n  district: string;\n  giBrand: string;\n  crafts: string[];\n};\n\nconst productFormSchema = z.object({\n  title: z.string().min(3, \"Title must be at least 3 characters\"),\n  description: z.string().min(10, \"Description must be at least 10 characters\"),\n  price: z.string().refine((val) => !isNaN(Number(val)) && Number(val) > 0, \"Price must be a positive number\"),\n  stock: z.string().refine((val) => !isNaN(Number(val)) && Number(val) >= 0, \"Stock must be a non-negative number\"),\n  district: z.string().min(1, \"Please select a district\"),\n  giBrand: z.string().min(1, \"Please select a GI brand\"),\n  images: z.string().optional(), // Will store uploaded image paths as JSON string\n});\n\ntype ProductFormValues = z.infer<typeof productFormSchema>;\n\nexport default function VendorProducts() {\n  const { toast } = useToast();\n  const [activeTab, setActiveTab] = useState(\"all\");\n  const [addDialogOpen, setAddDialogOpen] = useState(false);\n  const [editDialogOpen, setEditDialogOpen] = useState(false);\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  const [selectedProduct, setSelectedProduct] = useState<Product | null>(null);\n  const [uploadedImages, setUploadedImages] = useState<string[]>([]);\n  const [isUploading, setIsUploading] = useState(false);\n\n  const { data: stores = [] } = useQuery<Store[]>({\n    queryKey: ['/api/vendor/stores'],\n  });\n\n  const { data: categories = [] } = useQuery<Category[]>({\n    queryKey: ['/api/categories'],\n  });\n\n  const { data: vendorProducts = [], isLoading } = useQuery<Product[]>({\n    queryKey: ['/api/vendor/products'],\n  });\n\n  const store = stores[0];\n  \n  const filteredProducts = vendorProducts.filter(p => {\n    if (activeTab === \"all\") return true;\n    return p.status === activeTab;\n  });\n\n  const addForm = useForm<ProductFormValues>({\n    resolver: zodResolver(productFormSchema),\n    defaultValues: {\n      title: \"\",\n      description: \"\",\n      price: \"\",\n      stock: \"\",\n      district: store?.district || \"\",\n      giBrand: store?.giBrands?.[0] || \"\",\n      images: \"\",\n    },\n  });\n\n  const editForm = useForm<ProductFormValues>({\n    resolver: zodResolver(productFormSchema),\n  });\n\n  const addProductMutation = useMutation({\n    mutationFn: async (data: ProductFormValues) => {\n      if (!store) throw new Error(\"No store found\");\n      if (uploadedImages.length === 0) {\n        throw new Error(\"Please upload at least one image\");\n      }\n      return apiRequest('POST', '/api/products', {\n        ...data,\n        storeId: store.id,\n        price: data.price,\n        stock: parseInt(data.stock),\n        images: uploadedImages,\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/vendor/products'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/vendor/analytics'] });\n      setAddDialogOpen(false);\n      addForm.reset();\n      setUploadedImages([]);\n      toast({\n        title: \"Product added\",\n        description: \"Your product has been submitted for approval\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateProductMutation = useMutation({\n    mutationFn: async (data: ProductFormValues & { id: string }) => {\n      const { id, ...updateData } = data;\n      // Use uploaded images if available, otherwise keep existing images\n      const images = uploadedImages.length > 0 ? uploadedImages : selectedProduct?.images || [];\n      return apiRequest('PUT', `/api/products/${id}`, {\n        ...updateData,\n        price: updateData.price,\n        stock: parseInt(updateData.stock),\n        images,\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/vendor/products'] });\n      setEditDialogOpen(false);\n      setSelectedProduct(null);\n      setUploadedImages([]);\n      toast({\n        title: \"Product updated\",\n        description: \"Your product has been updated successfully\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteProductMutation = useMutation({\n    mutationFn: async (id: string) => {\n      return apiRequest('DELETE', `/api/products/${id}`, {});\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/vendor/products'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/vendor/analytics'] });\n      setDeleteDialogOpen(false);\n      setSelectedProduct(null);\n      toast({\n        title: \"Product deleted\",\n        description: \"Your product has been removed\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleEditProduct = (product: Product) => {\n    setSelectedProduct(product);\n    editForm.reset({\n      title: product.title,\n      description: product.description || \"\",\n      price: product.price,\n      stock: product.stock.toString(),\n      district: product.district,\n      giBrand: product.giBrand,\n      images: \"\",\n    });\n    // Show existing product images in preview\n    setUploadedImages(product.images || []);\n    setEditDialogOpen(true);\n  };\n\n  const handleDialogClose = (dialogType: 'add' | 'edit') => {\n    if (dialogType === 'add') {\n      setAddDialogOpen(false);\n      addForm.reset();\n    } else {\n      setEditDialogOpen(false);\n      setSelectedProduct(null);\n    }\n    setUploadedImages([]);\n  };\n\n  const handleDeleteProduct = (product: Product) => {\n    setSelectedProduct(product);\n    setDeleteDialogOpen(true);\n  };\n\n  const handleImageUpload = async (files: FileList | null) => {\n    if (!files || files.length === 0 || !store) return;\n\n    setIsUploading(true);\n    try {\n      const formData = new FormData();\n      Array.from(files).forEach(file => {\n        formData.append('images', file);\n      });\n\n      const response = await fetch(`/api/upload/product-images?storeId=${store.id}`, {\n        method: 'POST',\n        credentials: 'include',\n        body: formData,\n      });\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || 'Failed to upload images');\n      }\n\n      const data = await response.json();\n      setUploadedImages(data.images);\n      toast({\n        title: \"Images uploaded\",\n        description: `Successfully uploaded ${data.images.length} image(s)`,\n      });\n    } catch (error: any) {\n      toast({\n        title: \"Upload failed\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsUploading(false);\n    }\n  };\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case 'approved':\n        return <Badge className=\"bg-green-500/10 text-green-700 dark:text-green-400 border-green-500/20\">Approved</Badge>;\n      case 'pending':\n        return <Badge variant=\"outline\" className=\"border-yellow-500/50 text-yellow-700 dark:text-yellow-400\">Pending</Badge>;\n      case 'rejected':\n        return <Badge variant=\"destructive\">Rejected</Badge>;\n      default:\n        return <Badge variant=\"secondary\">{status}</Badge>;\n    }\n  };\n\n  const ProductFormFields = ({ form }: { form: ReturnType<typeof useForm<ProductFormValues>> }) => (\n    <>\n      <FormField\n        control={form.control}\n        name=\"title\"\n        render={({ field }) => (\n          <FormItem>\n            <FormLabel>Product Title</FormLabel>\n            <FormControl>\n              <Input placeholder=\"Handwoven Basket\" {...field} data-testid=\"input-product-title\" />\n            </FormControl>\n            <FormMessage />\n          </FormItem>\n        )}\n      />\n\n      <FormField\n        control={form.control}\n        name=\"description\"\n        render={({ field }) => (\n          <FormItem>\n            <FormLabel>Description</FormLabel>\n            <FormControl>\n              <Textarea \n                placeholder=\"Describe your product...\"\n                className=\"min-h-24\"\n                {...field}\n                data-testid=\"input-product-description\"\n              />\n            </FormControl>\n            <FormMessage />\n          </FormItem>\n        )}\n      />\n\n      <div className=\"grid grid-cols-2 gap-4\">\n        <FormField\n          control={form.control}\n          name=\"price\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Price (PKR)</FormLabel>\n              <FormControl>\n                <Input type=\"number\" placeholder=\"1500\" {...field} data-testid=\"input-product-price\" />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        <FormField\n          control={form.control}\n          name=\"stock\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Stock</FormLabel>\n              <FormControl>\n                <Input type=\"number\" placeholder=\"10\" {...field} data-testid=\"input-product-stock\" />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n      </div>\n\n      <FormField\n        control={form.control}\n        name=\"district\"\n        render={({ field }) => (\n          <FormItem>\n            <FormLabel>District</FormLabel>\n            <Select onValueChange={field.onChange} value={field.value}>\n              <FormControl>\n                <SelectTrigger data-testid=\"select-product-district\">\n                  <SelectValue placeholder=\"Select district\" />\n                </SelectTrigger>\n              </FormControl>\n              <SelectContent>\n                {categories.map((cat) => (\n                  <SelectItem key={cat.district} value={cat.district}>\n                    {cat.district}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n            <FormMessage />\n          </FormItem>\n        )}\n      />\n\n      <FormField\n        control={form.control}\n        name=\"giBrand\"\n        render={({ field }) => (\n          <FormItem>\n            <FormLabel>GI Brand</FormLabel>\n            <Select onValueChange={field.onChange} value={field.value}>\n              <FormControl>\n                <SelectTrigger data-testid=\"select-product-gi-brand\">\n                  <SelectValue placeholder=\"Select GI brand\" />\n                </SelectTrigger>\n              </FormControl>\n              <SelectContent>\n                {categories.map((cat) => (\n                  <SelectItem key={cat.giBrand} value={cat.giBrand}>\n                    {cat.giBrand}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n            <FormDescription>\n              Geographical Indication certified brand\n            </FormDescription>\n            <FormMessage />\n          </FormItem>\n        )}\n      />\n\n      <FormField\n        control={form.control}\n        name=\"images\"\n        render={({ field }) => (\n          <FormItem>\n            <FormLabel>Product Images</FormLabel>\n            <FormControl>\n              <div className=\"space-y-4\">\n                <Input \n                  type=\"file\" \n                  accept=\"image/jpeg,image/jpg,image/png,image/webp\"\n                  multiple\n                  max={5}\n                  onChange={(e) => handleImageUpload(e.target.files)}\n                  disabled={isUploading}\n                  data-testid=\"input-product-images\"\n                />\n                {isUploading && (\n                  <p className=\"text-sm text-muted-foreground\">Uploading images...</p>\n                )}\n                {uploadedImages.length > 0 && (\n                  <div className=\"flex gap-2 flex-wrap\">\n                    {uploadedImages.map((img, index) => (\n                      <div key={index} className=\"relative w-20 h-20 rounded border\">\n                        <img \n                          src={normalizeImagePath(img)} \n                          alt={`Product ${index + 1}`}\n                          className=\"w-full h-full object-cover rounded\"\n                        />\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </FormControl>\n            <FormDescription>\n              Upload up to 5 images (JPEG, PNG, WebP). Max 5MB per image.\n            </FormDescription>\n            <FormMessage />\n          </FormItem>\n        )}\n      />\n    </>\n  );\n\n  if (!store) {\n    return (\n      <VendorDashboard>\n        <div className=\"p-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle>No Store Found</CardTitle>\n              <CardDescription>Create a store first before adding products</CardDescription>\n            </CardHeader>\n          </Card>\n        </div>\n      </VendorDashboard>\n    );\n  }\n\n  if (store.status !== 'approved') {\n    return (\n      <VendorDashboard>\n        <div className=\"p-6 space-y-6\">\n          <div>\n            <h1 className=\"text-3xl font-bold\" data-testid=\"heading-products\">Products</h1>\n            <p className=\"text-muted-foreground\">Manage your product catalog</p>\n          </div>\n          <Card>\n            <CardHeader>\n              <CardTitle>Store Not Approved</CardTitle>\n              <CardDescription>Your store must be approved before you can add products</CardDescription>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-sm text-muted-foreground\">\n                Your store is currently {store.status}. Please wait for admin approval before adding products.\n              </p>\n            </CardContent>\n          </Card>\n        </div>\n      </VendorDashboard>\n    );\n  }\n\n  return (\n    <VendorDashboard>\n      <div className=\"p-6 space-y-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold\" data-testid=\"heading-products\">Products</h1>\n            <p className=\"text-muted-foreground\">Manage your product catalog</p>\n          </div>\n          <Dialog open={addDialogOpen} onOpenChange={(open) => {\n            setAddDialogOpen(open);\n            if (!open) handleDialogClose('add');\n          }}>\n            <DialogTrigger asChild>\n              <Button data-testid=\"button-add-product\">\n                <Plus className=\"w-4 h-4 mr-2\" />\n                Add Product\n              </Button>\n            </DialogTrigger>\n            <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n              <DialogHeader>\n                <DialogTitle>Add New Product</DialogTitle>\n                <DialogDescription>\n                  Add a new product to your store catalog\n                </DialogDescription>\n              </DialogHeader>\n              <Form {...addForm}>\n                <form onSubmit={addForm.handleSubmit((data) => addProductMutation.mutate(data))} className=\"space-y-4\">\n                  <ProductFormFields form={addForm} />\n                  <DialogFooter>\n                    <Button\n                      type=\"button\"\n                      variant=\"outline\"\n                      onClick={() => setAddDialogOpen(false)}\n                      data-testid=\"button-cancel-add\"\n                    >\n                      Cancel\n                    </Button>\n                    <Button type=\"submit\" disabled={addProductMutation.isPending} data-testid=\"button-submit-add\">\n                      {addProductMutation.isPending ? \"Adding...\" : \"Add Product\"}\n                    </Button>\n                  </DialogFooter>\n                </form>\n              </Form>\n            </DialogContent>\n          </Dialog>\n        </div>\n\n        <Tabs value={activeTab} onValueChange={setActiveTab}>\n          <TabsList>\n            <TabsTrigger value=\"all\" data-testid=\"tab-all-products\">\n              All ({vendorProducts.length})\n            </TabsTrigger>\n            <TabsTrigger value=\"approved\" data-testid=\"tab-approved-products\">\n              Approved ({vendorProducts.filter(p => p.status === 'approved').length})\n            </TabsTrigger>\n            <TabsTrigger value=\"pending\" data-testid=\"tab-pending-products\">\n              Pending ({vendorProducts.filter(p => p.status === 'pending').length})\n            </TabsTrigger>\n            <TabsTrigger value=\"rejected\" data-testid=\"tab-rejected-products\">\n              Rejected ({vendorProducts.filter(p => p.status === 'rejected').length})\n            </TabsTrigger>\n          </TabsList>\n\n          <TabsContent value={activeTab} className=\"mt-6\">\n            {isLoading ? (\n              <p className=\"text-muted-foreground\">Loading products...</p>\n            ) : filteredProducts.length === 0 ? (\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <PackageIcon className=\"w-5 h-5\" />\n                    No Products\n                  </CardTitle>\n                  <CardDescription>\n                    {activeTab === \"all\" \n                      ? \"You haven't added any products yet\"\n                      : `No ${activeTab} products found`}\n                  </CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Click \"Add Product\" to start building your catalog.\n                  </p>\n                </CardContent>\n              </Card>\n            ) : (\n              <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n                {filteredProducts.map((product) => (\n                  <Card key={product.id} className=\"overflow-hidden\">\n                    <div className=\"aspect-square relative bg-muted\">\n                      {product.images[0] && (\n                        <img\n                          src={normalizeImagePath(product.images[0])}\n                          alt={product.title}\n                          className=\"w-full h-full object-cover\"\n                          data-testid={`img-product-${product.id}`}\n                        />\n                      )}\n                    </div>\n                    <CardHeader>\n                      <div className=\"flex items-start justify-between gap-2\">\n                        <CardTitle className=\"text-lg line-clamp-1\" data-testid={`text-product-title-${product.id}`}>\n                          {product.title}\n                        </CardTitle>\n                        {getStatusBadge(product.status)}\n                      </div>\n                      <CardDescription className=\"line-clamp-2\">\n                        {product.description}\n                      </CardDescription>\n                    </CardHeader>\n                    <CardContent className=\"space-y-3\">\n                      <div className=\"flex items-center justify-between text-sm\">\n                        <span className=\"text-muted-foreground\">Price:</span>\n                        <span className=\"font-semibold\" data-testid={`text-product-price-${product.id}`}>\n                          PKR {parseFloat(product.price).toLocaleString()}\n                        </span>\n                      </div>\n                      <div className=\"flex items-center justify-between text-sm\">\n                        <span className=\"text-muted-foreground\">Stock:</span>\n                        <span data-testid={`text-product-stock-${product.id}`}>{product.stock} units</span>\n                      </div>\n                      <div className=\"flex items-center justify-between text-sm\">\n                        <span className=\"text-muted-foreground\">GI Brand:</span>\n                        <Badge variant=\"outline\" className=\"text-xs\" data-testid={`badge-product-gi-${product.id}`}>\n                          {product.giBrand}\n                        </Badge>\n                      </div>\n                      <div className=\"flex gap-2 pt-2\">\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          className=\"flex-1\"\n                          onClick={() => handleEditProduct(product)}\n                          data-testid={`button-edit-product-${product.id}`}\n                        >\n                          <Pencil className=\"w-3 h-3 mr-1\" />\n                          Edit\n                        </Button>\n                        <Button\n                          size=\"sm\"\n                          variant=\"destructive\"\n                          className=\"flex-1\"\n                          onClick={() => handleDeleteProduct(product)}\n                          data-testid={`button-delete-product-${product.id}`}\n                        >\n                          <Trash2 className=\"w-3 h-3 mr-1\" />\n                          Delete\n                        </Button>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            )}\n          </TabsContent>\n        </Tabs>\n\n        {/* Edit Dialog */}\n        <Dialog open={editDialogOpen} onOpenChange={(open) => {\n          setEditDialogOpen(open);\n          if (!open) handleDialogClose('edit');\n        }}>\n          <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n            <DialogHeader>\n              <DialogTitle>Edit Product</DialogTitle>\n              <DialogDescription>\n                Update your product details\n              </DialogDescription>\n            </DialogHeader>\n            <Form {...editForm}>\n              <form\n                onSubmit={editForm.handleSubmit((data) =>\n                  selectedProduct && updateProductMutation.mutate({ ...data, id: selectedProduct.id })\n                )}\n                className=\"space-y-4\"\n              >\n                <ProductFormFields form={editForm} />\n                <DialogFooter>\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    onClick={() => setEditDialogOpen(false)}\n                    data-testid=\"button-cancel-edit\"\n                  >\n                    Cancel\n                  </Button>\n                  <Button type=\"submit\" disabled={updateProductMutation.isPending} data-testid=\"button-submit-edit\">\n                    {updateProductMutation.isPending ? \"Updating...\" : \"Update Product\"}\n                  </Button>\n                </DialogFooter>\n              </form>\n            </Form>\n          </DialogContent>\n        </Dialog>\n\n        {/* Delete Confirmation Dialog */}\n        <AlertDialog open={deleteDialogOpen} onOpenChange={setDeleteDialogOpen}>\n          <AlertDialogContent>\n            <AlertDialogHeader>\n              <AlertDialogTitle>Delete Product</AlertDialogTitle>\n              <AlertDialogDescription>\n                Are you sure you want to delete \"{selectedProduct?.title}\"? This action cannot be undone.\n              </AlertDialogDescription>\n            </AlertDialogHeader>\n            <AlertDialogFooter>\n              <AlertDialogCancel data-testid=\"button-cancel-delete\">Cancel</AlertDialogCancel>\n              <AlertDialogAction\n                onClick={() => selectedProduct && deleteProductMutation.mutate(selectedProduct.id)}\n                className=\"bg-destructive text-destructive-foreground hover-elevate active-elevate-2\"\n                data-testid=\"button-confirm-delete\"\n              >\n                {deleteProductMutation.isPending ? \"Deleting...\" : \"Delete\"}\n              </AlertDialogAction>\n            </AlertDialogFooter>\n          </AlertDialogContent>\n        </AlertDialog>\n      </div>\n    </VendorDashboard>\n  );\n}\n","size_bytes":25631},"client/src/pages/vendor/Overview.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { VendorDashboard } from \"./VendorDashboard\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { CheckCircle2, Circle, Store as StoreIcon, Package, ShoppingCart, DollarSign, AlertCircle, Clock } from \"lucide-react\";\nimport { Link } from \"wouter\";\nimport { formatPrice } from \"@/lib/utils/price\";\n\ntype Store = {\n  id: string;\n  name: string;\n  description: string | null;\n  district: string;\n  giBrands: string[];\n  status: string;\n  vendorId: string;\n  createdAt: string;\n};\n\ntype Analytics = {\n  totalRevenue: string; // Decimal field serialized as string for precision\n  totalEarnings: string; // Decimal field serialized as string for precision\n  totalOrders: number;\n  totalProducts: number;\n  totalStores: number;\n};\n\ntype Order = {\n  id: string;\n  status: string;\n};\n\nexport default function VendorOverview() {\n  const { data: stores, isLoading: loadingStores } = useQuery<Store[]>({\n    queryKey: ['/api/vendor/stores'],\n  });\n\n  const { data: analytics, isLoading: loadingAnalytics } = useQuery<Analytics>({\n    queryKey: ['/api/vendor/analytics'],\n  });\n\n  const { data: orders = [] } = useQuery<Order[]>({\n    queryKey: ['/api/vendor/orders'],\n  });\n\n  const store = stores?.[0];\n  const pendingOrders = orders.filter(o => o.status === 'pending').length;\n  const isStoreApproved = store?.status === 'approved';\n  const hasProducts = (analytics?.totalProducts || 0) > 0;\n  const hasOrders = (analytics?.totalOrders || 0) > 0;\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case 'approved':\n        return <Badge className=\"bg-green-500/10 text-green-700 dark:text-green-400 border-green-500/20\" data-testid=\"badge-store-approved\">Approved</Badge>;\n      case 'pending':\n        return <Badge variant=\"outline\" className=\"border-yellow-500/50 text-yellow-700 dark:text-yellow-400\" data-testid=\"badge-store-pending\">Pending Approval</Badge>;\n      case 'rejected':\n        return <Badge variant=\"destructive\" data-testid=\"badge-store-rejected\">Rejected</Badge>;\n      default:\n        return <Badge variant=\"secondary\">{status}</Badge>;\n    }\n  };\n\n  if (loadingStores || loadingAnalytics) {\n    return (\n      <VendorDashboard>\n        <div className=\"p-6\">\n          <p className=\"text-muted-foreground\">Loading...</p>\n        </div>\n      </VendorDashboard>\n    );\n  }\n\n  return (\n    <VendorDashboard>\n      <div className=\"p-6 space-y-6\">\n        <div>\n          <div className=\"flex items-center justify-between mb-2\">\n            <h1 className=\"text-3xl font-bold\" data-testid=\"heading-overview\">\n              {store ? store.name : 'Vendor Overview'}\n            </h1>\n            {store && getStatusBadge(store.status)}\n          </div>\n          <p className=\"text-muted-foreground\">\n            {store ? `${store.district}  ${store.giBrands.join(', ')}` : 'Welcome to your vendor dashboard'}\n          </p>\n        </div>\n\n        {!store && (\n          <Alert>\n            <AlertCircle className=\"h-4 w-4\" />\n            <AlertDescription data-testid=\"alert-no-store\">\n              You haven't created a store yet. <Link href=\"/vendor/store\" className=\"text-primary underline hover:no-underline\">Create your store</Link> to start selling.\n            </AlertDescription>\n          </Alert>\n        )}\n\n        {store && store.status === 'pending' && (\n          <Alert>\n            <Clock className=\"h-4 w-4\" />\n            <AlertDescription data-testid=\"alert-pending-approval\">\n              Your store is pending approval. Once approved by an admin, you'll be able to add products and start selling.\n            </AlertDescription>\n          </Alert>\n        )}\n\n        {store && store.status === 'rejected' && (\n          <Alert variant=\"destructive\">\n            <AlertCircle className=\"h-4 w-4\" />\n            <AlertDescription data-testid=\"alert-store-rejected\">\n              Your store application was rejected. Please contact support for more information.\n            </AlertDescription>\n          </Alert>\n        )}\n\n        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Total Products</CardTitle>\n              <Package className=\"w-4 h-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\" data-testid=\"metric-total-products\">\n                {analytics?.totalProducts || 0}\n              </div>\n              <p className=\"text-xs text-muted-foreground\">\n                {!analytics?.totalProducts ? 'No products yet' : 'Products listed'}\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Total Orders</CardTitle>\n              <ShoppingCart className=\"w-4 h-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\" data-testid=\"metric-total-orders\">\n                {analytics?.totalOrders || 0}\n              </div>\n              <p className=\"text-xs text-muted-foreground\">\n                {!analytics?.totalOrders ? 'No orders yet' : 'Total orders'}\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Pending Orders</CardTitle>\n              <Clock className=\"w-4 h-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\" data-testid=\"metric-pending-orders\">\n                {pendingOrders}\n              </div>\n              <p className=\"text-xs text-muted-foreground\">\n                {pendingOrders === 0 ? 'All caught up' : 'Need attention'}\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Total Earnings</CardTitle>\n              <DollarSign className=\"w-4 h-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\" data-testid=\"metric-total-revenue\">\n                {formatPrice(analytics?.totalEarnings)}\n              </div>\n              <p className=\"text-xs text-muted-foreground\">\n                {!analytics?.totalEarnings || analytics.totalEarnings === '0.00' ? 'No sales yet' : 'Your earnings'}\n              </p>\n            </CardContent>\n          </Card>\n        </div>\n\n        <Card>\n          <CardHeader>\n            <CardTitle>Getting Started</CardTitle>\n            <CardDescription>Complete these steps to start selling on Sanatzar</CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"flex items-start gap-3\">\n              {store ? (\n                <CheckCircle2 className=\"w-5 h-5 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0\" />\n              ) : (\n                <Circle className=\"w-5 h-5 text-muted-foreground mt-0.5 flex-shrink-0\" />\n              )}\n              <div className=\"flex-1\">\n                <p className={store ? \"font-medium\" : \"text-muted-foreground\"} data-testid=\"checklist-create-store\">\n                  Create your store\n                </p>\n                {!store && (\n                  <p className=\"text-sm text-muted-foreground mt-1\">\n                    <Link href=\"/vendor/store\" className=\"text-primary underline hover:no-underline\">Set up your store</Link> with your district and GI brands\n                  </p>\n                )}\n              </div>\n            </div>\n\n            <div className=\"flex items-start gap-3\">\n              {isStoreApproved ? (\n                <CheckCircle2 className=\"w-5 h-5 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0\" />\n              ) : (\n                <Circle className=\"w-5 h-5 text-muted-foreground mt-0.5 flex-shrink-0\" />\n              )}\n              <div className=\"flex-1\">\n                <p className={isStoreApproved ? \"font-medium\" : \"text-muted-foreground\"} data-testid=\"checklist-store-approval\">\n                  Wait for store approval\n                </p>\n                {store && !isStoreApproved && (\n                  <p className=\"text-sm text-muted-foreground mt-1\">\n                    An admin will review your store application\n                  </p>\n                )}\n              </div>\n            </div>\n\n            <div className=\"flex items-start gap-3\">\n              {hasProducts ? (\n                <CheckCircle2 className=\"w-5 h-5 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0\" />\n              ) : (\n                <Circle className=\"w-5 h-5 text-muted-foreground mt-0.5 flex-shrink-0\" />\n              )}\n              <div className=\"flex-1\">\n                <p className={hasProducts ? \"font-medium\" : \"text-muted-foreground\"} data-testid=\"checklist-add-products\">\n                  Add your first product\n                </p>\n                {!hasProducts && isStoreApproved && (\n                  <p className=\"text-sm text-muted-foreground mt-1\">\n                    <Link href=\"/vendor/products\" className=\"text-primary underline hover:no-underline\">Add products</Link> to your store catalog\n                  </p>\n                )}\n              </div>\n            </div>\n\n            <div className=\"flex items-start gap-3\">\n              {hasOrders ? (\n                <CheckCircle2 className=\"w-5 h-5 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0\" />\n              ) : (\n                <Circle className=\"w-5 h-5 text-muted-foreground mt-0.5 flex-shrink-0\" />\n              )}\n              <div className=\"flex-1\">\n                <p className={hasOrders ? \"font-medium\" : \"text-muted-foreground\"} data-testid=\"checklist-first-order\">\n                  Receive your first order\n                </p>\n                {!hasOrders && (\n                  <p className=\"text-sm text-muted-foreground mt-1\">\n                    Start earning when customers purchase your products\n                  </p>\n                )}\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </VendorDashboard>\n  );\n}\n","size_bytes":10765},"client/src/pages/vendor/VendorDashboard.tsx":{"content":"import { useAuth } from \"@/hooks/use-auth\";\nimport { useLocation } from \"wouter\";\nimport { useEffect } from \"react\";\nimport { SidebarProvider, SidebarTrigger } from \"@/components/ui/sidebar\";\nimport { VendorSidebar } from \"@/components/VendorSidebar\";\nimport { Button } from \"@/components/ui/button\";\nimport { Moon, Sun } from \"lucide-react\";\nimport { useTheme } from \"@/components/ThemeProvider\";\n\ninterface VendorDashboardProps {\n  children: React.ReactNode;\n}\n\nexport function VendorDashboard({ children }: VendorDashboardProps) {\n  const { user, isVendor, isLoading } = useAuth();\n  const [, setLocation] = useLocation();\n  const { theme, toggleTheme } = useTheme();\n\n  useEffect(() => {\n    if (!isLoading && !isVendor) {\n      setLocation(\"/\");\n    }\n  }, [isVendor, isLoading, setLocation]);\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <p className=\"text-muted-foreground\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!isVendor) {\n    return null;\n  }\n\n  const style = {\n    \"--sidebar-width\": \"16rem\",\n    \"--sidebar-width-icon\": \"3rem\",\n  };\n\n  return (\n    <SidebarProvider style={style as React.CSSProperties}>\n      <div className=\"flex h-screen w-full\">\n        <VendorSidebar />\n        <div className=\"flex flex-col flex-1\">\n          <header className=\"flex items-center justify-between p-4 border-b bg-background\">\n            <SidebarTrigger data-testid=\"button-sidebar-toggle\" />\n            <div className=\"flex items-center gap-2\">\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                onClick={toggleTheme}\n                data-testid=\"button-theme-toggle\"\n                aria-label=\"Toggle theme\"\n              >\n                {theme === \"dark\" ? <Sun className=\"w-5 h-5\" /> : <Moon className=\"w-5 h-5\" />}\n              </Button>\n            </div>\n          </header>\n          <main className=\"flex-1 overflow-auto\">\n            {children}\n          </main>\n        </div>\n      </div>\n    </SidebarProvider>\n  );\n}\n","size_bytes":2112},"client/src/pages/vendor/Store.tsx":{"content":"import { VendorDashboard } from \"./VendorDashboard\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { AlertCircle, Store as StoreIcon, CheckCircle2, Clock } from \"lucide-react\";\nimport {\n  Form,\n  FormControl,\n  FormDescription,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { useState } from \"react\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\n\ntype Store = {\n  id: string;\n  name: string;\n  description: string | null;\n  district: string;\n  giBrands: string[];\n  status: string;\n  vendorId: string;\n  createdAt: string;\n};\n\ntype Category = {\n  id: string;\n  district: string;\n  giBrand: string;\n  crafts: string[];\n};\n\nconst storeFormSchema = z.object({\n  name: z.string().min(3, \"Store name must be at least 3 characters\"),\n  description: z.string().min(10, \"Description must be at least 10 characters\"),\n  district: z.string().min(1, \"Please select a district\"),\n  giBrands: z.array(z.string()).min(1, \"Please select at least one GI brand\"),\n});\n\ntype StoreFormValues = z.infer<typeof storeFormSchema>;\n\nexport default function VendorStore() {\n  const { toast } = useToast();\n  const [isEditing, setIsEditing] = useState(false);\n\n  const { data: stores = [], isLoading: loadingStores } = useQuery<Store[]>({\n    queryKey: ['/api/vendor/stores'],\n  });\n\n  const { data: categories = [] } = useQuery<Category[]>({\n    queryKey: ['/api/categories'],\n  });\n\n  const store = stores[0];\n\n  const form = useForm<StoreFormValues>({\n    resolver: zodResolver(storeFormSchema),\n    defaultValues: {\n      name: store?.name || \"\",\n      description: store?.description || \"\",\n      district: store?.district || \"\",\n      giBrands: store?.giBrands || [],\n    },\n  });\n\n  const createStoreMutation = useMutation({\n    mutationFn: async (data: StoreFormValues) => {\n      return apiRequest('POST', '/api/stores', data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/vendor/stores'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/vendor/analytics'] });\n      setIsEditing(false);\n      toast({\n        title: \"Store created\",\n        description: \"Your store has been submitted for approval\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateStoreMutation = useMutation({\n    mutationFn: async (data: StoreFormValues) => {\n      if (!store) throw new Error(\"No store found\");\n      return apiRequest('PUT', `/api/stores/${store.id}`, data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/vendor/stores'] });\n      setIsEditing(false);\n      toast({\n        title: \"Store updated\",\n        description: \"Your store information has been updated\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubmit = (data: StoreFormValues) => {\n    if (store) {\n      updateStoreMutation.mutate(data);\n    } else {\n      createStoreMutation.mutate(data);\n    }\n  };\n\n  const handleEdit = () => {\n    if (store) {\n      form.reset({\n        name: store.name,\n        description: store.description || \"\",\n        district: store.district,\n        giBrands: store.giBrands,\n      });\n    }\n    setIsEditing(true);\n  };\n\n  const handleCancel = () => {\n    if (store) {\n      form.reset({\n        name: store.name,\n        description: store.description || \"\",\n        district: store.district,\n        giBrands: store.giBrands,\n      });\n    }\n    setIsEditing(false);\n  };\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case 'approved':\n        return (\n          <Badge className=\"bg-green-500/10 text-green-700 dark:text-green-400 border-green-500/20\" data-testid=\"badge-store-approved\">\n            <CheckCircle2 className=\"w-3 h-3 mr-1\" />\n            Approved\n          </Badge>\n        );\n      case 'pending':\n        return (\n          <Badge variant=\"outline\" className=\"border-yellow-500/50 text-yellow-700 dark:text-yellow-400\" data-testid=\"badge-store-pending\">\n            <Clock className=\"w-3 h-3 mr-1\" />\n            Pending Approval\n          </Badge>\n        );\n      case 'rejected':\n        return (\n          <Badge variant=\"destructive\" data-testid=\"badge-store-rejected\">\n            <AlertCircle className=\"w-3 h-3 mr-1\" />\n            Rejected\n          </Badge>\n        );\n      default:\n        return <Badge variant=\"secondary\">{status}</Badge>;\n    }\n  };\n\n  const selectedDistrictCategories = categories.filter(\n    cat => cat.district === form.watch('district')\n  );\n\n  if (loadingStores) {\n    return (\n      <VendorDashboard>\n        <div className=\"p-6\">\n          <p className=\"text-muted-foreground\">Loading...</p>\n        </div>\n      </VendorDashboard>\n    );\n  }\n\n  return (\n    <VendorDashboard>\n      <div className=\"p-6 space-y-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold\" data-testid=\"heading-store-settings\">Store Settings</h1>\n            <p className=\"text-muted-foreground\">Manage your store information and preferences</p>\n          </div>\n          {store && !isEditing && (\n            <Button onClick={handleEdit} data-testid=\"button-edit-store\">\n              Edit Store\n            </Button>\n          )}\n        </div>\n\n        {store && store.status === 'pending' && (\n          <Alert>\n            <Clock className=\"h-4 w-4\" />\n            <AlertDescription data-testid=\"alert-pending-approval\">\n              Your store is pending approval. Updates will also require re-approval by an admin.\n            </AlertDescription>\n          </Alert>\n        )}\n\n        {store && store.status === 'rejected' && (\n          <Alert variant=\"destructive\">\n            <AlertCircle className=\"h-4 w-4\" />\n            <AlertDescription data-testid=\"alert-store-rejected\">\n              Your store application was rejected. Please contact support for more information or make changes and resubmit.\n            </AlertDescription>\n          </Alert>\n        )}\n\n        <Card>\n          <CardHeader>\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <StoreIcon className=\"w-5 h-5\" />\n                  {store ? 'Store Information' : 'Create Your Store'}\n                </CardTitle>\n                <CardDescription>\n                  {store \n                    ? 'View and update your store details'\n                    : 'Set up your store to start selling on Sanatzar'}\n                </CardDescription>\n              </div>\n              {store && getStatusBadge(store.status)}\n            </div>\n          </CardHeader>\n          <CardContent>\n            {!store || isEditing ? (\n              <Form {...form}>\n                <form onSubmit={form.handleSubmit(handleSubmit)} className=\"space-y-6\">\n                  <FormField\n                    control={form.control}\n                    name=\"name\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Store Name</FormLabel>\n                        <FormControl>\n                          <Input placeholder=\"My Handicraft Store\" {...field} data-testid=\"input-store-name\" />\n                        </FormControl>\n                        <FormDescription>\n                          This will be displayed to customers\n                        </FormDescription>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"description\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Description</FormLabel>\n                        <FormControl>\n                          <Textarea\n                            placeholder=\"Tell customers about your store and crafts...\"\n                            className=\"min-h-32\"\n                            {...field}\n                            data-testid=\"input-store-description\"\n                          />\n                        </FormControl>\n                        <FormDescription>\n                          Describe your store, your craft heritage, and what makes your products special\n                        </FormDescription>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"district\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>District</FormLabel>\n                        <Select onValueChange={field.onChange} value={field.value}>\n                          <FormControl>\n                            <SelectTrigger data-testid=\"select-store-district\">\n                              <SelectValue placeholder=\"Select your district\" />\n                            </SelectTrigger>\n                          </FormControl>\n                          <SelectContent>\n                            {categories.map((cat) => (\n                              <SelectItem key={cat.district} value={cat.district}>\n                                {cat.district}\n                              </SelectItem>\n                            ))}\n                          </SelectContent>\n                        </Select>\n                        <FormDescription>\n                          Select the district where your crafts originate\n                        </FormDescription>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"giBrands\"\n                    render={() => (\n                      <FormItem>\n                        <FormLabel>GI Brands (Geographical Indication)</FormLabel>\n                        <FormDescription>\n                          Select the GI certified brands your store will sell\n                        </FormDescription>\n                        <div className=\"space-y-3 mt-3\">\n                          {selectedDistrictCategories.length === 0 ? (\n                            <p className=\"text-sm text-muted-foreground\">\n                              Please select a district first\n                            </p>\n                          ) : (\n                            selectedDistrictCategories.map((cat) => (\n                              <FormField\n                                key={cat.giBrand}\n                                control={form.control}\n                                name=\"giBrands\"\n                                render={({ field }) => (\n                                  <FormItem className=\"flex items-start space-x-3 space-y-0\">\n                                    <FormControl>\n                                      <Checkbox\n                                        checked={field.value?.includes(cat.giBrand)}\n                                        onCheckedChange={(checked) => {\n                                          const updatedValue = checked\n                                            ? [...field.value, cat.giBrand]\n                                            : field.value.filter(val => val !== cat.giBrand);\n                                          field.onChange(updatedValue);\n                                        }}\n                                        data-testid={`checkbox-gi-brand-${cat.giBrand}`}\n                                      />\n                                    </FormControl>\n                                    <div className=\"space-y-1 leading-none\">\n                                      <FormLabel className=\"font-normal cursor-pointer\">\n                                        {cat.giBrand}\n                                      </FormLabel>\n                                      <p className=\"text-xs text-muted-foreground\">\n                                        Crafts: {cat.crafts.join(', ')}\n                                      </p>\n                                    </div>\n                                  </FormItem>\n                                )}\n                              />\n                            ))\n                          )}\n                        </div>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <div className=\"flex gap-3\">\n                    <Button\n                      type=\"submit\"\n                      disabled={createStoreMutation.isPending || updateStoreMutation.isPending}\n                      data-testid=\"button-submit-store\"\n                    >\n                      {createStoreMutation.isPending || updateStoreMutation.isPending\n                        ? \"Saving...\"\n                        : store\n                        ? \"Update Store\"\n                        : \"Create Store\"}\n                    </Button>\n                    {isEditing && store && (\n                      <Button\n                        type=\"button\"\n                        variant=\"outline\"\n                        onClick={handleCancel}\n                        data-testid=\"button-cancel-store\"\n                      >\n                        Cancel\n                      </Button>\n                    )}\n                  </div>\n                </form>\n              </Form>\n            ) : (\n              <div className=\"space-y-6\">\n                <div>\n                  <h3 className=\"text-sm font-medium text-muted-foreground mb-1\">Store Name</h3>\n                  <p className=\"text-base\" data-testid=\"text-store-name\">{store.name}</p>\n                </div>\n\n                <div>\n                  <h3 className=\"text-sm font-medium text-muted-foreground mb-1\">Description</h3>\n                  <p className=\"text-base\" data-testid=\"text-store-description\">\n                    {store.description || 'No description provided'}\n                  </p>\n                </div>\n\n                <div>\n                  <h3 className=\"text-sm font-medium text-muted-foreground mb-1\">District</h3>\n                  <p className=\"text-base\" data-testid=\"text-store-district\">{store.district}</p>\n                </div>\n\n                <div>\n                  <h3 className=\"text-sm font-medium text-muted-foreground mb-2\">GI Brands</h3>\n                  <div className=\"flex flex-wrap gap-2\">\n                    {store.giBrands.map((brand) => (\n                      <Badge key={brand} variant=\"outline\" data-testid={`badge-gi-brand-${brand}`}>\n                        {brand}\n                      </Badge>\n                    ))}\n                  </div>\n                </div>\n\n                <div>\n                  <h3 className=\"text-sm font-medium text-muted-foreground mb-1\">Created</h3>\n                  <p className=\"text-base\">\n                    {new Date(store.createdAt).toLocaleDateString('en-US', {\n                      year: 'numeric',\n                      month: 'long',\n                      day: 'numeric',\n                    })}\n                  </p>\n                </div>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    </VendorDashboard>\n  );\n}\n","size_bytes":16363},"client/src/hooks/use-auth.ts":{"content":"import { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport type { User, LoginInput, RegisterInput } from \"@shared/schema\";\n\nexport function useAuth() {\n  const { data: user, isLoading } = useQuery<User | null>({\n    queryKey: [\"/api/auth/user\"],\n    retry: false,\n    staleTime: 5 * 60 * 1000,\n  });\n\n  const loginMutation = useMutation({\n    mutationFn: async (credentials: LoginInput) => {\n      const response = await apiRequest(\"POST\", \"/api/auth/login\", credentials);\n      return response;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n    },\n  });\n\n  const registerMutation = useMutation({\n    mutationFn: async (data: RegisterInput) => {\n      const response = await apiRequest(\"POST\", \"/api/auth/register\", data);\n      return response;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n    },\n  });\n\n  const logoutMutation = useMutation({\n    mutationFn: async () => {\n      await apiRequest(\"POST\", \"/api/auth/logout\", {});\n    },\n    onSuccess: () => {\n      // Immediately clear the user data\n      queryClient.setQueryData([\"/api/auth/user\"], null);\n      // Then invalidate to ensure fresh data on next fetch\n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n    },\n  });\n\n  return {\n    user: user ?? null,\n    isLoading,\n    isAuthenticated: !!user,\n    isVendor: user?.role === \"vendor\",\n    isAdmin: user?.role === \"admin\",\n    isBuyer: user?.role === \"buyer\",\n    login: loginMutation.mutate,\n    register: registerMutation.mutate,\n    logout: logoutMutation.mutate,\n    isLoggingIn: loginMutation.isPending,\n    isRegistering: registerMutation.isPending,\n    isLoggingOut: logoutMutation.isPending,\n    loginError: loginMutation.error,\n    registerError: registerMutation.error,\n  };\n}\n","size_bytes":1922},"client/src/components/AuthDialog.tsx":{"content":"import { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { registerSchema, loginSchema, type RegisterInput, type LoginInput } from \"@shared/schema\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface AuthDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  defaultTab?: \"login\" | \"register\";\n}\n\nexport function AuthDialog({ open, onOpenChange, defaultTab = \"login\" }: AuthDialogProps) {\n  const [activeTab, setActiveTab] = useState(defaultTab);\n  const { login, register, isLoggingIn, isRegistering, loginError, registerError } = useAuth();\n  const { toast } = useToast();\n\n  const loginForm = useForm<LoginInput>({\n    resolver: zodResolver(loginSchema),\n    defaultValues: {\n      email: \"\",\n      password: \"\",\n    },\n  });\n\n  const registerForm = useForm<RegisterInput>({\n    resolver: zodResolver(registerSchema),\n    defaultValues: {\n      email: \"\",\n      password: \"\",\n      firstName: \"\",\n      lastName: \"\",\n    },\n  });\n\n  const handleLogin = (data: LoginInput) => {\n    login(data, {\n      onSuccess: () => {\n        toast({\n          title: \"Welcome back!\",\n          description: \"You have successfully logged in.\",\n        });\n        onOpenChange(false);\n        loginForm.reset();\n      },\n      onError: (error: any) => {\n        toast({\n          variant: \"destructive\",\n          title: \"Login failed\",\n          description: error?.message || \"Invalid email or password\",\n        });\n      },\n    });\n  };\n\n  const handleRegister = (data: RegisterInput) => {\n    register(data, {\n      onSuccess: () => {\n        toast({\n          title: \"Account created!\",\n          description: \"Welcome to Sanatzar. You are now logged in.\",\n        });\n        onOpenChange(false);\n        registerForm.reset();\n      },\n      onError: (error: any) => {\n        toast({\n          variant: \"destructive\",\n          title: \"Registration failed\",\n          description: error?.message || \"Failed to create account\",\n        });\n      },\n    });\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-md\">\n        <DialogHeader>\n          <DialogTitle>Welcome to Sanatzar</DialogTitle>\n          <DialogDescription>\n            Sign in to your account or create a new one to get started\n          </DialogDescription>\n        </DialogHeader>\n\n        <Tabs value={activeTab} onValueChange={(v) => setActiveTab(v as \"login\" | \"register\")}>\n          <TabsList className=\"grid w-full grid-cols-2\">\n            <TabsTrigger value=\"login\" data-testid=\"tab-login\">Login</TabsTrigger>\n            <TabsTrigger value=\"register\" data-testid=\"tab-register\">Register</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"login\" className=\"space-y-4\">\n            <Form {...loginForm}>\n              <form onSubmit={loginForm.handleSubmit(handleLogin)} className=\"space-y-4\">\n                <FormField\n                  control={loginForm.control}\n                  name=\"email\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Email</FormLabel>\n                      <FormControl>\n                        <Input\n                          type=\"email\"\n                          placeholder=\"your@email.com\"\n                          data-testid=\"input-login-email\"\n                          {...field}\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={loginForm.control}\n                  name=\"password\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Password</FormLabel>\n                      <FormControl>\n                        <Input\n                          type=\"password\"\n                          placeholder=\"\"\n                          data-testid=\"input-login-password\"\n                          {...field}\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <Button\n                  type=\"submit\"\n                  className=\"w-full\"\n                  disabled={isLoggingIn}\n                  data-testid=\"button-login-submit\"\n                >\n                  {isLoggingIn ? \"Logging in...\" : \"Login\"}\n                </Button>\n              </form>\n            </Form>\n          </TabsContent>\n\n          <TabsContent value=\"register\" className=\"space-y-4\">\n            <Form {...registerForm}>\n              <form onSubmit={registerForm.handleSubmit(handleRegister)} className=\"space-y-4\">\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <FormField\n                    control={registerForm.control}\n                    name=\"firstName\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>First Name</FormLabel>\n                        <FormControl>\n                          <Input\n                            placeholder=\"Ahmed\"\n                            data-testid=\"input-register-firstname\"\n                            {...field}\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={registerForm.control}\n                    name=\"lastName\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Last Name</FormLabel>\n                        <FormControl>\n                          <Input\n                            placeholder=\"Khan\"\n                            data-testid=\"input-register-lastname\"\n                            {...field}\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n\n                <FormField\n                  control={registerForm.control}\n                  name=\"email\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Email</FormLabel>\n                      <FormControl>\n                        <Input\n                          type=\"email\"\n                          placeholder=\"your@email.com\"\n                          data-testid=\"input-register-email\"\n                          {...field}\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={registerForm.control}\n                  name=\"password\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Password</FormLabel>\n                      <FormControl>\n                        <Input\n                          type=\"password\"\n                          placeholder=\"\"\n                          data-testid=\"input-register-password\"\n                          {...field}\n                        />\n                      </FormControl>\n                      <FormMessage />\n                      <p className=\"text-xs text-muted-foreground\">\n                        At least 8 characters with uppercase, lowercase, and number\n                      </p>\n                    </FormItem>\n                  )}\n                />\n\n                <Button\n                  type=\"submit\"\n                  className=\"w-full\"\n                  disabled={isRegistering}\n                  data-testid=\"button-register-submit\"\n                >\n                  {isRegistering ? \"Creating account...\" : \"Create account\"}\n                </Button>\n              </form>\n            </Form>\n          </TabsContent>\n        </Tabs>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":8679},"server/auth.ts":{"content":"import passport from \"passport\";\nimport { Strategy as LocalStrategy } from \"passport-local\";\nimport session from \"express-session\";\nimport type { Express, RequestHandler } from \"express\";\nimport bcrypt from \"bcrypt\";\nimport connectPg from \"connect-pg-simple\";\nimport { storage } from \"./storage\";\n\nconst BCRYPT_SALT_ROUNDS = 12;\n\nexport function getSession() {\n  if (!process.env.SESSION_SECRET) {\n    throw new Error(\"SESSION_SECRET environment variable is required\");\n  }\n\n  const sessionTtl = 7 * 24 * 60 * 60 * 1000; // 1 week\n  const pgStore = connectPg(session);\n  const sessionStore = new pgStore({\n    conString: process.env.DATABASE_URL,\n    createTableIfMissing: false,\n    ttl: sessionTtl,\n    tableName: \"sessions\",\n  });\n  return session({\n    secret: process.env.SESSION_SECRET,\n    store: sessionStore,\n    resave: false,\n    saveUninitialized: false,\n    cookie: {\n      httpOnly: true,\n      secure: process.env.NODE_ENV === \"production\",\n      sameSite: \"lax\",\n      maxAge: sessionTtl,\n    },\n  });\n}\n\nexport async function setupAuth(app: Express) {\n  app.set(\"trust proxy\", 1);\n  app.use(getSession());\n  app.use(passport.initialize());\n  app.use(passport.session());\n\n  // Configure passport-local strategy\n  passport.use(\n    new LocalStrategy(\n      {\n        usernameField: \"email\",\n        passwordField: \"password\",\n      },\n      async (email, password, done) => {\n        try {\n          const user = await storage.getUserByEmail(email);\n          \n          if (!user) {\n            return done(null, false, { message: \"Invalid email or password\" });\n          }\n\n          if (!user.passwordHash) {\n            return done(null, false, { message: \"Please set up your password\" });\n          }\n\n          const isValid = await bcrypt.compare(password, user.passwordHash);\n          \n          if (!isValid) {\n            return done(null, false, { message: \"Invalid email or password\" });\n          }\n\n          return done(null, { userId: user.id });\n        } catch (error) {\n          return done(error);\n        }\n      }\n    )\n  );\n\n  // Serialize only the user ID\n  passport.serializeUser((user: any, done) => {\n    done(null, user.userId);\n  });\n\n  // Deserialize by fetching user from database\n  passport.deserializeUser(async (userId: string, done) => {\n    try {\n      const user = await storage.getUser(userId);\n      if (!user) {\n        return done(null, false);\n      }\n      done(null, { userId: user.id });\n    } catch (error) {\n      done(error);\n    }\n  });\n}\n\nexport const isAuthenticated: RequestHandler = async (req, res, next) => {\n  if (!req.isAuthenticated()) {\n    return res.status(401).json({ message: \"Unauthorized\" });\n  }\n  \n  // Attach userId to request for convenience\n  (req as any).userId = (req.user as any).userId;\n  next();\n};\n\n// Helper function to hash passwords\nexport async function hashPassword(password: string): Promise<string> {\n  return await bcrypt.hash(password, BCRYPT_SALT_ROUNDS);\n}\n\n// Helper function to verify passwords\nexport async function verifyPassword(password: string, hash: string): Promise<boolean> {\n  return await bcrypt.compare(password, hash);\n}\n","size_bytes":3141},"client/src/pages/admin/Orders.tsx":{"content":"import { AdminDashboard } from \"./AdminDashboard\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { ShoppingCart } from \"lucide-react\";\n\ninterface Order {\n  id: string;\n  buyerId: string;\n  buyerEmail?: string;\n  total: string;\n  status: string;\n  createdAt: string;\n  itemCount?: number;\n}\n\nexport default function AdminOrders() {\n  const { data: orders, isLoading } = useQuery<Order[]>({\n    queryKey: ['/api/admin/orders'],\n  });\n\n  const getStatusBadgeVariant = (status: string) => {\n    switch (status) {\n      case 'completed':\n        return 'default';\n      case 'processing':\n        return 'secondary';\n      case 'pending':\n        return 'outline';\n      case 'cancelled':\n        return 'destructive';\n      default:\n        return 'outline';\n    }\n  };\n\n  return (\n    <AdminDashboard>\n      <div className=\"p-6 space-y-6\">\n        <div>\n          <h1 className=\"text-3xl font-bold\" data-testid=\"heading-orders\">Orders Overview</h1>\n          <p className=\"text-muted-foreground\">Monitor all platform orders</p>\n        </div>\n\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <ShoppingCart className=\"w-5 h-5\" />\n              All Orders ({orders?.length || 0})\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {isLoading ? (\n              <p className=\"text-muted-foreground\">Loading orders...</p>\n            ) : orders && orders.length > 0 ? (\n              <div className=\"border rounded-md\">\n                <Table>\n                  <TableHeader>\n                    <TableRow>\n                      <TableHead>Order ID</TableHead>\n                      <TableHead>Customer</TableHead>\n                      <TableHead>Total</TableHead>\n                      <TableHead>Status</TableHead>\n                      <TableHead>Date</TableHead>\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {orders.map((order) => (\n                      <TableRow key={order.id}>\n                        <TableCell className=\"font-mono text-sm\" data-testid={`text-order-id-${order.id}`}>\n                          {order.id.substring(0, 8)}...\n                        </TableCell>\n                        <TableCell data-testid={`text-order-buyer-${order.id}`}>\n                          {order.buyerEmail || order.buyerId.substring(0, 8)}\n                        </TableCell>\n                        <TableCell className=\"font-medium\" data-testid={`text-order-total-${order.id}`}>\n                          PKR {parseFloat(order.total).toLocaleString()}\n                        </TableCell>\n                        <TableCell>\n                          <Badge\n                            variant={getStatusBadgeVariant(order.status)}\n                            data-testid={`badge-order-status-${order.id}`}\n                          >\n                            {order.status}\n                          </Badge>\n                        </TableCell>\n                        <TableCell data-testid={`text-order-date-${order.id}`}>\n                          {new Date(order.createdAt).toLocaleDateString()}\n                        </TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n                </Table>\n              </div>\n            ) : (\n              <div className=\"text-center py-12\">\n                <ShoppingCart className=\"w-16 h-16 mx-auto mb-4 text-muted-foreground\" />\n                <p className=\"text-muted-foreground\">No orders found</p>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    </AdminDashboard>\n  );\n}\n","size_bytes":3951},"client/src/pages/admin/Users.tsx":{"content":"import { AdminDashboard } from \"./AdminDashboard\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Users as UsersIcon } from \"lucide-react\";\n\ninterface User {\n  id: string;\n  email: string;\n  firstName: string | null;\n  lastName: string | null;\n  role: string;\n  createdAt: string;\n}\n\nexport default function AdminUsers() {\n  const { toast } = useToast();\n\n  const { data: users, isLoading } = useQuery<User[]>({\n    queryKey: ['/api/users'],\n  });\n\n  const updateRoleMutation = useMutation({\n    mutationFn: async ({ userId, role }: { userId: string; role: string }) => {\n      return apiRequest('PUT', `/api/admin/users/${userId}/role`, { role });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/users'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/admin/analytics'] });\n      toast({\n        title: \"Role updated\",\n        description: \"User role has been updated successfully.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to update user role.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const getRoleBadgeVariant = (role: string) => {\n    switch (role) {\n      case 'admin':\n        return 'default';\n      case 'vendor':\n        return 'secondary';\n      default:\n        return 'outline';\n    }\n  };\n\n  return (\n    <AdminDashboard>\n      <div className=\"p-6 space-y-6\">\n        <div>\n          <h1 className=\"text-3xl font-bold\" data-testid=\"heading-users\">Users Management</h1>\n          <p className=\"text-muted-foreground\">View and manage platform users</p>\n        </div>\n\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <UsersIcon className=\"w-5 h-5\" />\n              All Users ({users?.length || 0})\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {isLoading ? (\n              <p className=\"text-muted-foreground\">Loading users...</p>\n            ) : users && users.length > 0 ? (\n              <div className=\"border rounded-md\">\n                <Table>\n                  <TableHeader>\n                    <TableRow>\n                      <TableHead>Email</TableHead>\n                      <TableHead>Name</TableHead>\n                      <TableHead>Role</TableHead>\n                      <TableHead>Joined</TableHead>\n                      <TableHead className=\"text-right\">Actions</TableHead>\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {users.map((user) => (\n                      <TableRow key={user.id}>\n                        <TableCell className=\"font-medium\" data-testid={`text-user-email-${user.id}`}>\n                          {user.email}\n                        </TableCell>\n                        <TableCell data-testid={`text-user-name-${user.id}`}>\n                          {user.firstName || user.lastName\n                            ? `${user.firstName || ''} ${user.lastName || ''}`.trim()\n                            : '-'}\n                        </TableCell>\n                        <TableCell>\n                          <Badge\n                            variant={getRoleBadgeVariant(user.role)}\n                            data-testid={`badge-user-role-${user.id}`}\n                          >\n                            {user.role}\n                          </Badge>\n                        </TableCell>\n                        <TableCell data-testid={`text-user-joined-${user.id}`}>\n                          {new Date(user.createdAt).toLocaleDateString()}\n                        </TableCell>\n                        <TableCell className=\"text-right\">\n                          <Select\n                            value={user.role}\n                            onValueChange={(newRole) =>\n                              updateRoleMutation.mutate({ userId: user.id, role: newRole })\n                            }\n                            disabled={updateRoleMutation.isPending}\n                          >\n                            <SelectTrigger\n                              className=\"w-32 ml-auto\"\n                              data-testid={`select-role-${user.id}`}\n                            >\n                              <SelectValue />\n                            </SelectTrigger>\n                            <SelectContent>\n                              <SelectItem value=\"buyer\">Buyer</SelectItem>\n                              <SelectItem value=\"vendor\">Vendor</SelectItem>\n                              <SelectItem value=\"admin\">Admin</SelectItem>\n                            </SelectContent>\n                          </Select>\n                        </TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n                </Table>\n              </div>\n            ) : (\n              <div className=\"text-center py-12\">\n                <UsersIcon className=\"w-16 h-16 mx-auto mb-4 text-muted-foreground\" />\n                <p className=\"text-muted-foreground\">No users found</p>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    </AdminDashboard>\n  );\n}\n","size_bytes":5749},"client/src/components/AdminSidebar.tsx":{"content":"import {\n  Sidebar,\n  SidebarContent,\n  SidebarGroup,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarMenu,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarHeader,\n  SidebarFooter,\n} from \"@/components/ui/sidebar\";\nimport { LayoutDashboard, ShieldCheck, Users, ShoppingCart, BarChart3, Store } from \"lucide-react\";\nimport { Link, useLocation } from \"wouter\";\n\nconst menuItems = [\n  {\n    title: \"Overview\",\n    url: \"/admin/dashboard\",\n    icon: LayoutDashboard,\n  },\n  {\n    title: \"Moderation\",\n    url: \"/admin/moderation\",\n    icon: ShieldCheck,\n  },\n  {\n    title: \"Users\",\n    url: \"/admin/users\",\n    icon: Users,\n  },\n  {\n    title: \"Orders\",\n    url: \"/admin/orders\",\n    icon: ShoppingCart,\n  },\n  {\n    title: \"Analytics\",\n    url: \"/admin/analytics\",\n    icon: BarChart3,\n  },\n];\n\nexport function AdminSidebar() {\n  const [location] = useLocation();\n\n  return (\n    <Sidebar>\n      <SidebarHeader className=\"border-b p-4\">\n        <SidebarMenu>\n          <SidebarMenuItem>\n            <SidebarMenuButton asChild size=\"lg\" data-testid=\"link-admin-brand-logo\">\n              <Link href=\"/\">\n                <Store className=\"w-6 h-6 text-primary\" />\n                <span className=\"font-bold text-lg\">Sanatzar Admin</span>\n              </Link>\n            </SidebarMenuButton>\n          </SidebarMenuItem>\n        </SidebarMenu>\n      </SidebarHeader>\n      <SidebarContent>\n        <SidebarGroup>\n          <SidebarGroupLabel>Admin Dashboard</SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {menuItems.map((item) => (\n                <SidebarMenuItem key={item.title}>\n                  <SidebarMenuButton asChild isActive={location === item.url}>\n                    <Link href={item.url} data-testid={`link-admin-${item.title.toLowerCase().replace(/\\s+/g, '-')}`}>\n                      <item.icon className=\"w-4 h-4\" />\n                      <span>{item.title}</span>\n                    </Link>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n      </SidebarContent>\n      <SidebarFooter className=\"border-t p-4\">\n        <SidebarMenu>\n          <SidebarMenuItem>\n            <SidebarMenuButton asChild data-testid=\"link-back-to-marketplace\">\n              <Link href=\"/\">\n                <Store className=\"w-4 h-4\" />\n                <span>Back to Marketplace</span>\n              </Link>\n            </SidebarMenuButton>\n          </SidebarMenuItem>\n        </SidebarMenu>\n      </SidebarFooter>\n    </Sidebar>\n  );\n}\n","size_bytes":2614},"client/src/pages/admin/Analytics.tsx":{"content":"import { AdminDashboard } from \"./AdminDashboard\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { BarChart3, TrendingUp, Package, Store } from \"lucide-react\";\n\ninterface AnalyticsData {\n  totalUsers: number;\n  totalStores: number;\n  totalProducts: number;\n  totalOrders: number;\n  totalRevenue: number;\n  pendingStores: number;\n  pendingProducts: number;\n  storesByDistrict?: { [district: string]: number };\n  topGIBrands?: { brand: string; count: number }[];\n}\n\nexport default function AdminAnalytics() {\n  const { data: analytics, isLoading } = useQuery<AnalyticsData>({\n    queryKey: ['/api/admin/analytics'],\n  });\n\n  return (\n    <AdminDashboard>\n      <div className=\"p-6 space-y-6\">\n        <div>\n          <h1 className=\"text-3xl font-bold\" data-testid=\"heading-analytics\">Analytics & Reports</h1>\n          <p className=\"text-muted-foreground\">Platform insights and performance metrics</p>\n        </div>\n\n        {isLoading ? (\n          <p className=\"text-muted-foreground\">Loading analytics...</p>\n        ) : (\n          <>\n            <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2 text-base\">\n                    <TrendingUp className=\"w-4 h-4 text-primary\" />\n                    Revenue Metrics\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-2\">\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Total Revenue</p>\n                    <p className=\"text-2xl font-bold\" data-testid=\"metric-analytics-revenue\">\n                      PKR {analytics?.totalRevenue?.toLocaleString() || 0}\n                    </p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Average Order Value</p>\n                    <p className=\"text-lg font-semibold\" data-testid=\"metric-avg-order-value\">\n                      PKR{' '}\n                      {analytics?.totalOrders && analytics?.totalRevenue\n                        ? Math.round(analytics.totalRevenue / analytics.totalOrders).toLocaleString()\n                        : 0}\n                    </p>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2 text-base\">\n                    <Store className=\"w-4 h-4 text-primary\" />\n                    Store Statistics\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-2\">\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Active Stores</p>\n                    <p className=\"text-2xl font-bold\" data-testid=\"metric-analytics-stores\">\n                      {analytics?.totalStores || 0}\n                    </p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Pending Approval</p>\n                    <p className=\"text-lg font-semibold\" data-testid=\"metric-analytics-pending-stores\">\n                      {analytics?.pendingStores || 0}\n                    </p>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2 text-base\">\n                    <Package className=\"w-4 h-4 text-primary\" />\n                    Product Statistics\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-2\">\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Total Products</p>\n                    <p className=\"text-2xl font-bold\" data-testid=\"metric-analytics-products\">\n                      {analytics?.totalProducts || 0}\n                    </p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Pending Approval</p>\n                    <p className=\"text-lg font-semibold\" data-testid=\"metric-analytics-pending-products\">\n                      {analytics?.pendingProducts || 0}\n                    </p>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n\n            <div className=\"grid gap-4 md:grid-cols-2\">\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <BarChart3 className=\"w-5 h-5\" />\n                    Stores by District\n                  </CardTitle>\n                  <CardDescription>Distribution across Punjab regions</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  {analytics?.storesByDistrict && Object.keys(analytics.storesByDistrict).length > 0 ? (\n                    <div className=\"space-y-3\">\n                      {Object.entries(analytics.storesByDistrict)\n                        .sort(([, a], [, b]) => b - a)\n                        .slice(0, 8)\n                        .map(([district, count]) => (\n                          <div key={district} className=\"flex items-center justify-between gap-4\">\n                            <span className=\"text-sm font-medium\" data-testid={`text-district-${district}`}>\n                              {district}\n                            </span>\n                            <div className=\"flex items-center gap-2\">\n                              <div className=\"h-2 bg-primary rounded-full\" style={{ width: `${Math.max(40, count * 20)}px` }} />\n                              <Badge variant=\"secondary\" data-testid={`badge-count-${district}`}>\n                                {count}\n                              </Badge>\n                            </div>\n                          </div>\n                        ))}\n                    </div>\n                  ) : (\n                    <p className=\"text-muted-foreground text-sm\">No district data available</p>\n                  )}\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <BarChart3 className=\"w-5 h-5\" />\n                    Top GI Brands\n                  </CardTitle>\n                  <CardDescription>Most popular geographical indications</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  {analytics?.topGIBrands && analytics.topGIBrands.length > 0 ? (\n                    <div className=\"space-y-3\">\n                      {analytics.topGIBrands.slice(0, 8).map((item, index) => (\n                        <div key={index} className=\"flex items-center justify-between gap-4\">\n                          <span className=\"text-sm font-medium\" data-testid={`text-gi-brand-${index}`}>\n                            {item.brand}\n                          </span>\n                          <div className=\"flex items-center gap-2\">\n                            <div className=\"h-2 bg-primary rounded-full\" style={{ width: `${Math.max(40, item.count * 20)}px` }} />\n                            <Badge variant=\"secondary\" data-testid={`badge-gi-count-${index}`}>\n                              {item.count}\n                            </Badge>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  ) : (\n                    <p className=\"text-muted-foreground text-sm\">No GI brand data available</p>\n                  )}\n                </CardContent>\n              </Card>\n            </div>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>Platform Summary</CardTitle>\n                <CardDescription>Key performance indicators</CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n                  <div className=\"space-y-1\">\n                    <p className=\"text-sm text-muted-foreground\">Conversion Rate</p>\n                    <p className=\"text-xl font-bold\" data-testid=\"metric-conversion-rate\">\n                      {analytics?.totalUsers && analytics?.totalOrders\n                        ? ((analytics.totalOrders / analytics.totalUsers) * 100).toFixed(1)\n                        : 0}%\n                    </p>\n                  </div>\n                  <div className=\"space-y-1\">\n                    <p className=\"text-sm text-muted-foreground\">Products per Store</p>\n                    <p className=\"text-xl font-bold\" data-testid=\"metric-products-per-store\">\n                      {analytics?.totalStores && analytics?.totalProducts\n                        ? Math.round(analytics.totalProducts / analytics.totalStores)\n                        : 0}\n                    </p>\n                  </div>\n                  <div className=\"space-y-1\">\n                    <p className=\"text-sm text-muted-foreground\">Vendor Participation</p>\n                    <p className=\"text-xl font-bold\" data-testid=\"metric-vendor-rate\">\n                      {analytics?.totalUsers && analytics?.totalStores\n                        ? ((analytics.totalStores / analytics.totalUsers) * 100).toFixed(1)\n                        : 0}%\n                    </p>\n                  </div>\n                  <div className=\"space-y-1\">\n                    <p className=\"text-sm text-muted-foreground\">Platform Health</p>\n                    <Badge variant=\"default\" className=\"text-base\" data-testid=\"badge-platform-health\">\n                      {(analytics?.pendingStores || 0) + (analytics?.pendingProducts || 0) === 0\n                        ? 'Excellent'\n                        : (analytics?.pendingStores || 0) + (analytics?.pendingProducts || 0) < 10\n                          ? 'Good'\n                          : 'Needs Attention'}\n                    </Badge>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </>\n        )}\n      </div>\n    </AdminDashboard>\n  );\n}\n","size_bytes":10356},"client/src/pages/admin/AdminDashboard.tsx":{"content":"import { useAuth } from \"@/hooks/use-auth\";\nimport { useLocation } from \"wouter\";\nimport { useEffect } from \"react\";\nimport { SidebarProvider, SidebarTrigger } from \"@/components/ui/sidebar\";\nimport { AdminSidebar } from \"@/components/AdminSidebar\";\nimport { Button } from \"@/components/ui/button\";\nimport { Moon, Sun } from \"lucide-react\";\nimport { useTheme } from \"@/components/ThemeProvider\";\n\ninterface AdminDashboardProps {\n  children: React.ReactNode;\n}\n\nexport function AdminDashboard({ children }: AdminDashboardProps) {\n  const { user, isLoading } = useAuth();\n  const [, setLocation] = useLocation();\n  const { theme, toggleTheme } = useTheme();\n\n  const isAdmin = user?.role === \"admin\";\n\n  useEffect(() => {\n    if (!isLoading && !isAdmin) {\n      setLocation(\"/\");\n    }\n  }, [isAdmin, isLoading, setLocation]);\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <p className=\"text-muted-foreground\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!isAdmin) {\n    return null;\n  }\n\n  const style = {\n    \"--sidebar-width\": \"16rem\",\n    \"--sidebar-width-icon\": \"3rem\",\n  };\n\n  return (\n    <SidebarProvider style={style as React.CSSProperties}>\n      <div className=\"flex h-screen w-full\">\n        <AdminSidebar />\n        <div className=\"flex flex-col flex-1\">\n          <header className=\"flex items-center justify-between p-4 border-b bg-background\">\n            <SidebarTrigger data-testid=\"button-admin-sidebar-toggle\" />\n            <div className=\"flex items-center gap-2\">\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                onClick={toggleTheme}\n                data-testid=\"button-admin-theme-toggle\"\n                aria-label=\"Toggle theme\"\n              >\n                {theme === \"dark\" ? <Sun className=\"w-5 h-5\" /> : <Moon className=\"w-5 h-5\" />}\n              </Button>\n            </div>\n          </header>\n          <main className=\"flex-1 overflow-auto\">\n            {children}\n          </main>\n        </div>\n      </div>\n    </SidebarProvider>\n  );\n}\n","size_bytes":2148},"client/src/pages/admin/Overview.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { AdminDashboard } from \"./AdminDashboard\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Users, Store, Package, ShoppingCart, TrendingUp, AlertCircle } from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\n\ninterface AnalyticsData {\n  totalUsers: number;\n  totalStores: number;\n  totalProducts: number;\n  totalOrders: number;\n  totalRevenue: number;\n  pendingStores: number;\n  pendingProducts: number;\n}\n\nexport default function AdminOverview() {\n  const { data: analytics, isLoading } = useQuery<AnalyticsData>({\n    queryKey: ['/api/admin/analytics'],\n  });\n\n  if (isLoading) {\n    return (\n      <AdminDashboard>\n        <div className=\"p-6\">\n          <p className=\"text-muted-foreground\">Loading analytics...</p>\n        </div>\n      </AdminDashboard>\n    );\n  }\n\n  return (\n    <AdminDashboard>\n      <div className=\"p-6 space-y-6\">\n        <div>\n          <h1 className=\"text-3xl font-bold\" data-testid=\"heading-admin-overview\">Admin Overview</h1>\n          <p className=\"text-muted-foreground\">Platform management and monitoring</p>\n        </div>\n\n        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Total Users</CardTitle>\n              <Users className=\"w-4 h-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\" data-testid=\"metric-total-users\">\n                {analytics?.totalUsers || 0}\n              </div>\n              <p className=\"text-xs text-muted-foreground\">Platform users</p>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Total Stores</CardTitle>\n              <Store className=\"w-4 h-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\" data-testid=\"metric-total-stores\">\n                {analytics?.totalStores || 0}\n              </div>\n              <p className=\"text-xs text-muted-foreground\">Registered vendors</p>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Total Products</CardTitle>\n              <Package className=\"w-4 h-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\" data-testid=\"metric-total-products\">\n                {analytics?.totalProducts || 0}\n              </div>\n              <p className=\"text-xs text-muted-foreground\">Listed items</p>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Total Orders</CardTitle>\n              <ShoppingCart className=\"w-4 h-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\" data-testid=\"metric-total-orders\">\n                {analytics?.totalOrders || 0}\n              </div>\n              <p className=\"text-xs text-muted-foreground\">All time</p>\n            </CardContent>\n          </Card>\n        </div>\n\n        <div className=\"grid gap-4 md:grid-cols-2\">\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Total Revenue</CardTitle>\n              <TrendingUp className=\"w-4 h-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\" data-testid=\"metric-total-revenue\">\n                PKR {analytics?.totalRevenue?.toLocaleString() || 0}\n              </div>\n              <p className=\"text-xs text-muted-foreground\">Platform lifetime revenue</p>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Pending Approvals</CardTitle>\n              <AlertCircle className=\"w-4 h-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"flex gap-4\">\n                <div>\n                  <div className=\"text-2xl font-bold\" data-testid=\"metric-pending-stores\">\n                    {analytics?.pendingStores || 0}\n                  </div>\n                  <p className=\"text-xs text-muted-foreground\">Stores</p>\n                </div>\n                <div>\n                  <div className=\"text-2xl font-bold\" data-testid=\"metric-pending-products\">\n                    {analytics?.pendingProducts || 0}\n                  </div>\n                  <p className=\"text-xs text-muted-foreground\">Products</p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        <Card>\n          <CardHeader>\n            <CardTitle>Platform Status</CardTitle>\n            <CardDescription>System health and moderation queue</CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-3\">\n            <div className=\"flex items-center justify-between gap-3\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-2 h-2 rounded-full bg-green-500\" />\n                <span>All systems operational</span>\n              </div>\n              <Badge variant=\"secondary\">Active</Badge>\n            </div>\n            {(analytics?.pendingStores || 0) > 0 && (\n              <div className=\"flex items-center justify-between gap-3\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"w-2 h-2 rounded-full bg-yellow-500\" />\n                  <span>{analytics?.pendingStores} store(s) awaiting approval</span>\n                </div>\n                <Badge variant=\"secondary\">Action Needed</Badge>\n              </div>\n            )}\n            {(analytics?.pendingProducts || 0) > 0 && (\n              <div className=\"flex items-center justify-between gap-3\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"w-2 h-2 rounded-full bg-yellow-500\" />\n                  <span>{analytics?.pendingProducts} product(s) awaiting review</span>\n                </div>\n                <Badge variant=\"secondary\">Action Needed</Badge>\n              </div>\n            )}\n            {(analytics?.pendingStores === 0 && analytics?.pendingProducts === 0) && (\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-2 h-2 rounded-full bg-muted\" />\n                <span className=\"text-muted-foreground\">No pending approvals</span>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    </AdminDashboard>\n  );\n}\n","size_bytes":7311},"client/src/pages/admin/Moderation.tsx":{"content":"import { AdminDashboard } from \"./AdminDashboard\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Check, X, Store, Package } from \"lucide-react\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { normalizeImagePath } from \"@/lib/utils/image\";\n\ninterface PendingStore {\n  id: string;\n  name: string;\n  description: string;\n  district: string;\n  giBrands: string[];\n  status: string;\n  createdAt: string;\n  vendorId: string;\n  vendorEmail?: string;\n}\n\ninterface PendingProduct {\n  id: string;\n  title: string;\n  description: string;\n  price: string;\n  stock: number;\n  images: string[];\n  district: string;\n  giBrand: string;\n  status: string;\n  createdAt: string;\n  storeId: string;\n  storeName?: string;\n}\n\ninterface ProductsResponse {\n  products: PendingProduct[];\n  total: number;\n}\n\nexport default function AdminModeration() {\n  const { toast } = useToast();\n\n  const { data: pendingStores, isLoading: isLoadingStores } = useQuery<PendingStore[]>({\n    queryKey: ['/api/admin/stores?status=pending'],\n    refetchOnMount: true,\n    staleTime: 0,\n  });\n\n  const { data: productsData, isLoading: isLoadingProducts } = useQuery<ProductsResponse>({\n    queryKey: ['/api/admin/products?status=pending'],\n    refetchOnMount: true,\n    staleTime: 0,\n  });\n\n  const updateStoreMutation = useMutation({\n    mutationFn: async ({ id, status }: { id: string; status: string }) => {\n      return apiRequest('PUT', `/api/admin/stores/${id}/status`, { status });\n    },\n    onSuccess: (_, variables) => {\n      queryClient.invalidateQueries({ queryKey: ['/api/admin/stores?status=pending'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/admin/analytics'] });\n      toast({\n        title: \"Store updated\",\n        description: `Store ${variables.status === 'approved' ? 'approved' : 'rejected'} successfully.`,\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to update store status.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateProductMutation = useMutation({\n    mutationFn: async ({ id, status }: { id: string; status: string }) => {\n      return apiRequest('PUT', `/api/admin/products/${id}/status`, { status });\n    },\n    onSuccess: (_, variables) => {\n      queryClient.invalidateQueries({ queryKey: ['/api/admin/products?status=pending'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/admin/analytics'] });\n      toast({\n        title: \"Product updated\",\n        description: `Product ${variables.status === 'approved' ? 'approved' : 'rejected'} successfully.`,\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to update product status.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const pendingStoresList = pendingStores || [];\n  const pendingProductsList = productsData?.products || [];\n\n  return (\n    <AdminDashboard>\n      <div className=\"p-6 space-y-6\">\n        <div>\n          <h1 className=\"text-3xl font-bold\" data-testid=\"heading-moderation\">Moderation Center</h1>\n          <p className=\"text-muted-foreground\">Review and approve vendor stores and products</p>\n        </div>\n\n        <Tabs defaultValue=\"stores\" className=\"w-full\">\n          <TabsList className=\"grid w-full max-w-md grid-cols-2\">\n            <TabsTrigger value=\"stores\" data-testid=\"tab-pending-stores\">\n              Pending Stores ({pendingStoresList.length})\n            </TabsTrigger>\n            <TabsTrigger value=\"products\" data-testid=\"tab-pending-products\">\n              Pending Products ({pendingProductsList.length})\n            </TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"stores\" className=\"space-y-4\">\n            {isLoadingStores ? (\n              <p className=\"text-muted-foreground\">Loading stores...</p>\n            ) : pendingStoresList.length === 0 ? (\n              <Card>\n                <CardContent className=\"py-12 text-center\">\n                  <Store className=\"w-16 h-16 mx-auto mb-4 text-muted-foreground\" />\n                  <h3 className=\"text-lg font-semibold mb-2\" data-testid=\"text-no-pending-stores\">\n                    No pending stores\n                  </h3>\n                  <p className=\"text-muted-foreground\">All stores have been reviewed</p>\n                </CardContent>\n              </Card>\n            ) : (\n              <div className=\"grid gap-4\">\n                {pendingStoresList.map((store) => (\n                  <Card key={store.id}>\n                    <CardHeader>\n                      <div className=\"flex items-start justify-between gap-4\">\n                        <div className=\"flex-1\">\n                          <CardTitle className=\"flex items-center gap-2\">\n                            {store.name}\n                            <Badge variant=\"secondary\" data-testid={`badge-store-status-${store.id}`}>\n                              Pending\n                            </Badge>\n                          </CardTitle>\n                          <CardDescription className=\"mt-2\">\n                            {store.description}\n                          </CardDescription>\n                        </div>\n                      </div>\n                    </CardHeader>\n                    <CardContent className=\"space-y-4\">\n                      <div className=\"grid gap-2 text-sm\">\n                        <div className=\"flex gap-2\">\n                          <span className=\"text-muted-foreground min-w-24\">District:</span>\n                          <span className=\"font-medium\" data-testid={`text-store-district-${store.id}`}>\n                            {store.district}\n                          </span>\n                        </div>\n                        <div className=\"flex gap-2\">\n                          <span className=\"text-muted-foreground min-w-24\">GI Brands:</span>\n                          <div className=\"flex flex-wrap gap-1\">\n                            {store.giBrands.map((brand, index) => (\n                              <Badge key={index} variant=\"outline\" data-testid={`badge-gi-brand-${store.id}-${index}`}>\n                                {brand}\n                              </Badge>\n                            ))}\n                          </div>\n                        </div>\n                        <div className=\"flex gap-2\">\n                          <span className=\"text-muted-foreground min-w-24\">Submitted:</span>\n                          <span>{new Date(store.createdAt).toLocaleDateString()}</span>\n                        </div>\n                      </div>\n                      <div className=\"flex gap-2 pt-2\">\n                        <Button\n                          size=\"sm\"\n                          variant=\"default\"\n                          onClick={() => updateStoreMutation.mutate({ id: store.id, status: 'approved' })}\n                          disabled={updateStoreMutation.isPending}\n                          data-testid={`button-approve-store-${store.id}`}\n                        >\n                          <Check className=\"w-4 h-4 mr-2\" />\n                          Approve\n                        </Button>\n                        <Button\n                          size=\"sm\"\n                          variant=\"destructive\"\n                          onClick={() => updateStoreMutation.mutate({ id: store.id, status: 'rejected' })}\n                          disabled={updateStoreMutation.isPending}\n                          data-testid={`button-reject-store-${store.id}`}\n                        >\n                          <X className=\"w-4 h-4 mr-2\" />\n                          Reject\n                        </Button>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            )}\n          </TabsContent>\n\n          <TabsContent value=\"products\" className=\"space-y-4\">\n            {isLoadingProducts ? (\n              <p className=\"text-muted-foreground\">Loading products...</p>\n            ) : pendingProductsList.length === 0 ? (\n              <Card>\n                <CardContent className=\"py-12 text-center\">\n                  <Package className=\"w-16 h-16 mx-auto mb-4 text-muted-foreground\" />\n                  <h3 className=\"text-lg font-semibold mb-2\" data-testid=\"text-no-pending-products\">\n                    No pending products\n                  </h3>\n                  <p className=\"text-muted-foreground\">All products have been reviewed</p>\n                </CardContent>\n              </Card>\n            ) : (\n              <div className=\"grid gap-4\">\n                {pendingProductsList.map((product) => (\n                  <Card key={product.id}>\n                    <CardHeader>\n                      <div className=\"flex items-start justify-between gap-4\">\n                        <div className=\"flex-1\">\n                          <CardTitle className=\"flex items-center gap-2\">\n                            {product.title}\n                            <Badge variant=\"secondary\" data-testid={`badge-product-status-${product.id}`}>\n                              Pending\n                            </Badge>\n                          </CardTitle>\n                          <CardDescription className=\"mt-2\">\n                            {product.description}\n                          </CardDescription>\n                        </div>\n                      </div>\n                    </CardHeader>\n                    <CardContent className=\"space-y-4\">\n                      {product.images && product.images.length > 0 && (\n                        <div className=\"flex gap-2 overflow-x-auto\">\n                          {product.images.slice(0, 3).map((image, index) => (\n                            <img\n                              key={index}\n                              src={normalizeImagePath(image)}\n                              alt={`${product.title} ${index + 1}`}\n                              className=\"w-24 h-24 object-cover rounded-md border\"\n                              data-testid={`img-product-${product.id}-${index}`}\n                            />\n                          ))}\n                        </div>\n                      )}\n                      <div className=\"grid gap-2 text-sm\">\n                        <div className=\"flex gap-2\">\n                          <span className=\"text-muted-foreground min-w-24\">Price:</span>\n                          <span className=\"font-medium\" data-testid={`text-product-price-${product.id}`}>\n                            PKR {parseFloat(product.price).toLocaleString()}\n                          </span>\n                        </div>\n                        <div className=\"flex gap-2\">\n                          <span className=\"text-muted-foreground min-w-24\">Stock:</span>\n                          <span data-testid={`text-product-stock-${product.id}`}>{product.stock} units</span>\n                        </div>\n                        <div className=\"flex gap-2\">\n                          <span className=\"text-muted-foreground min-w-24\">District:</span>\n                          <span data-testid={`text-product-district-${product.id}`}>{product.district}</span>\n                        </div>\n                        <div className=\"flex gap-2\">\n                          <span className=\"text-muted-foreground min-w-24\">GI Brand:</span>\n                          <Badge variant=\"outline\" data-testid={`badge-product-gi-${product.id}`}>\n                            {product.giBrand}\n                          </Badge>\n                        </div>\n                        <div className=\"flex gap-2\">\n                          <span className=\"text-muted-foreground min-w-24\">Submitted:</span>\n                          <span>{new Date(product.createdAt).toLocaleDateString()}</span>\n                        </div>\n                      </div>\n                      <div className=\"flex gap-2 pt-2\">\n                        <Button\n                          size=\"sm\"\n                          variant=\"default\"\n                          onClick={() => updateProductMutation.mutate({ id: product.id, status: 'approved' })}\n                          disabled={updateProductMutation.isPending}\n                          data-testid={`button-approve-product-${product.id}`}\n                        >\n                          <Check className=\"w-4 h-4 mr-2\" />\n                          Approve\n                        </Button>\n                        <Button\n                          size=\"sm\"\n                          variant=\"destructive\"\n                          onClick={() => updateProductMutation.mutate({ id: product.id, status: 'rejected' })}\n                          disabled={updateProductMutation.isPending}\n                          data-testid={`button-reject-product-${product.id}`}\n                        >\n                          <X className=\"w-4 h-4 mr-2\" />\n                          Reject\n                        </Button>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            )}\n          </TabsContent>\n        </Tabs>\n      </div>\n    </AdminDashboard>\n  );\n}\n","size_bytes":13557},"server/init.ts":{"content":"import bcrypt from \"bcrypt\";\nimport { storage } from \"./storage\";\nimport { log } from \"./vite\";\n\nconst SALT_ROUNDS = 12;\n\nexport async function initializeDefaultAdmin() {\n  const adminEmail = process.env.ADMIN_EMAIL;\n  const adminPassword = process.env.ADMIN_PASSWORD;\n\n  if (!adminEmail || !adminPassword) {\n    log(` Admin credentials not configured. Set ADMIN_EMAIL and ADMIN_PASSWORD environment variables.`);\n    return;\n  }\n\n  try {\n    const existingAdmin = await storage.getUserByEmail(adminEmail);\n\n    if (existingAdmin) {\n      log(` Default admin account verified`);\n      return;\n    }\n\n    const passwordHash = await bcrypt.hash(adminPassword, SALT_ROUNDS);\n\n    const adminUser = await storage.createUser({\n      email: adminEmail,\n      passwordHash,\n      firstName: \"Admin\",\n      lastName: \"User\",\n    });\n\n    await storage.updateUserRole(adminUser.id, \"admin\");\n\n    log(` Default admin account created successfully`);\n    log(`  Note: Please change the default admin password after first login`);\n  } catch (error) {\n    log(` Error initializing default admin: ${error}`);\n  }\n}\n","size_bytes":1113},"client/src/lib/utils/image.ts":{"content":"/**\n * Normalizes image paths to ensure they start with /\n * This is defensive programming in case backend doesn't normalize paths\n */\nexport function normalizeImagePath(path: string | undefined | null): string {\n  if (!path) return '';\n  return path.startsWith('/') ? path : `/${path}`;\n}\n\n/**\n * Normalizes an array of image paths\n */\nexport function normalizeImagePaths(paths: string[] | undefined | null): string[] {\n  if (!paths || !Array.isArray(paths)) return [];\n  return paths.map(normalizeImagePath);\n}\n","size_bytes":513}},"version":2}